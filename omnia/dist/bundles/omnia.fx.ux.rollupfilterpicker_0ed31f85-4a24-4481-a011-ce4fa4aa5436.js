if("undefined"==typeof omniaLoader&&(globalThis.omniaLoader={}),omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]=omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]||{},omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]["0ed31f85-4a24-4481-a011-ce4fa4aa5436"])throw new Error("Error, already loaded manifest 0ed31f85-4a24-4481-a011-ce4fa4aa5436 with service id bb000000-0000-bbbb-0000-0000000000bb");omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]["0ed31f85-4a24-4481-a011-ce4fa4aa5436"]=function(){(()=>{var e={"./client/fx/ux/rollupfilter/rollupfilterpicker.tsx":(e,t,r)=>{"use strict";r.r(t),r.d(t,{RollupFilterPicker:()=>c});var o=r("./node_modules/@vue/composition-api/dist/vue-composition-api.mjs"),a=r("d0a145a7-d1ef-4217-aa6f-85dd18c4231d"),i=r("./node_modules/vue-class-component/dist/vue-class-component.esm.js"),l=r("./node_modules/vue-property-decorator/lib/vue-property-decorator.js"),s=r("d7327742-5647-4075-b7ab-4f9ca852addb").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","0ed31f85-4a24-4481-a011-ce4fa4aa5436"),n=r("14a8d443-2e58-450b-a462-258bdaf69b49").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","0ed31f85-4a24-4481-a011-ce4fa4aa5436"),d=r("5e618f4d-d014-414e-a681-89e34cbeda0f"),p=Object.defineProperty,b=Object.getOwnPropertyDescriptor,u=(e,t,r,o)=>{for(var a,i=o>1?void 0:o?b(t,r):t,l=e.length-1;l>=0;l--)(a=e[l])&&(i=(o?a(t,r,i):a(i))||i);return o&&i&&p(t,r,i),i};let c=class extends s.VueComponentBase{constructor(){super(...arguments),this.filterItems=[],this.datePeriods=null,this.booleanFilterOptions=null,this.taxonomyFilterTypes=null,this.taxonomyPropertiesHasTargeting={},this.renderResourceFilterByTypes={},this.targetingPropertiesGroupingHash={}}mounted(){n.WebComponentBootstrapper.registerElementInstance(this,this.$el)}created(){Promise.all([this.targetingPropertyStore.actions.ensureLoadData.dispatch()]).then((e=>{this.selectableProperties.filter((e=>e.enterprisePropertyDataType.indexedType===a.PropertyIndexedType.Taxonomy)).forEach((e=>{const t=this.targetingPropertyStore.getters.propertiesForEnterpriseProperty(e.id);t&&t.length>0&&(this.$set(this.taxonomyPropertiesHasTargeting,e.internalName,!0),this.$set(this.targetingPropertiesGroupingHash,e.internalName,t))}))})),this.preSelectedFilterItems&&this.preSelectedFilterItems.length>0&&(this.filterItems=this.preSelectedFilterItems.map((e=>n.Utils.clone(e)))),this.renderResourceFilterByTypes[a.PropertyIndexedType.Text]=this.renderTextFilterValueSelection,this.renderResourceFilterByTypes[a.PropertyIndexedType.Boolean]=this.renderBooleanFilterValueSelection,this.renderResourceFilterByTypes[a.PropertyIndexedType.DateTime]=this.renderDateTimeFilterValueSelection,this.renderResourceFilterByTypes[a.PropertyIndexedType.Person]=this.renderPersonFilterValueSelection,this.renderResourceFilterByTypes[a.PropertyIndexedType.Taxonomy]=this.renderTaxonomyFilterValueSelection,this.datePeriods=[{id:a.RollupEnums.DatePeriods.OneWeekFromToday,title:this.uxLoc.Rollup.DatePeriods.OneWeekFromToday},{id:a.RollupEnums.DatePeriods.TwoWeeksFromToday,title:this.uxLoc.Rollup.DatePeriods.TwoWeeksFromToday},{id:a.RollupEnums.DatePeriods.OneMonthFromToday,title:this.uxLoc.Rollup.DatePeriods.OneMonthFromToday},{id:a.RollupEnums.DatePeriods.EarlierThanNow,title:this.uxLoc.Rollup.DatePeriods.EarlierThanNow},{id:a.RollupEnums.DatePeriods.LaterThanNow,title:this.uxLoc.Rollup.DatePeriods.LaterThanNow}],this.booleanFilterOptions=[{id:a.RollupEnums.BooleamFilterOption.Yes,title:this.uxLoc.Rollup.BooleanFilterOption.Yes,value:!0},{id:a.RollupEnums.BooleamFilterOption.No,title:this.uxLoc.Rollup.BooleanFilterOption.No,value:!1}],this.taxonomyFilterTypes=[{id:a.RollupEnums.TaxonomyFilterType.FixedValue,title:this.uxLoc.Rollup.TaxonomyFilterTypes.FixedValue},{id:a.RollupEnums.TaxonomyFilterType.User,title:this.uxLoc.Rollup.TaxonomyFilterTypes.User}]}onDataChanged(){this.onSelectedFilterItemChanged(this.filterItems.map((e=>e)))}updateFilterItem(e){switch(e.type=this.selectableProperties.find((t=>t.internalName==e.property)).enterprisePropertyDataType.indexedType,e.valueObj={},e.type){case a.PropertyIndexedType.Person:e.valueObj.value=[];break;case a.PropertyIndexedType.Taxonomy:e.valueObj.fixedTermIds=[],e.valueObj.filterType=a.RollupEnums.TaxonomyFilterType.FixedValue,e.valueObj.includeChildTerms=!1,e.valueObj.includeEmpty=!1,e.valueObj.targetingPropertyIds=null;break;case a.PropertyIndexedType.Boolean:e.valueObj.value=!0;break;case a.PropertyIndexedType.DateTime:e.valueObj.datePeriod=a.RollupEnums.DatePeriods.OneWeekFromToday}}getSelectionTargetingProperties(e){const t={};if(this.targetingPropertiesGroupingHash[e.property]){const r=e.valueObj;this.targetingPropertiesGroupingHash[e.property].forEach((e=>{t[e.id.toString()]=null==r.targetingPropertyIds||r.targetingPropertyIds.indexOf(e.id)>-1}))}return t}onTargetPropertyCheckboxChange(e,t,r){const o=e.valueObj;if(null==o.targetingPropertyIds&&this.targetingPropertiesGroupingHash[e.property]&&(o.targetingPropertyIds=[],this.targetingPropertiesGroupingHash[e.property].forEach((e=>{o.targetingPropertyIds.push(e.id)}))),r){o.targetingPropertyIds.indexOf(t)<0&&o.targetingPropertyIds.push(t)}else o.targetingPropertyIds=o.targetingPropertyIds.filter((e=>e!=t));this.onDataChanged()}renderItem(e,t){const r=this.renderResourceFilterByTypes[e.type];return(0,o.h)("div",{class:"d-flex"},[(0,o.h)("div",{class:"flex-shrink-0 flex-grow-0"},[(0,o.h)("omfx-button",{attrs:{dark:this.theming.body.bg.dark,contentClass:["align-self-center","mt-0 ml-0 mb-0 mr-1"].join(" ")},domProps:{icon:{iconType:new a.FontAwesomeIcon("fa fa-times")},styles:{bgColor:"rgba(0,0,0,0.10)",textColor:this.theming.body.text.color.base},onClick:()=>{this.filterItems.splice(t,1),this.onDataChanged()},preset:s.ButtonPresets.base.smallIcon}})]),(0,o.h)("div",[(0,o.h)("omfx-enterpriseproperty-picker",{attrs:{filled:!0,dark:this.theming.body.bg.dark},domProps:{propertyItems:this.selectableProperties,preSelectedPropertyInternalName:e.property,onChange:t=>{e.property=t,this.updateFilterItem(e),this.onDataChanged()}}}),r&&r(e)])])}renderTaxonomyFilterValueSelection(e){const t=e.valueObj,r=this.selectableProperties.find((t=>t.internalName===e.property));let i=null;r&&(i=r.settings);const l=this.getSelectionTargetingProperties(e);return(0,o.h)("div",[this.taxonomyPropertiesHasTargeting&&(0,o.h)("v-select",{attrs:{filled:!0,"item-value":"id","item-text":"title",items:this.taxonomyFilterTypes},on:{change:e=>{t.filterType=e,t.fixedTermIds=[],t.includeChildTerms=!1,t.includeEmpty=!1,t.targetingPropertyIds=null,this.onDataChanged()}},model:{value:t.filterType,callback:e=>{this.$set(t,"filterType",e)}}}),t.filterType===a.RollupEnums.TaxonomyFilterType.FixedValue&&i?(0,o.h)("omfx-term-picker",{attrs:{filled:!0,multi:!0,includeDeprecated:!0},domProps:{termSetId:i.termSetId,preSelectedTermIds:t.fixedTermIds,onTermsSelected:e=>{t.fixedTermIds=e,this.onDataChanged()}}}):t.filterType==a.RollupEnums.TaxonomyFilterType.User?[this.targetingPropertiesGroupingHash[e.property]&&this.targetingPropertiesGroupingHash[e.property].length>1&&(0,o.h)("div",{class:"mb-4"},[this.targetingPropertiesGroupingHash[e.property].map((t=>(0,o.h)("v-checkbox",{attrs:{dark:this.theming.body.bg.dark,"hide-details":!0,"input-value":l[t.id.toString()],label:t.data.title},class:"mt-0",on:{change:r=>{this.onTargetPropertyCheckboxChange(e,t.id,r)}}})))]),(0,o.h)("v-checkbox",{attrs:{dark:this.theming.body.bg.dark,"hide-details":!0,"input-value":t.includeChildTerms,label:this.uxLoc.Rollup.IncludeChildTerms},class:"mt-0",on:{change:e=>{t.includeChildTerms=e,this.onDataChanged()}}})]:null,(0,o.h)("v-checkbox",{attrs:{dark:this.theming.body.bg.dark,"hide-details":!0,"input-value":t.includeEmpty,label:this.uxLoc.Rollup.IncludeEmpty},class:"mt-0 pb-4",on:{change:e=>{t.includeEmpty=e,this.onDataChanged()}}})])}renderPersonFilterValueSelection(e){const t=e.valueObj;return(0,o.h)("omfx-people-picker",{attrs:{dark:this.theming.body.bg.dark,filled:!0,multiple:!0,label:" ",showCurrentUserOption:!0},domProps:{principalType:a.AzureAdObjectPrincipalTypes.MemberAndGuest,valueBind:t.value,onValueChanged:e=>{t.value=e,this.onDataChanged()}}})}renderTextFilterValueSelection(e){const t=e.valueObj;return(0,o.h)("v-text-field",{attrs:{dark:this.theming.body.bg.dark,filled:!0},on:{change:()=>{this.onDataChanged()}},model:{value:t.value,callback:e=>{this.$set(t,"value",e)}}})}renderDateTimeFilterValueSelection(e){const t=e.valueObj;return(0,o.h)("v-select",{attrs:{filled:!0,dark:this.theming.body.bg.dark,"item-value":"id","item-text":"title",items:this.datePeriods},on:{change:()=>{this.onDataChanged()}},model:{value:t.datePeriod,callback:e=>{this.$set(t,"datePeriod",e)}}})}renderBooleanFilterValueSelection(e){const t=e.valueObj;return(0,o.h)("v-select",{attrs:{filled:!0,dark:this.theming.body.bg.dark,clearable:!0,label:this.uxLoc.Rollup.DefaultValue,"item-value":"value","item-text":"title",items:this.booleanFilterOptions},on:{change:()=>{this.onDataChanged()}},model:{value:t.value,callback:e=>{this.$set(t,"value",e)}}})}render(){const e=(0,o.h)("omfx-button",{domProps:{onClick:()=>{this.filterItems.find((e=>!e.property))||this.filterItems.push({property:null,type:null,valueObj:{}})},styles:{bgColor:"rgba(0,0,0,0.10)",textColor:this.theming.body.text.color.base},size:a.ButtonSizes.small,mode:a.ButtonModes.flat},attrs:{text:this.uxLoc.Rollup.AddFilter}});return(0,o.h)("div",[this.filterItems.map(((e,t)=>this.renderItem(e,t))),(0,o.h)("div",[this.actionButtonsRenderer?this.actionButtonsRenderer(e):e])])}};u([(0,l.Prop)()],c.prototype,"selectableProperties",2),u([(0,l.Prop)()],c.prototype,"preSelectedFilterItems",2),u([(0,l.Prop)()],c.prototype,"onSelectedFilterItemChanged",2),u([(0,l.Prop)()],c.prototype,"actionButtonsRenderer",2),u([(0,n.Localize)(s.OmniaUxLocalizationNamespace)],c.prototype,"uxLoc",2),u([(0,n.Inject)(d.TargetingPropertyStore)],c.prototype,"targetingPropertyStore",2),c=u([i.default],c),n.WebComponentBootstrapper.registerElement((e=>{(0,n.vueCustomElement)(e.elementName,c)}))},"./node_modules/@vue/composition-api/dist/vue-composition-api.mjs":(e,t,r)=>{e.exports=r("dll-reference md2")("./node_modules/@vue/composition-api/dist/vue-composition-api.mjs")},"./node_modules/vue-class-component/dist/vue-class-component.esm.js":(e,t,r)=>{e.exports=r("dll-reference md2")("./node_modules/vue-class-component/dist/vue-class-component.esm.js")},"./node_modules/vue-property-decorator/lib/vue-property-decorator.js":(e,t,r)=>{e.exports=r("dll-reference md2")("./node_modules/vue-property-decorator/lib/vue-property-decorator.js")},"14a8d443-2e58-450b-a462-258bdaf69b49":(e,t,r)=>{e.exports=r("dll-reference md10")("14a8d443-2e58-450b-a462-258bdaf69b49")},"5e618f4d-d014-414e-a681-89e34cbeda0f":(e,t,r)=>{e.exports=r("dll-reference md10")("5e618f4d-d014-414e-a681-89e34cbeda0f")},"d0a145a7-d1ef-4217-aa6f-85dd18c4231d":(e,t,r)=>{e.exports=r("dll-reference md9")("d0a145a7-d1ef-4217-aa6f-85dd18c4231d")},"d7327742-5647-4075-b7ab-4f9ca852addb":(e,t,r)=>{e.exports=r("dll-reference md66")("d7327742-5647-4075-b7ab-4f9ca852addb")},"dll-reference md2":e=>{"use strict";e.exports=omniaVendor},"dll-reference md9":e=>{"use strict";e.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["a2892051-fd9f-4056-ae8d-30d16d48417d"]},"dll-reference md10":e=>{"use strict";e.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["a5a89056-b5f5-475d-8518-a1f55090379d"]},"dll-reference md66":e=>{"use strict";e.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["dee030cc-4ab3-4158-bb06-8049f5c67542"]}};if("undefined"==typeof omniaWebpackJsonp&&(globalThis.omniaWebpackJsonp={}),globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]=globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]||{},globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["0ed31f85-4a24-4481-a011-ce4fa4aa5436"])throw new Error("Error, already loaded manifest 0ed31f85-4a24-4481-a011-ce4fa4aa5436 with service id bb000000-0000-bbbb-0000-0000000000bb");globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["0ed31f85-4a24-4481-a011-ce4fa4aa5436"]=r;var t={};function r(o){var a=t[o];if(void 0!==a)return a.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,r),i.exports}r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};r("./client/fx/ux/rollupfilter/rollupfilterpicker.tsx")})()};