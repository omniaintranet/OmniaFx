if("undefined"==typeof omniaLoader&&(globalThis.omniaLoader={}),omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]=omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]||{},omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]["ba03fc7e-6921-4682-89c0-a0ffe0cf942e"])throw new Error("Error, already loaded manifest ba03fc7e-6921-4682-89c0-a0ffe0cf942e with service id bb000000-0000-bbbb-0000-0000000000bb");omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]["ba03fc7e-6921-4682-89c0-a0ffe0cf942e"]=function(){(()=>{var e={"./client/fx/ux/applayout/renderer/applayoutrenderer.tsx":(e,t,a)=>{"use strict";a.r(t),a.d(t,{AppLayoutRenderer:()=>f,InternalAppLayoutRenderer:()=>h});var o=a("./node_modules/@vue/composition-api/dist/vue-composition-api.mjs"),n=a("14a8d443-2e58-450b-a462-258bdaf69b49").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","ba03fc7e-6921-4682-89c0-a0ffe0cf942e"),r=a("d0a145a7-d1ef-4217-aa6f-85dd18c4231d"),s=a("./node_modules/vue-class-component/dist/vue-class-component.esm.js"),i=a("./node_modules/vue-property-decorator/lib/vue-property-decorator.js"),d=a("d7327742-5647-4075-b7ab-4f9ca852addb").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","ba03fc7e-6921-4682-89c0-a0ffe0cf942e"),p=a("97786ea9-4861-48bd-8a57-eae9bbdb4892"),b=a("5e618f4d-d014-414e-a681-89e34cbeda0f"),u=a("e25b9dd8-6dd7-4437-8ddd-0b9fadba73ac"),c=Object.defineProperty,l=Object.getOwnPropertyDescriptor,y=(e,t,a,o)=>{for(var n,r=o>1?void 0:o?l(t,a):t,s=e.length-1;s>=0;s--)(n=e[s])&&(r=(o?n(t,a,r):n(r))||r);return o&&r&&c(t,a,r),r};let h=class extends d.VueComponentBase{constructor(){super(...arguments),this.appInstanceLayout=null,this.versionedData=null,this.breakpoints=[...d.BreakPointManager.breakPoints()],this.currentBreakpoint=null}created(){this.setCurrentBreakpoint(),this.appInstanceLayout=this.appInstanceLayoutStore.getters.getLayout(this.appInstanceLayoutId);const e=this.appInstanceLayout.publishedVersionReference;this.appInstanceLayoutStore.actions.ensureLoadDefinition.dispatch(e).then((()=>{this.versionedData=this.appInstanceLayoutStore.getters.getLayoutDefinition(e),this.versionedData&&(this.ensureHandleWindowResize(),this.ensureHandleNewVersions())}))}mounted(){n.WebComponentBootstrapper.registerElementInstance(this,this.$el)}beforeDestroy(){window.removeEventListener("resize",this.handleWindowResize)}ensureHandleWindowResize(){this.enableAlternateLayout&&window.addEventListener("resize",this.handleWindowResize)}isLayoutRendererCanvasAvailable(){return!(!!(!document.body.contains(this.$el)||this.$el._isDestroyed)||!this.layoutRendererCanvasApi)}handleWindowResize(){p.Utils.timewatch(`AlternateLayout_${this.appInstanceLayoutId}_HandleWindowResize`,(()=>{if(this.isLayoutRendererCanvasAvailable()){this.setCurrentBreakpoint()&&this.setLayout()}}),100)}setCurrentBreakpoint(){let e=!1;const t=window.innerWidth,a=this.breakpoints.find((e=>t<=e.maxWidth));return this.currentBreakpoint&&this.currentBreakpoint.id===a.id||(this.currentBreakpoint=a,e=!0),e}ensureHandleNewVersions(){this.subscriptionHandler.add(this.appInstanceLayoutStore.actions.publishDefinition.onDispatched((e=>{if(this.isLayoutRendererCanvasAvailable()){this.appInstanceLayout=this.appInstanceLayoutStore.getters.getLayout(this.appInstanceLayoutId);!(this.appInstanceLayout.versionedDataIdentifier.dataId!==e.dataId&&!this.appInstanceLayout.alternateLayouts.find((t=>t.versionedDataIdentifier.dataId===e.dataId)))&&(this.versionedData=this.appInstanceLayoutStore.getters.getLayoutDefinition(this.appInstanceLayout.publishedVersionReference),this.setLayout())}})))}getApi(e){this.layoutRendererCanvasApi=e,this.setLayout()}setLayout(){this.getLayoutForCurrentBreakpoint().then((e=>{this.isLayoutRendererCanvasAvailable&&(this.layoutRendererCanvasApi.layoutStore.mutations.setTheme(this.layoutThemeDefinition,this.blockThemeDefinition),this.layoutRendererCanvasApi.layoutStore.mutations.setLayoutBackgroundImageElementId(this.layoutBackgroundImageElementId),this.layoutRendererCanvasApi.layoutStore.mutations.setLayout(e),this.layoutRendererCanvasApi.layoutStore.events.onBlockInstanceCreated((e=>{e.appLayout={id:this.appInstanceLayoutId}})))}))}getLayoutForCurrentBreakpoint(){return new Promise(((e,t)=>{this.enableAlternateLayout?this.appInstanceLayoutStore.actions.ensureLoadDisplayBreakpointMapping.dispatch(this.appInstanceLayout).then((t=>{const a=t?t[this.currentBreakpoint.id]:null,o=a?this.appInstanceLayout.alternateLayouts.find((e=>e.publishedVersionReference&&e.id===a)):null;o?this.appInstanceLayoutStore.actions.ensureLoadDefinition.dispatch(o.publishedVersionReference).then((()=>{const t=this.appInstanceLayoutStore.getters.getLayoutDefinition(o.publishedVersionReference);e(t.data.layout)})):e(this.versionedData.data.layout)})):e(this.versionedData.data.layout)}))}render(){return this.versionedData?(0,o.h)("omfx-layout-renderer-canvas",{attrs:{disableScrollCompensation:!0,provider:r.AppLayoutProvider.appLayout,getApi:this.getApi},key:this.versionedData.versionId}):null}};y([(0,i.Prop)()],h.prototype,"layoutBackgroundImageElementId",2),y([(0,i.Prop)()],h.prototype,"appInstanceLayoutId",2),y([(0,i.Prop)({default:null})],h.prototype,"layoutThemeDefinition",2),y([(0,i.Prop)({default:null})],h.prototype,"blockThemeDefinition",2),y([(0,i.Prop)()],h.prototype,"enableAlternateLayout",2),y([(0,n.Inject)(b.AppLayoutStore)],h.prototype,"appInstanceLayoutStore",2),y([(0,n.Inject)(u.AppLayoutService)],h.prototype,"appLayoutService",2),y([(0,n.Inject)(p.SubscriptionHandler)],h.prototype,"subscriptionHandler",2),h=y([s.default],h);let f=class extends d.VueComponentBase{constructor(){super(...arguments),this.isLoading=!0}created(){Promise.all([this.appInstanceLayoutStore.actions.ensureLoadById.dispatch(this.appInstanceLayoutId),this.appContextProvider.updateContextByAppInstanceId(this.appInstanceId)]).then((()=>{this.isLoading=!1}))}mounted(){n.WebComponentBootstrapper.registerElementInstance(this,this.$el)}getReativeRenderKeyWithVersions(){let e="";const t=this.appInstanceLayoutStore.getters.getLayout(this.appInstanceLayoutId);return t?.publishedVersionReference&&(e="AppLayoutRenderer_"+t.publishedVersionReference.versionId,t.alternateLayouts.forEach((t=>{t.publishedVersionReference&&(e+="_"+t.publishedVersionReference.versionId)}))),e}renderLayoutWithReactiveOnVersions(){const e=this.getReativeRenderKeyWithVersions();return e?(0,o.h)(h,{key:e,attrs:{appInstanceLayoutId:this.appInstanceLayoutId,layoutThemeDefinition:this.layoutThemeDefinition,blockThemeDefinition:this.blockThemeDefinition,enableAlternateLayout:this.enableAlternateLayout,layoutBackgroundImageElementId:this.layoutBackgroundImageElementId}}):null}render(){return this.isLoading?null:this.renderLayoutWithReactiveOnVersions()}};y([(0,i.Prop)()],f.prototype,"layoutBackgroundImageElementId",2),y([(0,i.Prop)()],f.prototype,"appInstanceId",2),y([(0,i.Prop)()],f.prototype,"appInstanceLayoutId",2),y([(0,i.Prop)({default:null})],f.prototype,"layoutThemeDefinition",2),y([(0,i.Prop)({default:null})],f.prototype,"blockThemeDefinition",2),y([(0,i.Prop)()],f.prototype,"enableAlternateLayout",2),y([(0,p.Provide)(p.ServiceContainerContext)],f.prototype,"serviceContainerContext",2),y([(0,n.Inject)(b.AppLayoutStore)],f.prototype,"appInstanceLayoutStore",2),y([(0,n.Inject)(d.AppContextProvider)],f.prototype,"appContextProvider",2),f=y([s.default],f),n.WebComponentBootstrapper.registerElement((e=>{(0,n.vueCustomElement)(e.elementName,f)}))},"./node_modules/@vue/composition-api/dist/vue-composition-api.mjs":(e,t,a)=>{e.exports=a("dll-reference md2")("./node_modules/@vue/composition-api/dist/vue-composition-api.mjs")},"./node_modules/vue-class-component/dist/vue-class-component.esm.js":(e,t,a)=>{e.exports=a("dll-reference md2")("./node_modules/vue-class-component/dist/vue-class-component.esm.js")},"./node_modules/vue-property-decorator/lib/vue-property-decorator.js":(e,t,a)=>{e.exports=a("dll-reference md2")("./node_modules/vue-property-decorator/lib/vue-property-decorator.js")},"14a8d443-2e58-450b-a462-258bdaf69b49":(e,t,a)=>{e.exports=a("dll-reference md10")("14a8d443-2e58-450b-a462-258bdaf69b49")},"5e618f4d-d014-414e-a681-89e34cbeda0f":(e,t,a)=>{e.exports=a("dll-reference md10")("5e618f4d-d014-414e-a681-89e34cbeda0f")},"97786ea9-4861-48bd-8a57-eae9bbdb4892":(e,t,a)=>{e.exports=a("dll-reference md9")("97786ea9-4861-48bd-8a57-eae9bbdb4892")},"d0a145a7-d1ef-4217-aa6f-85dd18c4231d":(e,t,a)=>{e.exports=a("dll-reference md9")("d0a145a7-d1ef-4217-aa6f-85dd18c4231d")},"d7327742-5647-4075-b7ab-4f9ca852addb":(e,t,a)=>{e.exports=a("dll-reference md66")("d7327742-5647-4075-b7ab-4f9ca852addb")},"e25b9dd8-6dd7-4437-8ddd-0b9fadba73ac":(e,t,a)=>{e.exports=a("dll-reference md10")("e25b9dd8-6dd7-4437-8ddd-0b9fadba73ac")},"dll-reference md2":e=>{"use strict";e.exports=omniaVendor},"dll-reference md9":e=>{"use strict";e.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["a2892051-fd9f-4056-ae8d-30d16d48417d"]},"dll-reference md10":e=>{"use strict";e.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["a5a89056-b5f5-475d-8518-a1f55090379d"]},"dll-reference md66":e=>{"use strict";e.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["dee030cc-4ab3-4158-bb06-8049f5c67542"]}};if("undefined"==typeof omniaWebpackJsonp&&(globalThis.omniaWebpackJsonp={}),globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]=globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]||{},globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["ba03fc7e-6921-4682-89c0-a0ffe0cf942e"])throw new Error("Error, already loaded manifest ba03fc7e-6921-4682-89c0-a0ffe0cf942e with service id bb000000-0000-bbbb-0000-0000000000bb");globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["ba03fc7e-6921-4682-89c0-a0ffe0cf942e"]=a;var t={};function a(o){var n=t[o];if(void 0!==n)return n.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,a),r.exports}a.d=(e,t)=>{for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};a("./client/fx/ux/applayout/renderer/applayoutrenderer.tsx")})()};