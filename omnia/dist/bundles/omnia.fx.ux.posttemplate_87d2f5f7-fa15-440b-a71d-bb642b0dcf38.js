if("undefined"==typeof omniaLoader&&(globalThis.omniaLoader={}),omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]=omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]||{},omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]["87d2f5f7-fa15-440b-a71d-bb642b0dcf38"])throw new Error("Error, already loaded manifest 87d2f5f7-fa15-440b-a71d-bb642b0dcf38 with service id bb000000-0000-bbbb-0000-0000000000bb");omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]["87d2f5f7-fa15-440b-a71d-bb642b0dcf38"]=function(){(()=>{var t={"./client/fx/ux/post/templates/posttemplate.tsx":(t,e,s)=>{"use strict";s.r(e),s.d(e,{PostTemplate:()=>C});var i=s("./node_modules/@vue/babel-helper-vue-jsx-merge-props/dist/helper.js"),o=s.n(i),r=s("./node_modules/typestyle/umd/typestyle.js"),d=s("./node_modules/vue-class-component/dist/vue-class-component.esm.js"),n=s("./node_modules/@vue/composition-api/dist/vue-composition-api.mjs"),a=s("./node_modules/vue-property-decorator/lib/vue-property-decorator.js"),h=s("d7327742-5647-4075-b7ab-4f9ca852addb").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","87d2f5f7-fa15-440b-a71d-bb642b0dcf38"),l=s("14a8d443-2e58-450b-a462-258bdaf69b49").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","87d2f5f7-fa15-440b-a71d-bb642b0dcf38"),p=s("97786ea9-4861-48bd-8a57-eae9bbdb4892"),c=s("d0a145a7-d1ef-4217-aa6f-85dd18c4231d"),b=s("./client/fx/ux/uxmodels.js"),g=s("./client/fx/ux/post/loc/localize.js");const m={dialogWidth:(0,r.style)({width:"50% !important",maxWidth:"600px",$nest:{"@media screen and (max-width: 700px)":{width:"90% !important"},".theme--dark.v-btn.v-btn--icon":{color:"black !important"}}}),wrapper:t=>(0,r.style)({position:"relative",$nest:{}}),likeAvatar:(0,r.style)({$nest:{"&:hover":{cursor:"pointer"}}}),editedCaption:(0,r.style)({position:"relative",top:"-5px"}),contentWrapper:t=>{const e=t.body.bg.color.base,s=t.body.border.radiustop>0?t.body.border.radiustop+"px":"inherit",i=t.body.border.radiusbottom>0?t.body.border.radiusbottom+"px":"inherit",o=t.body.border.radiustop>0?s:"inherit";let d,n;return t.body.border&&t.body.border.width>0&&(d=t.body.border.width+"px",n=t.body.border.color),(0,r.style)({backgroundColor:e,borderWidth:d,borderColor:n,borderStyle:d?"solid":null,borderTopRightRadius:s,borderTopLeftRadius:o,borderBottomLeftRadius:i,borderBottomRightRadius:i,paddingTop:"8px",paddingLeft:"10px"})},postCardDefaultStyling:t=>{const e=t.body.text.color.dark?"rgba(0,0,0,0.05)":"rgba(255,255,255,0.1)";return(0,r.style)({backgroundColor:e,borderTopRightRadius:"5px",borderTopLeftRadius:"0px",borderBottomLeftRadius:"5px",borderBottomRightRadius:"5px"})},titleWrapper:(0,r.style)({fontSize:"16px",$nest:{a:{textDecoration:"none",$nest:{"&:hover":{textDecoration:"underline"}}}}}),noticeReply:(0,r.style)({}),editContentFooter:(0,r.style)({display:"flex",justifyContent:"flex-end",marginBlock:"5px"}),footerWrapper:t=>(0,r.style)({paddingTop:"5px",paddingBottom:"5px",paddingLeft:"12px",fontSize:"14px"}),postActionLink:t=>(0,r.style)({$nest:{"&:hover":{textDecoration:"underline"}}}),title:t=>(0,r.style)({lineHeight:"18px"}),dateInfo:(0,r.style)({lineHeight:"6px",position:"relative",top:"-5px"}),editOptionsMenu:(0,r.style)({position:"absolute!important",right:"0px",float:"right",marginTop:"-4px",$nest:{"&:focus":{outline:"-webkit-focus-ring-color auto"}}}),removeReplyUserAction:(0,r.style)({margin:"0 !important",height:"10px",width:"10px"}),underlineWhenHover:(0,r.style)({textDecoration:"none !important",$nest:{"&:hover":{textDecoration:"underline !important"}}}),bestReply:(0,r.style)({color:"green",marginRight:"5px"}),buttonOutline:{$nest:{"&:focus":{outline:"-webkit-focus-ring-color auto"}}},personWrapper:t=>(0,r.style)({maxWidth:"100%",wordWrap:"break-word",display:"inline-block",fontWeight:450,$nest:{span:{fontWeight:450}}}),resemblePostCard:t=>(0,r.style)({backgroundColor:t.body.bg.color.base?t.body.bg.color.base:t.body.text.color.dark?"rgba(0,0,0,0.05)":"rgba(255,255,255,0.1)",color:t.body.bg.dark?t.body.bg.color.lighten5:t.body.bg.color.darken4}),reactiveThemeTextColor:t=>{let e;return e=t.body.text.color.base?t.body.text.color.base+"!important":(t.body.bg.dark?t.body.bg.color.lighten5:t.body.bg.color.darken4)+"!important",(0,r.style)({color:e})},reactiveThemeTextFgColor:t=>{let e;return e=t.body.fg.color.base?t.body.fg.color.base+"!important":(t.body.bg.dark?t.body.bg.color.lighten5:t.body.bg.color.darken4)+"!important",(0,r.style)({color:e})}};var u=Object.defineProperty,y=Object.getOwnPropertyDescriptor,f=(t,e,s,i)=>{for(var o,r=i>1?void 0:i?y(e,s):e,d=t.length-1;d>=0;d--)(o=t[d])&&(r=(i?o(e,s,r):o(r))||r);return i&&r&&u(e,s,r),r};let P=class extends h.VueComponentBase{created(){}render(t){let e="",s="";return this.persistedPost.createdAt&&(e="social"===this.dateFormat.toLowerCase()?l.Utils.getSocialDate(this.persistedPost.createdAt,this.language):moment(this.persistedPost.createdAt).format(this.dateFormat)),this.persistedPost.createdAt&&this.persistedPost.modifiedAt&&this.persistedPost.createdAt!==this.persistedPost.modifiedAt&&(s="social"===this.dateFormat.toLowerCase()?l.Utils.getSocialDate(this.persistedPost.modifiedAt,this.language):moment(this.persistedPost.modifiedAt).format(this.dateFormat)),this.isDeleted?t("div",{class:[this.theming.body.text.css,m.contentWrapper(this.theming),m.reactiveThemeTextColor(this.theming),this.theming.body.border&&"elevation-"+this.theming.body.border.elevation,"pb-1"]},[this.postLoc.DeletedMessage,"Â ",this.getUserHash()[this.persistedPost.deletedBy.uid.toLowerCase()]?t("a",{class:[m.underlineWhenHover,m.reactiveThemeTextFgColor(this.theming)],attrs:{target:"_blank",href:this.getUserHash()[this.persistedPost.deletedBy.uid.toLowerCase()].profileUrl}},[this.getUserHash()[this.persistedPost.deletedBy.uid.toLowerCase()].displayName]):this.persistedPost.deletedBy]):t("div",{class:[m.contentWrapper(this.theming),m.reactiveThemeTextColor(this.theming),this.theming.body.border&&"elevation-"+this.theming.body.border.elevation]},[t("div",{class:m.titleWrapper},[t("v-row",{attrs:{"no-gutters":!0}},[t("v-col",{attrs:{cols:"9"}},[this.renderTitleInfo(!1,this.theming)]),t("v-col",{attrs:{cols:"3"}},[this.persistedPost.postId&&this.topicPermissionDictionary[this.persistedPost.post.context.getTopicId().toString()].contributor&&this.renderEditOptions(this.theming)]),t("v-col",{attrs:{cols:"12"}},[t("span",{class:[this.theming.body.text.csslighter2,"caption",m.dateInfo]},[e]),s?t("v-tooltip",o()([{attrs:{top:!0}},this.transformVSlot({activator:e=>[t("span",{on:{...e.on},class:[m.editedCaption,this.theming.body.text.csslighter2,"caption"]},[" - ",this.postLoc.Edited," "])]})]),[t("span",[s])]):null])])]),t("div",{class:[this.theming.body.text.css]},[t("omfx-rich-text-editor-renderer",{domProps:{editorContent:this.persistedPost.post.content}})])])}};f([(0,a.Prop)()],P.prototype,"renderTitleInfo",2),f([(0,a.Prop)()],P.prototype,"renderEditOptions",2),f([(0,a.Prop)()],P.prototype,"topicPermissionDictionary",2),f([(0,a.Prop)()],P.prototype,"getUserHash",2),f([(0,a.Prop)()],P.prototype,"persistedPost",2),f([(0,a.Prop)()],P.prototype,"isDeleted",2),f([(0,a.Prop)()],P.prototype,"dateFormat",2),f([(0,a.Prop)()],P.prototype,"language",2),f([(0,l.Localize)(g.PostLocalization.namespace)],P.prototype,"postLoc",2),P=f([d.default],P);var x=Object.defineProperty,T=Object.getOwnPropertyDescriptor,v=(t,e,s,i)=>{for(var o,r=i>1?void 0:i?T(e,s):e,d=t.length-1;d>=0;d--)(o=t[d])&&(r=(i?o(e,s,r):o(r))||r);return i&&r&&x(e,s,r),r};let C=class extends h.VueComponentBase{constructor(){super(...arguments),this.dateFormat="",this.likeListingTemplate="",this.isAdd=!1,this.isEdit=!1,this.isReply=!1,this.isAddingOrUpdatingPost=!1,this.isDeleting=!1,this.draftContent="",this.showLikeListing=!1,this.focusedElement=null,this.language="en",this.resetContent=!1,this.isRTEPlaceholderClicked=!1,this.isLoadingRTE=!1,this.isRenderRTE=!0,this.currentUserLiked=!1,this.draftMentionUsers=[],this.childTargetThemeId=null,this.dialogModel={visible:!1},this.deleteDialogModel={visible:!1}}onPostChange(t,e){t.post.content!==this.ensureContentOnSave(e.post.content)&&(this.draftContent=this.persistedPost.post.content),this.isAdd=!this.persistedPost.postId&&!this.persistedPost.post.parentId,this.isReply=!(this.persistedPost.postId||!this.persistedPost.post.parentId),this.currentUserLiked=!(!this.persistedPost.likedBy||!this.persistedPost.likedBy.filter((t=>t.uid===this.currentUser.uid))[0])}created(){this.draftContent=this.persistedPost.post.content,this.isAdd=!this.persistedPost.postId&&!this.persistedPost.post.parentId,this.isReply=!(this.persistedPost.postId||!this.persistedPost.post.parentId),this.dateFormat="social",this.likeListingTemplate="omfx-post-like-listing-template",this.language=this.omniaCtx.language,this.dialogTheme=this.themeStore.getters.getThemingByTargetIdWithFallback(c.Constants.ux.themeTargetIds.layoutDialog),this.currentUserLiked=!(!this.persistedPost.likedBy||!this.persistedPost.likedBy.filter((t=>t.uid===this.currentUser.uid))[0]),this.customCardThemeId=p.Utils.generateGuid()}mounted(){l.WebComponentBootstrapper.registerElementInstance(this,this.$el)}beforeUnmount(){this.ensureCustomThemeUnregistered(this.themeStore,this.customCardThemeId)}ensureCustomThemeRegistered(t,e,s){let i=t.getters.getThemingById(e);i||(i=new h.Theming({accessibility:s,default:s,id:e,targetRegistrationId:e}),t.mutations.addThemingInstance.commit(i))}ensureCustomThemeUnregistered(t,e){const s=this.themeStore.getters.getThemingById(e);s&&this.themeStore.mutations.deleteThemingInstance.commit(s)}getReplyToPost(){return this.persistedPost.post.parentId?this.persistedPosts.find((t=>t.postId===this.persistedPost.post.parentId)):null}setCurrentUserLiked(t){this.currentUserLiked=t}ensureContentOnSave(t){return this.isRenderRTE||0!==t.indexOf("<p>")&&(t="<p>"+t+"</p>"),t}getContentInsideTag(t){if(!this.isRenderRTE&&!this.enableMention){const e=document.createElement("div");e.innerHTML=t;t=e.textContent||e.innerText||""}return t}onClickReply(){this.openReply(this.persistedPost)}onClickLike(){this.handleTogglingLike(this.persistedPost).then((t=>{this.setCurrentUserLiked(-1!==t.likedBy.findIndex((t=>t.uid===this.currentUser.uid)))})),this.canShowEditDialogOnLoad=!1}onClickRemoveReplyToPost(){const t=this.persistedPosts.find((t=>t.postId===(this.getTopPostIds()[this.persistedPost.postId?.toString()]||this.persistedPost.post.parentId)));this.cancelReply(t)}onClickDelete(){this.handleDeletingPost(this.persistedPost).then((()=>{this.isDeleting=!1,this.deleteDialogModel.visible=!1,this.refresh(!1)})).catch((()=>{this.deleteDialogModel.visible=!1,this.isDeleting=!1}))}onSave(){this.isAddingOrUpdatingPost=!0,this.persistedPost.post.content=this.ensureContentOnSave(this.getContentInsideTag(this.draftContent)),this.persistedPost.post.mentionedUsers=this.draftMentionUsers,this.canShowEditDialogOnLoad=!1,this.refresh(this.isAdd||this.isReply),this.resetContent=!0,this.persistedPost.postId?this.handleUpdatingPost(this.persistedPost).then((t=>{this.isAddingOrUpdatingPost=!1,this.isEdit=!1,this.closeEdit(this.persistedPost),this.draftContent="",this.dialogModel.visible=!1})).catch((()=>this.isAddingOrUpdatingPost=!1)):this.handleAddingPost(this.persistedPost.post).then((t=>{this.isAddingOrUpdatingPost=!1,this.isEdit=!1,this.draftContent="",this.dialogModel.visible=!1})).catch((()=>this.isAddingOrUpdatingPost=!1))}onKeydownShowLikeListing(t){13===t.keyCode&&(this.showLikeListing=!0,this.focusedElement=t.target)}onHideLikeListing(){this.showLikeListing=!1,this.$nextTick((()=>{setTimeout((()=>{this.focusedElement&&this.focusedElement.focus()}),200)}))}onContentUpdate(t){this.draftContent=t,this.resetContent=!1}onMentionUpdate(t){p.Utils.isArray(t)&&(this.draftMentionUsers=t)}onEditPostClicked(){window.outerWidth<=500&&!this.dialogModel.visible&&(this.canShowEditDialogOnLoad=!0,this.dialogModel.visible)}renderUserLink(t,e,s,i,o){return(0,n.h)("omfx-profilecard",{domProps:{userName:e},attrs:{tabindex:0,target:"_blank",contentClass:["pb-1",m.personWrapper(o),m.reactiveThemeTextFgColor(o)],href:t},scopedSlots:{renderChildren:()=>(0,n.h)("span",[s])}})}renderTitleInfo(t,e){const s=this.getReplyToPost();let i="",r="",d="",a="";return this.isAdd||this.isReply&&this.getTopPostIds()[this.persistedPost.postId?.toString()]?.toString()===this.persistedPost.post.parentId?.toString()?null:(s&&(i=this.getUserHash()[s.createdBy.uid.toLowerCase()]?this.getUserHash()[s.createdBy.uid.toLowerCase()].displayName:s.createdBy.uid,r=s.deletedBy?`[${this.postLoc.DeletedMessage+" "+(this.getUserHash()[s.deletedBy.uid.toLowerCase()]?this.getUserHash()[s.deletedBy.uid.toLowerCase()].displayName:s.deletedBy)}]`:i+": "+s.post.content,d=this.getUserHash()[s.createdBy.uid.toLowerCase()]?this.getUserHash()[s.createdBy.uid.toLowerCase()].profileUrl:"",a=this.getUserHash()[s.createdBy.uid.toLowerCase()]?.uid),this.isReply?(0,n.h)("div",[this.renderUserLink(this.currentUser.profileUrl,this.currentUser.uid,this.currentUser.displayName,t,this.theming),(0,n.h)("span",{class:[m.noticeReply,t?this.dialogTheme.chrome.text.csslighter3:this.theming.body.text.csslighter3]},[" ",this.postLoc.ReplyingTo," "]),d?this.renderUserLink(d,a,i,t,this.theming):i,(0,n.h)("omfx-button",{attrs:{dark:e.body.bg.dark,text:"x"},domProps:{mode:c.ButtonModes.flat,onClick:()=>{this.onClickRemoveReplyToPost()},styles:{textColor:t?this.dialogTheme.body.text.color.base:this.theming.body.fg.color.base?this.theming.body.fg.color.base:this.theming.body.bg.dark?this.theming.body.bg.color.lighten5:this.theming.body.bg.color.darken4}}})]):s&&this.getTopPostIds()[this.persistedPost.postId?.toString()]!==this.persistedPost.post.parentId?(0,n.h)("div",{class:m.title(e)},[this.customSlots?.renderTitle?this.customSlots.renderTitle(this.persistedPost,this.childTargetThemeId):this.getUserHash()[this.persistedPost.createdBy.uid.toLowerCase()]?this.renderUserLink(this.getUserHash()[this.persistedPost.createdBy.uid.toLowerCase()].profileUrl,this.getUserHash()[this.persistedPost.createdBy.uid.toLowerCase()].uid,this.getUserHash()[this.persistedPost.createdBy.uid.toLowerCase()].displayName,t,e):this.persistedPost.createdBy,(0,n.h)("v-tooltip",o()([{attrs:{top:!0}},this.transformVSlot({activator:s=>[(0,n.h)("span",{class:[m.noticeReply,t?this.dialogTheme.chrome.text.csslighter3:e.body.text.csslighter3],on:{...s.on}},[" ",this.postLoc.InReplyTo," "])]})]),[(0,n.h)("span",{domProps:{innerHTML:r}})]),d?this.renderUserLink(d,a,i,t,e):i]):(0,n.h)("div",{class:this.theming.body.text.css},[this.customSlots?.renderTitle?this.customSlots.renderTitle(this.persistedPost,this.childTargetThemeId):this.getUserHash()[this.persistedPost.createdBy.uid.toLowerCase()]?this.renderUserLink(this.getUserHash()[this.persistedPost.createdBy.uid.toLowerCase()].profileUrl,this.getUserHash()[this.persistedPost.createdBy.uid.toLowerCase()].uid,this.getUserHash()[this.persistedPost.createdBy.uid.toLowerCase()].displayName,t,e):this.persistedPost.createdBy]))}renderEditDialog(){return(0,n.h)("omfx-dialog",{attrs:{title:this.postLoc.WriteAPost,themeTargetId:c.Constants.ux.themeTargetIds.layoutDialog,position:h.DialogPositions.Center,valueBind:this.dialogModel,dark:this.dialogTheme.body.bg.dark},on:{close:()=>{this.dialogModel.visible=!1,this.canShowEditDialogOnLoad=!1,this.cancelReply&&this.cancelReply(this.persistedPost)}}},[(0,n.h)("div",{class:this.dialogTheme.body.bg.css},[(0,n.h)("div",[(0,n.h)("v-card",{attrs:{elevation:"2"},class:"mx-1"},[this.renderEditContentBody(this.draftContent,!0)])])])])}renderEdit(){return window.outerWidth>500||!this.canShowEditDialogOnLoad?this.renderEditContentBody(this.draftContent,!1):(this.dialogModel.visible=!0,this.renderEditDialog())}renderEditContentBody(t,e){const s=e?this.dialogTheme:this.theming;return(0,n.h)("div",[(0,n.h)("div",{class:m.titleWrapper},[this.renderTitleInfo(e,this.theming)]),(0,n.h)("div",{on:{click:()=>{this.onEditPostClicked()}}},[this.richTextSettings||this.enableMention?!this.isAdd||this.isRTEPlaceholderClicked||e?(0,n.h)("omfx-people-tagging-component",{domProps:{resetContetnRte:this.resetContent,content:t,contentChanged:this.onContentUpdate,mentionChanged:t=>{this.onMentionUpdate(t)},richTextSettings:this.richTextSettings,enableMention:this.enableMention},attrs:{themeTargetId:e?c.Constants.ux.themeTargetIds.layoutDialog:this.childTargetThemeId,autoFocus:this.isRTEPlaceholderClicked}}):(0,n.h)("v-textarea",{attrs:{dark:s.body.bg.dark,outlined:s.body.bg.dark,solo:!s.body.bg.dark,"auto-grow":!0,"hide-details":!0,loading:this.isLoadingRTE},on:{click:()=>{this.isLoadingRTE=!0,omniaApi.fx.ux.richTextEditor.helper.then((t=>{this.isLoadingRTE=!1,this.isRTEPlaceholderClicked=!0}))}}}):(0,n.h)("v-textarea",{attrs:{dark:s.body.bg.dark,outlined:s.body.bg.dark,solo:!s.body.bg.dark,"auto-grow":!0,"hide-details":!0,contentChanged:this.onContentUpdate},model:{value:this.draftContent,callback:t=>{this.draftContent=t}}})]),(0,n.h)("div",{class:m.editContentFooter},[this.customSlots?.renderActionButtons&&this.customSlots.renderActionButtons(this.persistedPost,this.childTargetThemeId),(0,n.h)("omfx-button",{attrs:{loading:this.isAddingOrUpdatingPost,text:this.isAdd||this.isReply?this.postLoc.Post:this.omniaUxLocalization.Common.Buttons.Save},domProps:{mode:c.ButtonModes.flat,styles:{textColor:e?this.dialogTheme.body.text.color.base:this.theming.body.fg.color.base?this.theming.body.fg.color.base:this.theming.body.bg.dark?this.theming.body.bg.color.lighten5:this.theming.body.bg.color.darken4},onClick:()=>{this.onSave()}}}),this.isAdd||this.isReply?null:(0,n.h)("omfx-button",{domProps:{mode:c.ButtonModes.flat,styles:{textColor:e?this.dialogTheme.body.text.color.base:this.theming.body.fg.color.base?this.theming.body.fg.color.base:this.theming.body.bg.dark?this.theming.body.bg.color.lighten5:this.theming.body.bg.color.darken4},onClick:()=>{this.draftContent=this.persistedPost.post.content,this.isEdit=!1,this.closeEdit(this.persistedPost)}},attrs:{text:this.omniaUxLocalization.Common.Buttons.Cancel}})])])}renderEditButton(){return(0,n.h)("v-list-item",{on:{click:()=>{this.draftContent=this.getContentInsideTag(this.persistedPost.post.content),this.isEdit=!0,this.openEdit(this.persistedPost)}}},[(0,n.h)("v-list-item-icon",{style:"margin-right:0px"},[(0,n.h)("v-icon",["edit"])]),(0,n.h)("v-list-item-action",[(0,n.h)("a",[this.omniaUxLocalization.Common.Buttons.Edit])])])}renderDeleteButton(){return(0,n.h)("v-list-item",{on:{click:()=>{this.deleteDialogModel.visible=!0}}},[(0,n.h)("v-list-item-icon",{style:"margin-right:0px"},[(0,n.h)("v-icon",["delete"])]),(0,n.h)("v-list-item-action",[(0,n.h)("a",[this.omniaUxLocalization.Common.Buttons.Delete])])])}renderDeleteDialog(){if(this.deleteDialogModel.visible)return(0,n.h)("omfx-dialog",{attrs:{contentClass:m.dialogWidth,title:this.postLoc.DeletePost,themeTargetId:c.Constants.ux.themeTargetIds.layoutDialog,position:h.DialogPositions.Center,valueBind:this.deleteDialogModel,dark:this.dialogTheme.body.bg.dark},on:{close:()=>{this.deleteDialogModel.visible=!1}}},[(0,n.h)("div",{class:this.dialogTheme.body.bg.css},[(0,n.h)("div",[(0,n.h)("v-card",{attrs:{elevation:"0"},class:"ml-5 mr-4 pb-4"},[(0,n.h)("div",{class:[this.dialogTheme.body.text.css,"mt-4 mb-4"]},[this.postLoc.ConfirmDelete]),(0,n.h)("div",{class:[m.footerWrapper(this.theming),m.reactiveThemeTextFgColor(this.theming),"text-right"]},[(0,n.h)("span",{class:"pr-1"},[(0,n.h)("omfx-button",{attrs:{loading:this.isAddingOrUpdatingPost,text:this.omniaUxLocalization.Common.Buttons.Delete},domProps:{mode:c.ButtonModes.depressed,styles:{textColor:this.dialogTheme.body.text.color.base},onClick:()=>{this.onClickDelete()}}})]),(0,n.h)("omfx-button",{domProps:{mode:c.ButtonModes.flat,styles:{textColor:this.dialogTheme.body.text.color.base},onClick:()=>{this.deleteDialogModel.visible=!1}},attrs:{text:this.omniaUxLocalization.Common.Buttons.Cancel}})])])])])])}renderEditOptionsBase(t,e){const s=this.theming.body.bg.color.base&&this.theming.body.bg.color.base.lastIndexOf("rgba")>-1;return(0,n.h)("v-menu",o()([{attrs:{dark:this.theming.body.bg.dark,"offset-y":!0}},this.transformVSlot({activator:t=>[(0,n.h)("v-btn",{attrs:{text:!0,icon:!0,dark:e.body.bg.dark},on:{...t.on},class:[m.editOptionsMenu]},[(0,n.h)("i",{class:"far fa-ellipsis-v"})])]})]),[(0,n.h)("v-list",{attrs:{dark:this.theming.body.bg.dark,color:s?null:this.theming.body.bg.color.base}},[t])])}renderEditOptions(t){if(this.persistedPost.createdBy.uid.toLowerCase()===this.currentUser.uid.toLowerCase()){let e=[];return e=this.hideEditOption?[this.renderDeleteButton()]:[this.renderEditButton(),this.renderDeleteButton()],this.renderEditOptionsBase(e,t)}return this.persistedPost.postId&&this.topicPermissionDictionary[this.persistedPost.post.context.getTopicId().toString()]&&this.topicPermissionDictionary[this.persistedPost.post.context.getTopicId().toString()].moderator?this.renderEditOptionsBase([this.renderDeleteButton()],t):null}renderDisplay(){return(0,n.h)("div",[(0,n.h)("div",{class:m.postCardDefaultStyling(this.theming)},[(0,n.h)(P,{attrs:{topicPermissionDictionary:this.topicPermissionDictionary,renderTitleInfo:this.renderTitleInfo,renderEditOptions:this.renderEditOptions,getUserHash:this.getUserHash,persistedPost:this.persistedPost,isDeleted:!1,dateFormat:this.dateFormat,language:this.language,themeTargetId:this.childTargetThemeId}})]),this.persistedPost.postId&&this.topicPermissionDictionary[this.persistedPost.post.context.getTopicId().toString()].contributor&&(0,n.h)("div",{class:[m.footerWrapper(this.theming)]},[(0,n.h)("a",{directives:[{name:"show",value:this.canLike}],attrs:{tabindex:0},class:[m.postActionLink(this.theming),m.reactiveThemeTextFgColor(this.theming)],on:{keydown:t=>{13===t.keyCode&&this.onClickLike()},click:()=>{this.onClickLike()}}},[this.currentUserLiked?this.postLoc.Unlike:this.postLoc.Like]),this.canLike&&this.persistedPost.likedBy&&this.persistedPost.likedBy.length>0?(0,n.h)("span",[(0,n.h)("span",{class:["mx-2",this.theming.body.text.css,m.reactiveThemeTextFgColor(this.theming)]},["Â·"]),(0,n.h)("v-avatar",{attrs:{color:this.theming.body.fg.color.base,size:"22",dark:this.theming.body.fg.color.dark},class:["mr-1",m.likeAvatar,m.reactiveThemeTextFgColor(this.theming)],on:{keydown:t=>{this.onKeydownShowLikeListing(t)},click:()=>{this.showLikeListing=!0}}},[(0,n.h)("v-icon",{attrs:{size:"14",dark:this.theming.body.fg.color.dark}},["thumb_up"])]),(0,n.h)("a",{attrs:{tabindex:0},class:[m.postActionLink(this.theming),m.reactiveThemeTextFgColor(this.theming)],on:{keydown:t=>{this.onKeydownShowLikeListing(t)},click:()=>{this.showLikeListing=!0}}},[this.persistedPost.likedBy.length])]):null,(0,n.h)("span",{directives:[{name:"show",value:this.canLike}],class:["mx-2",m.postActionLink(this.theming),m.reactiveThemeTextFgColor(this.theming)]},["|"]),(0,n.h)("a",{attrs:{tabindex:0},class:[m.postActionLink(this.theming),m.reactiveThemeTextFgColor(this.theming)],on:{keydown:t=>{13===t.keyCode&&this.onClickReply()},click:()=>{this.onClickReply()}}},[this.postLoc.Reply]),this.customSlots?.promotePostAction&&this.customSlots.promotePostAction(this.persistedPost,this.childTargetThemeId)])])}renderDeletedMessage(){return(0,n.h)("div",{class:m.postCardDefaultStyling(this.theming)},[(0,n.h)(P,{attrs:{topicPermissionDictionary:this.topicPermissionDictionary,renderTitleInfo:this.renderTitleInfo,renderEditOptions:this.renderEditOptions,getUserHash:this.getUserHash,persistedPost:this.persistedPost,isDeleted:!0,dateFormat:this.dateFormat,language:this.language,themeTargetId:this.childTargetThemeId}})])}render(){return this.cardStyle&&this.themeStore&&(this.ensureCustomThemeRegistered(this.themeStore,this.customCardThemeId,this.cardStyle),this.childTargetThemeId=this.customCardThemeId.toString()),this.richTextSettings.bodyClass=this.richTextSettings.bodyClass||m.resemblePostCard(this.childTargetThemeId?this.themeStore.getters.getThemingById(this.childTargetThemeId):this.theming),(0,n.h)("div",{class:(0,r.classes)(m.wrapper(this.theming))},[this.isDeleting?this.postLoc.Deleting:this.persistedPost.deletedBy?this.renderDeletedMessage():this.isEdit||this.isAdd||this.isReply?this.renderEdit():this.renderDisplay(),this.showLikeListing?(0,n.h)(this.likeListingTemplate,{domProps:{likedBy:this.persistedPost.likedBy,close:this.onHideLikeListing,themeDefinitionId:c.Constants.ux.themeTargetIds.layoutDialog},style:{display:"none"}}):null,this.renderDeleteDialog()])}};v([(0,a.Prop)()],C.prototype,"persistedPost",2),v([(0,a.Prop)()],C.prototype,"persistedPosts",2),v([(0,a.Prop)()],C.prototype,"richTextSettings",2),v([(0,a.Prop)()],C.prototype,"currentUser",2),v([(0,a.Prop)()],C.prototype,"canShowEditDialogOnLoad",2),v([(0,a.Prop)()],C.prototype,"canLike",2),v([(0,a.Prop)()],C.prototype,"enableMention",2),v([(0,a.Prop)()],C.prototype,"openReply",2),v([(0,a.Prop)()],C.prototype,"cancelReply",2),v([(0,a.Prop)()],C.prototype,"openEdit",2),v([(0,a.Prop)()],C.prototype,"closeEdit",2),v([(0,a.Prop)()],C.prototype,"refresh",2),v([(0,a.Prop)()],C.prototype,"cardStyle",2),v([(0,a.Prop)({default:!1})],C.prototype,"hideEdit",2),v([(0,a.Prop)()],C.prototype,"handleAddingPost",2),v([(0,a.Prop)()],C.prototype,"handleUpdatingPost",2),v([(0,a.Prop)()],C.prototype,"handleDeletingPost",2),v([(0,a.Prop)()],C.prototype,"handleTogglingLike",2),v([(0,a.Prop)()],C.prototype,"customSlots",2),v([(0,a.Prop)({default:!1})],C.prototype,"hideEditOption",2),v([(0,a.Prop)()],C.prototype,"getTopPostIds",2),v([(0,a.Prop)()],C.prototype,"getUserHash",2),v([(0,a.Prop)()],C.prototype,"topicPermissionDictionary",2),v([(0,l.Localize)(b.OmniaUxLocalizationNamespace)],C.prototype,"omniaUxLocalization",2),v([(0,l.Localize)(g.PostLocalization.namespace)],C.prototype,"postLoc",2),v([(0,l.Inject)(l.OmniaContext)],C.prototype,"omniaCtx",2),v([(0,l.Inject)(h.ThemeStore)],C.prototype,"themeStore",2),v([(0,a.Watch)("persistedPost",{immediate:!1,deep:!0})],C.prototype,"onPostChange",1),C=v([d.default],C),l.WebComponentBootstrapper.registerElement((t=>{(0,l.vueCustomElement)(t.elementName,C,{destroyTimeout:1e3})}))},"./client/fx/ux/post/loc/localize.js":(t,e,s)=>{t.exports=s("dll-reference md66")("./client/fx/ux/post/loc/localize.js")},"./client/fx/ux/uxmodels.js":(t,e,s)=>{t.exports=s("dll-reference md66")("./client/fx/ux/uxmodels.js")},"./node_modules/@vue/babel-helper-vue-jsx-merge-props/dist/helper.js":(t,e,s)=>{t.exports=s("dll-reference md2")("./node_modules/@vue/babel-helper-vue-jsx-merge-props/dist/helper.js")},"./node_modules/@vue/composition-api/dist/vue-composition-api.mjs":(t,e,s)=>{t.exports=s("dll-reference md2")("./node_modules/@vue/composition-api/dist/vue-composition-api.mjs")},"./node_modules/typestyle/umd/typestyle.js":(t,e,s)=>{t.exports=s("dll-reference md2")("./node_modules/typestyle/umd/typestyle.js")},"./node_modules/vue-class-component/dist/vue-class-component.esm.js":(t,e,s)=>{t.exports=s("dll-reference md2")("./node_modules/vue-class-component/dist/vue-class-component.esm.js")},"./node_modules/vue-property-decorator/lib/vue-property-decorator.js":(t,e,s)=>{t.exports=s("dll-reference md2")("./node_modules/vue-property-decorator/lib/vue-property-decorator.js")},"14a8d443-2e58-450b-a462-258bdaf69b49":(t,e,s)=>{t.exports=s("dll-reference md10")("14a8d443-2e58-450b-a462-258bdaf69b49")},"97786ea9-4861-48bd-8a57-eae9bbdb4892":(t,e,s)=>{t.exports=s("dll-reference md9")("97786ea9-4861-48bd-8a57-eae9bbdb4892")},"d0a145a7-d1ef-4217-aa6f-85dd18c4231d":(t,e,s)=>{t.exports=s("dll-reference md9")("d0a145a7-d1ef-4217-aa6f-85dd18c4231d")},"d7327742-5647-4075-b7ab-4f9ca852addb":(t,e,s)=>{t.exports=s("dll-reference md66")("d7327742-5647-4075-b7ab-4f9ca852addb")},"dll-reference md2":t=>{"use strict";t.exports=omniaVendor},"dll-reference md9":t=>{"use strict";t.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["a2892051-fd9f-4056-ae8d-30d16d48417d"]},"dll-reference md10":t=>{"use strict";t.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["a5a89056-b5f5-475d-8518-a1f55090379d"]},"dll-reference md66":t=>{"use strict";t.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["dee030cc-4ab3-4158-bb06-8049f5c67542"]}};if("undefined"==typeof omniaWebpackJsonp&&(globalThis.omniaWebpackJsonp={}),globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]=globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]||{},globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["87d2f5f7-fa15-440b-a71d-bb642b0dcf38"])throw new Error("Error, already loaded manifest 87d2f5f7-fa15-440b-a71d-bb642b0dcf38 with service id bb000000-0000-bbbb-0000-0000000000bb");globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["87d2f5f7-fa15-440b-a71d-bb642b0dcf38"]=s;var e={};function s(i){var o=e[i];if(void 0!==o)return o.exports;var r=e[i]={exports:{}};return t[i](r,r.exports,s),r.exports}s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};s("./client/fx/ux/post/templates/posttemplate.tsx")})()};