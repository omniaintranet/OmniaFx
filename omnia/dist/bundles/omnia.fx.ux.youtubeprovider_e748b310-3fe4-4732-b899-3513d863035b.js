if("undefined"==typeof omniaLoader&&(globalThis.omniaLoader={}),omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]=omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]||{},omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]["e748b310-3fe4-4732-b899-3513d863035b"])throw new Error("Error, already loaded manifest e748b310-3fe4-4732-b899-3513d863035b with service id bb000000-0000-bbbb-0000-0000000000bb");omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]["e748b310-3fe4-4732-b899-3513d863035b"]=function(){(()=>{var e={"./client/fx/ux/mediapickerproviders/youtube/youtubeprovider.tsx":(e,t,i)=>{"use strict";i.r(t),i.d(t,{YouTubeProviderComponent:()=>x});var o=i("./node_modules/vue-class-component/dist/vue-class-component.esm.js"),r=i("./node_modules/@vue/composition-api/dist/vue-composition-api.mjs"),s=i("14a8d443-2e58-450b-a462-258bdaf69b49").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","e748b310-3fe4-4732-b899-3513d863035b"),a=i("d0a145a7-d1ef-4217-aa6f-85dd18c4231d"),d=i("97786ea9-4861-48bd-8a57-eae9bbdb4892"),n=i("./node_modules/typestyle/umd/typestyle.js");(0,n.style)({backgroundColor:"inherit"});const l=s.ServiceContainer.createInstance(s.OmniaContext),h=((0,n.style)({position:"absolute",top:"0",bottom:"0",left:"0",right:"0",padding:"50px 0"}),(0,n.style)({height:"50px",padding:"20px",marginTop:"-50px",h2:{float:"left"}}),(0,n.style)({padding:"20px 20px 0 20px"}),(0,n.style)({height:"100%",padding:"0 20px",overflowY:"auto"}),(0,n.style)({marginBottom:"-50px",height:"50px",width:"100%",boxShadow:"0 -5px 5px -5px rgba(0, 0, 0, 0.26)"}),(0,n.style)({color:"red"})),b=((0,n.style)({display:"block",paddingRight:"20px",$nest:{".video-ratio":{margin:"5px 11px 20px 10px",$nest:{"&:first-child":{marginTop:"0px"},".video-ratio-title":{display:"flex",flexDirection:"row",justifyContent:"space-between",height:"19px",fontSize:"14px",color:"#212121",opacity:.64,marginBottom:"5px"},".video-ratio-thumbnail":{alignItems:"center",background:"rgba(33, 33, 33, 0.07)",display:"flex",height:"20vw",justifyContent:"center",maxHeight:"205px",maxWidth:"205px",width:"20vw",cursor:"pointer",position:"relative",$nest:{".video-ratio-thumbnail-wide":{display:"block",overflow:"hidden",width:"100%",$nest:{img:{backgroundPosition:"50% 50%",backgroundRepeat:"no-repeat",backgroundSize:"cover",display:"block",width:"100%"}}},".video-ratio-thumbnail-normal":{display:"block",height:"100%",overflow:"hidden",width:"100%",$nest:{img:{backgroundPosition:"50% 50%",backgroundRepeat:"no-repeat",backgroundSize:"cover",display:"block",height:"100%",width:"100%"}}}}}}}}}),(0,n.style)({width:"640px",height:"360px",position:"relative"}),(0,n.style)({width:"100%",maxWidth:"100%",position:"relative"}));(0,n.style)({color:l.theming.primary,position:"absolute",top:"-4px",right:"-4px",display:"none",background:"white",borderRadius:"50%"}),(0,n.style)({display:"block"});var m,u,p;(u=m||(m={})).ResponsiveContainer="position: relative; width: 100%; height: 0; padding-bottom: 56.25%",u.innerIframe="position: absolute;\n                                        top: 0;\n                                        left: 0;",(0,n.cssRaw)("\n    .v-input input {\n        border: inherit!important;\n    }\n\n    .video-option-checkbox {\n        max-width: 100px;\n        display: inline-block!important;\n        margin-top: 10px!important;\n        float: left;\n    }\n\n    @keyframes play {\n        to { background-position:-8160px }\n    }\n\n    .video-iframe-max-width-wrapper {\n        max-width: 100%;\n    }\n\n    .video-iframe-max-width { \n        position: relative; \n        padding-bottom: 56.25%; \n        height: 0; \n        overflow: hidden;\n    }\n    \n    .video-iframe-responsive {\n        position: absolute; \n        top: 0; \n        left: 0; \n        right: 0; \n        bottom: 0; \n        height: 100%; \n        max-width: 100%; \n        width: 100%;\n        border: 0;\n    }\n    \n"),(p||(p={})).namespace="Omnia.Ux.YouTubeProvider";var c=i("d7327742-5647-4075-b7ab-4f9ca852addb").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","e748b310-3fe4-4732-b899-3513d863035b"),v=i("a3e11883-9574-4070-b80e-40faef6801d2"),g=Object.defineProperty,f=Object.getOwnPropertyDescriptor,y=(e,t,i,o)=>{for(var r,s=o>1?void 0:o?f(t,i):t,a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o?r(t,i,s):r(s))||s);return o&&s&&g(t,i,s),s};let x=class extends v.MediaProviderComponentBase{constructor(){super(),this.videoProviderResult=null,this.embedUrl="https://www.youtube.com/embed/",this.isIframeLoading=!1,this.invalidVideoUrl=!1,this.invalidStartTimeInput=!1,this.enableStartTime=!1,this.inVideoUrlInputMode=!0,this.providerSlots={bottom:this.renderProviderButtons}}created(){this.youtubeVideoUrls={"http://www.youtube.com/watch":this.getVideoIdFromNormalUrl,"https://www.youtube.com/watch":this.getVideoIdFromNormalUrl,"http://youtu.be/":this.getVideoIdFromShorterUrl,"https://youtu.be/":this.getVideoIdFromShorterUrl},this.rules={required:"[() => !!value || '"+this.loc.Message.Required+"']"},this.preSelectedMedia&&this.preSelectedMedia.omniaMediaType==a.MediaPickerEnums.OmniaMediaTypes.Video?(this.videoProviderResult=d.Utils.clone(this.preSelectedMedia),this.enableStartTime=!!this.videoProviderResult.startTime,this.generateEmbedVideo()):this.videoProviderResult={omniaMediaType:a.MediaPickerEnums.OmniaMediaTypes.Video,html:null,videoUrl:null,mute:!1,autoPlay:!1},this.videoProviderResult={...this.videoProviderResult},this.omniaUrl=d.ServiceLocator.getUrl(a.OmniaService.Id,!0)}mounted(){s.WebComponentBootstrapper.registerElementInstance(this,this.$el)}generateEmbedVideo(){if(this.validateVideoUrl(this.videoProviderResult.videoUrl),!this.invalidVideoUrl){const e=Object.keys(this.youtubeVideoUrls).find((e=>this.videoProviderResult.videoUrl.startsWith(e))),t=this.youtubeVideoUrls[e](this.videoProviderResult.videoUrl);this.embedVideoUrl=this.embedUrl+t+"?rel=0",this.videoProviderResult.thumbnailUrl="https://img.youtube.com/vi/"+t+"/maxresdefault.jpg",this.processResponsiveIframe(),this.inVideoUrlInputMode=!1}}getVideoIdFromNormalUrl(e){return this.getParameterByName(e,"v")}getVideoIdFromShorterUrl(e){let t="";const i=new RegExp(/http(s)?:\/\/youtu.be\/(.+)/,"g").exec(e);return i&&i.length>0&&(t=i[i.length-1]),t}onStartTimeChanged(e){if(e&&this.validateStartTimeInput(e)){this.invalidStartTimeInput=!1;const t=this.getStartTimeAsSeconds(e);this.embedVideoUrl=this.updateQueryStringParameter(this.embedVideoUrl,"start",t>0?t.toString():null),this.processResponsiveIframe()}else e&&!this.validateStartTimeInput(e)&&(this.invalidStartTimeInput=!0)}onEnableStartTimeChanged(e){if(this.enableStartTime=e,this.enableStartTime){this.$refs.startTime.focus(),this.videoProviderResult.startTime=this.videoProviderResult.startTime??"0:00";const e=this.getStartTimeAsSeconds(this.videoProviderResult.startTime);this.embedVideoUrl=this.updateQueryStringParameter(this.embedVideoUrl,"start",e>0?e.toString():null),this.processResponsiveIframe()}else this.videoProviderResult.startTime=null,this.processResponsiveIframe();this.invalidStartTimeInput=!1}onAutoPlayChanged(e){this.videoProviderResult.autoPlay=!0===e,this.embedVideoUrl=null==e?this.replaceAttributeFromString(this.embedVideoUrl,"autoplay"):this.updateQueryStringParameter(this.embedVideoUrl,"autoplay",1),this.processResponsiveIframe()}onMuteChanged(e){this.videoProviderResult.mute=!0===e,this.embedVideoUrl=null==e?this.replaceAttributeFromString(this.embedVideoUrl,"mute"):this.updateQueryStringParameter(this.embedVideoUrl,"mute",1),this.processResponsiveIframe()}updateQueryStringParameter(e,t,i){const o=new RegExp("[\\?&]"+t+"=([^&#'\"]*)"),r=o.exec(e);let s,a;if(null===r){if(s=/\?/.test(e)?"&":"?",e.endsWith('"')||e.endsWith("'")){const o=e.substr(e.length-1);a=e.slice(0,-1)+s+t+"="+i+o}else a=e+s+t+"="+i}else s=r[0].charAt(0),a=e.replace(o,s+t+"="+i);return a}replaceAttributeFromString(e,t,i){if(!e)return e;const o=new RegExp(t+"=([^&#]*)");return e=e.replace(o,(function(e){return null==i?"":i,""}))}validateVideoUrl(e){this.validateMessage="",this.invalidVideoUrl=!1,d.Utils.isNullOrEmpty(e)?(this.invalidVideoUrl=!0,this.validateMessage=this.loc.Message.Required):Object.keys(this.youtubeVideoUrls).some((t=>e.startsWith(t)))||(this.invalidVideoUrl=!0,this.validateMessage=this.loc.Message.InvalidVideoUrl)}validateStartTimeInput(e){if(null!=e&&void 0!==e){const e=new RegExp(/^(?:(?:([01]?\d|2[0-3]):)?([0-5]?\d):)?([0-5]?\d)$/,"g").exec(this.videoProviderResult.startTime);return null!=e}return!1}getParameterByName(e,t){t=t.replace(/[\[\]]/g,"\\$&");const i=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}getStartTimeAsSeconds(e){let t=0;if(null!=e&&void 0!==e){const e=new RegExp(/^(?:(?:([01]?\d|2[0-3]):)?([0-5]?\d):)?([0-5]?\d)$/,"g").exec(this.videoProviderResult.startTime);null!=e&&(void 0!==e[3]&&(t+=+e[3]),void 0!==e[2]&&(t+=60*+e[2]),void 0!==e[1]&&(t+=60*+e[1]*60))}return t}processResponsiveIframe(){if(this.videoProviderResult.mute?this.embedVideoUrl=this.updateQueryStringParameter(this.embedVideoUrl,"mute",1):this.embedVideoUrl=this.replaceAttributeFromString(this.embedVideoUrl,"mute"),this.videoProviderResult.autoPlay?this.embedVideoUrl=this.updateQueryStringParameter(this.embedVideoUrl,"autoplay",1):this.embedVideoUrl=this.replaceAttributeFromString(this.embedVideoUrl,"autoplay"),this.enableStartTime){const e=this.getStartTimeAsSeconds(this.videoProviderResult.startTime);this.embedVideoUrl=this.updateQueryStringParameter(this.embedVideoUrl,"start",e.toString())}else this.embedVideoUrl=this.replaceAttributeFromString(this.embedVideoUrl,"start");this.iframeElement=this.renderResponsiveVideoIframe(this.embedVideoUrl)}saveYoutubeResult(){(this.iframeElement||this.iframeElement.elm)&&(this.videoProviderResult.html=this.iframeElement.elm.outerHTML,this.save(this.videoProviderResult))}renderVideoIframe(e,t,i,o){this.isIframeLoading=!0;const s={allowFullscreen:!0,frameBorder:0,ref:"ytplayerIframe",allow:"autoplay"};return s.width=t>0?t:"100%",s.height=i>0?i:"100%",(e||""!==e)&&(s.src=e),(0,r.h)("iframe",{attrs:s,on:{load:()=>{this.isIframeLoading=!1}},style:t<=0&&i<=0?m.innerIframe:{},class:[o]})}renderResponsiveVideoIframe(e){this.isIframeLoading=!0,this.iframeElement=this.renderVideoIframe(e,0,0);const t={};return t.style=m.ResponsiveContainer,t.omfxmpc="video",(0,r.h)("div",{domProps:t},[this.iframeElement])}renderYoutubeUrlInput(){const e=this.omniaTheming.promoted.body.dark;return(0,r.h)("div",{class:"select-video"},[(0,r.h)("label",[this.loc.Labels.ChooseVideo]),(0,r.h)("v-text-field",{attrs:{dark:e,filled:!0,name:"videoUrl",label:this.loc.Labels.VideoUrl,hint:this.loc.Message.UrlVideoHint,"single-line":!0},ref:"videoUrl",on:{blur:this.generateEmbedVideo,change:e=>{this.videoProviderResult.videoUrl=e}},model:{value:this.videoProviderResult.videoUrl,callback:e=>{this.$set(this.videoProviderResult,"videoUrl",e)}}}),(0,r.h)("label",{class:h,directives:[{name:"show",value:this.invalidVideoUrl}]},[this.validateMessage])])}renderSelectedVideoSettings(){const e=this.omniaTheming.promoted.body.dark;return(0,r.h)("div",{class:(t=this.omniaUrl,(0,n.style)({display:"flex",flexDirection:"row",height:"100%",width:"100%",$nest:{".video-iframe":{width:"70%",overflow:"hidden",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(33, 33, 33, 0.07) !important",display:"flex",$nest:{".video-iframe-loading":{width:"170px",height:"75px",animation:"play 1.5s steps(48) infinite",fontSize:"0",position:"absolute",top:"0",bottom:"0",left:"0",right:"0",margin:"auto",backgroundImage:t&&`url('${t}/images/stream-loading.png')`}}},".video-options":{width:"30%",$nest:{".full-width":{width:"100%"}}}}}))},[(0,r.h)("v-card",{class:"video-iframe"},[(0,r.h)("div",{ref:"iframeWrapperDiv",class:b},[(0,r.h)("div",{class:"video-iframe-loading",directives:[{name:"show",value:this.isIframeLoading}]},[(0,r.h)("span")]),(0,r.h)("div",{directives:[{name:"show",value:!this.isIframeLoading}]},[this.iframeElement])])]),(0,r.h)("v-card",{class:"video-options ml-4"},[(0,r.h)("v-container",[(0,r.h)("v-layout",[(0,r.h)("v-checkbox",{class:"full-width",attrs:{"input-value":this.enableStartTime,label:this.loc.Labels.StartAt,color:this.omniaTheming.promoted.body.primary.base,dark:e,"hide-details":!0},on:{change:this.onEnableStartTimeChanged},model:{value:this.enableStartTime,callback:e=>{this.enableStartTime=e}}}),(0,r.h)("v-text-field",{class:"full-width",attrs:{placeholder:"0:00",dark:e,"single-line":!0,name:"startTime",disabled:!this.enableStartTime,"hide-details":!0},ref:"startTime",on:{change:this.onStartTimeChanged},model:{value:this.videoProviderResult.startTime,callback:e=>{this.$set(this.videoProviderResult,"startTime",e)}}})]),(0,r.h)("v-row",{attrs:{"no-gutters":!0}},[(0,r.h)("label",{class:h,directives:[{name:"show",value:this.invalidStartTimeInput}]},[this.loc.Message.InvalidInputStartTime])]),(0,r.h)("v-row",{attrs:{"no-gutters":!0}},[(0,r.h)("v-switch",{attrs:{"input-value":this.videoProviderResult.autoPlay,color:this.omniaTheming.promoted.body.primary.base,dark:e,label:this.loc.Labels.AutoPlay},on:{change:e=>this.onAutoPlayChanged(e)}})]),(0,r.h)("v-row",{attrs:{"no-gutters":!0}},[(0,r.h)("v-switch",{attrs:{"input-value":this.videoProviderResult.mute,color:this.omniaTheming.promoted.body.primary.base,dark:e,label:this.loc.Labels.Mute},on:{change:e=>this.onMuteChanged(e)}})])])])]);var t}renderProviderButtons(){const e=[];return this.inVideoUrlInputMode?(e.push((0,r.h)("v-spacer")),this.videoProviderResult.videoUrl&&!this.invalidVideoUrl&&e.push((0,r.h)("omfx-button",{attrs:{dark:this.theming.body.bg.dark,text:this.uxLoc.Common.Buttons.Next},domProps:{onClick:()=>{this.generateEmbedVideo()},mode:a.ButtonModes.flat,icon:{iconType:new a.FontAwesomeIcon("arrow_forward"),position:a.ButtonIconPosition.Left}}}))):(e.push((0,r.h)("omfx-button",{attrs:{dark:this.theming.body.bg.dark,text:this.uxLoc.Common.Buttons.Back},domProps:{onClick:()=>{this.inVideoUrlInputMode=!0},mode:a.ButtonModes.flat,icon:{iconType:new a.FontAwesomeIcon("arrow_back"),position:a.ButtonIconPosition.Left}}})),e.push((0,r.h)("v-spacer")),e.push((0,r.h)("omfx-button",{attrs:{dark:!0,text:this.uxLoc.Common.Buttons.Ok},domProps:{styles:{textColor:this.theming.chrome.components.text.color.base,bgColor:this.theming.chrome.components.color.base},onClick:()=>{this.saveYoutubeResult()},mode:a.ButtonModes.raised}}))),e.push((0,r.h)("omfx-button",{attrs:{dark:this.theming.body.bg.dark,text:this.uxLoc.Common.Buttons.Close},domProps:{onClick:()=>{this.closed?.()},mode:a.ButtonModes.flat}})),e}render(){return this.renderBase((()=>{let e=null;return e=this.inVideoUrlInputMode?this.renderYoutubeUrlInput():this.renderSelectedVideoSettings(),e}))}};y([(0,s.Localize)(p.namespace)],x.prototype,"loc",2),y([(0,s.Inject)(c.OmniaTheming)],x.prototype,"omniaTheming",2),x=y([o.default],x),s.WebComponentBootstrapper.registerElement((e=>{(0,s.vueCustomElement)(e.elementName,x)}))},"./node_modules/@vue/composition-api/dist/vue-composition-api.mjs":(e,t,i)=>{e.exports=i("dll-reference md2")("./node_modules/@vue/composition-api/dist/vue-composition-api.mjs")},"./node_modules/typestyle/umd/typestyle.js":(e,t,i)=>{e.exports=i("dll-reference md2")("./node_modules/typestyle/umd/typestyle.js")},"./node_modules/vue-class-component/dist/vue-class-component.esm.js":(e,t,i)=>{e.exports=i("dll-reference md2")("./node_modules/vue-class-component/dist/vue-class-component.esm.js")},"14a8d443-2e58-450b-a462-258bdaf69b49":(e,t,i)=>{e.exports=i("dll-reference md10")("14a8d443-2e58-450b-a462-258bdaf69b49")},"97786ea9-4861-48bd-8a57-eae9bbdb4892":(e,t,i)=>{e.exports=i("dll-reference md9")("97786ea9-4861-48bd-8a57-eae9bbdb4892")},"a3e11883-9574-4070-b80e-40faef6801d2":(e,t,i)=>{e.exports=i("dll-reference md66")("a3e11883-9574-4070-b80e-40faef6801d2")},"d0a145a7-d1ef-4217-aa6f-85dd18c4231d":(e,t,i)=>{e.exports=i("dll-reference md9")("d0a145a7-d1ef-4217-aa6f-85dd18c4231d")},"d7327742-5647-4075-b7ab-4f9ca852addb":(e,t,i)=>{e.exports=i("dll-reference md66")("d7327742-5647-4075-b7ab-4f9ca852addb")},"dll-reference md2":e=>{"use strict";e.exports=omniaVendor},"dll-reference md9":e=>{"use strict";e.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["a2892051-fd9f-4056-ae8d-30d16d48417d"]},"dll-reference md10":e=>{"use strict";e.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["a5a89056-b5f5-475d-8518-a1f55090379d"]},"dll-reference md66":e=>{"use strict";e.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["dee030cc-4ab3-4158-bb06-8049f5c67542"]}};if("undefined"==typeof omniaWebpackJsonp&&(globalThis.omniaWebpackJsonp={}),globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]=globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]||{},globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["e748b310-3fe4-4732-b899-3513d863035b"])throw new Error("Error, already loaded manifest e748b310-3fe4-4732-b899-3513d863035b with service id bb000000-0000-bbbb-0000-0000000000bb");globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["e748b310-3fe4-4732-b899-3513d863035b"]=i;var t={};function i(o){var r=t[o];if(void 0!==r)return r.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,i),s.exports}i.d=(e,t)=>{for(var o in t)i.o(t,o)&&!i.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};i("./client/fx/ux/mediapickerproviders/youtube/youtubeprovider.tsx")})()};