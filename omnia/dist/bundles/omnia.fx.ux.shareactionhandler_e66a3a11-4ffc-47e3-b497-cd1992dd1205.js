if("undefined"==typeof omniaLoader&&(globalThis.omniaLoader={}),omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]=omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]||{},omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]["e66a3a11-4ffc-47e3-b497-cd1992dd1205"])throw new Error("Error, already loaded manifest e66a3a11-4ffc-47e3-b497-cd1992dd1205 with service id bb000000-0000-bbbb-0000-0000000000bb");omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]["e66a3a11-4ffc-47e3-b497-cd1992dd1205"]=function(){(()=>{var e={"./client/fx/ux/social/likehandler/likeactionclickhandler.js":(e,t,d)=>{"use strict";d.r(t);var b=d("d7327742-5647-4075-b7ab-4f9ca852addb").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","e66a3a11-4ffc-47e3-b497-cd1992dd1205"),i=d("14a8d443-2e58-450b-a462-258bdaf69b49").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","e66a3a11-4ffc-47e3-b497-cd1992dd1205"),a=d("d0a145a7-d1ef-4217-aa6f-85dd18c4231d"),n=d("e25b9dd8-6dd7-4437-8ddd-0b9fadba73ac"),r=d("5e618f4d-d014-414e-a681-89e34cbeda0f"),o=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=(e,t,d,b)=>{for(var i,a=b>1?void 0:b?s(t,d):t,n=e.length-1;n>=0;n--)(i=e[n])&&(a=(b?i(t,d,a):i(a))||a);return b&&a&&o(t,d,a),a};const l=class{static HideButton(e){return new Promise(((t,d)=>{l.getProvider(e).then((e=>{t(!!e&&e.hideButton)}))}))}static IsLiking(e){return new Promise(((t,d)=>{l.getProvider(e).then((e=>{e?l.userService.getCurrentUser().then((d=>{const b=d;l.commentLikeStore.actions.loadData.dispatch(e.commentLikeService,e.getTopicId()).then((()=>{const d=l.commentLikeStore.getters.likes(e.getTopicId(),"");d&&0!==d.length||t(!1),d.find((e=>e.createdBy===b.uid))?t(!0):t(!1)}))})):t(!1)}))}))}static ToggleLike(e,t){return new Promise(((d,b)=>{l.getProvider(t).then((t=>{t?l.userService.getCurrentUser().then((b=>{const i=b;l.commentLikeStore.actions.toggleLike.dispatch(t.commentLikeService,t.getTopicId(),null,!e,i).then((()=>{d(!0)}))})):d(!1)}))}))}static getProvider(e){return new Promise(((t,d)=>{i.Extend.fx.ux.likeHandler.registration.then((d=>{const b=d.getAllLikeProviders().find((t=>t.id.toString()===e.topicIdProvider.toString()));t(b||null)}))}))}};let f=l;c([(0,i.Inject)(n.UserService)],f,"userService",2),c([(0,i.Inject)(r.CommentLikeStore)],f,"commentLikeStore",2);var p=Object.defineProperty,m=Object.getOwnPropertyDescriptor;let g=class extends b.ActionHandlerBase{onActivated(){if(this.settings){const e=this.settings;f.HideButton(e).then((t=>{t?this.hidden=!0:f.IsLiking(e).then((t=>{t&&(this.displayText=e.unlikeText),this.hidden=!1}))}))}}onTriggered(e){if(this.settings){const e=this.settings,t=this.displayText===e.unlikeText;f.ToggleLike(t,e).then((()=>{t?this.displayText=this.text:(this.displayText=e.unlikeText,this.displayText=e.unlikeText)}))}}onDisposing(){}};g.typeId=a.Constants.ux.actionHandlers.like,g=((e,t,d,b)=>{for(var i,a=b>1?void 0:b?m(t,d):t,n=e.length-1;n>=0;n--)(i=e[n])&&(a=(b?i(t,d,a):i(a))||a);return b&&a&&p(t,d,a),a})([(0,i.Injectable)({lifetime:a.InstanceLifetimes.Transient})],g),(0,i.extendApi)((e=>e.fx.ux.actions.handlers),(e=>e.register(new b.ActionHandlerRegistration(g.typeId,g)))),(0,i.extendApi)((e=>e.fx.ux.actions.registrations),(e=>{e.registerActionHandler([{id:a.Constants.ux.actionHandlers.like,title:"$Localize:Omnia.Ux.LikeHandler.Like;",settingsElementName:"omfx-likeaction-settings"}])}))},"14a8d443-2e58-450b-a462-258bdaf69b49":(e,t,d)=>{e.exports=d("dll-reference md10")("14a8d443-2e58-450b-a462-258bdaf69b49")},"5e618f4d-d014-414e-a681-89e34cbeda0f":(e,t,d)=>{e.exports=d("dll-reference md10")("5e618f4d-d014-414e-a681-89e34cbeda0f")},"d0a145a7-d1ef-4217-aa6f-85dd18c4231d":(e,t,d)=>{e.exports=d("dll-reference md9")("d0a145a7-d1ef-4217-aa6f-85dd18c4231d")},"d7327742-5647-4075-b7ab-4f9ca852addb":(e,t,d)=>{e.exports=d("dll-reference md66")("d7327742-5647-4075-b7ab-4f9ca852addb")},"e25b9dd8-6dd7-4437-8ddd-0b9fadba73ac":(e,t,d)=>{e.exports=d("dll-reference md10")("e25b9dd8-6dd7-4437-8ddd-0b9fadba73ac")},"dll-reference md9":e=>{"use strict";e.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["a2892051-fd9f-4056-ae8d-30d16d48417d"]},"dll-reference md10":e=>{"use strict";e.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["a5a89056-b5f5-475d-8518-a1f55090379d"]},"dll-reference md66":e=>{"use strict";e.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["dee030cc-4ab3-4158-bb06-8049f5c67542"]}};if("undefined"==typeof omniaWebpackJsonp&&(globalThis.omniaWebpackJsonp={}),globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]=globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]||{},globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["e66a3a11-4ffc-47e3-b497-cd1992dd1205"])throw new Error("Error, already loaded manifest e66a3a11-4ffc-47e3-b497-cd1992dd1205 with service id bb000000-0000-bbbb-0000-0000000000bb");globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["e66a3a11-4ffc-47e3-b497-cd1992dd1205"]=d;var t={};function d(b){var i=t[b];if(void 0!==i)return i.exports;var a=t[b]={exports:{}};return e[b](a,a.exports,d),a.exports}d.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};d("./client/fx/ux/social/likehandler/likeactionclickhandler.js")})()};