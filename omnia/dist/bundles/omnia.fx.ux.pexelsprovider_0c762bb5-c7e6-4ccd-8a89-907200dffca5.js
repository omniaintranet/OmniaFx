if("undefined"==typeof omniaLoader&&(globalThis.omniaLoader={}),omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]=omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]||{},omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]["0c762bb5-c7e6-4ccd-8a89-907200dffca5"])throw new Error("Error, already loaded manifest 0c762bb5-c7e6-4ccd-8a89-907200dffca5 with service id bb000000-0000-bbbb-0000-0000000000bb");omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]["0c762bb5-c7e6-4ccd-8a89-907200dffca5"]=function(){(()=>{var e={"./client/fx/ux/mediapickerproviders/pexelsprovider/pexelprovider.tsx":(e,t,r)=>{"use strict";r.r(t),r.d(t,{PexelProviderComponent:()=>P});var a,o=r("./node_modules/@vue/composition-api/dist/vue-composition-api.mjs"),i=r("./node_modules/vue-class-component/dist/vue-class-component.esm.js"),s=r("14a8d443-2e58-450b-a462-258bdaf69b49").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","0c762bb5-c7e6-4ccd-8a89-907200dffca5"),n=r("d7327742-5647-4075-b7ab-4f9ca852addb").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","0c762bb5-c7e6-4ccd-8a89-907200dffca5");(a||(a={})).namespace="Omnia.Ux.PexelProvider";var d=r("./node_modules/typestyle/umd/typestyle.js");const b={wrapper:(0,d.style)({textAlign:"right",width:"100%"}),text:(0,d.style)({color:"#E0E0E0!important",textDecoration:"none",position:"relative",top:"3px"}),notify:(0,d.style)({fontSize:"20px"})};var c=r("d0a145a7-d1ef-4217-aa6f-85dd18c4231d"),l=Object.defineProperty,p=Object.getOwnPropertyDescriptor,m=(e,t,r,a)=>{for(var o,i=a>1?void 0:a?p(t,r):t,s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a?o(t,r,i):o(i))||i);return a&&i&&l(t,r,i),i};let f=class{constructor(){this.search=(e,t=0,r=50)=>new Promise(((t,a)=>{const o={query:e,per_page:r,page:"1"};this.commonHttpClient.get("https://api.pexels.com/v1/search",{headers:{Authorization:"563492ad6f91700001000001c3d96f86c3f242a6811c0d62196835ad"},params:o}).then((e=>{const r=e.data;if(r&&r.photos){const e=this.getImages(r.photos);t(e)}else t([])}))}))}getImages(e){return e.map((e=>{let t=e.src.original.split("/").pop();try{t=e.url.substr(0,e.url.lastIndexOf("-")).split("/").pop()+"."+s.Utils.getFileType(e.src.original)}catch(e){}return{serverImage:e,fileName:t,imageUrl:e.src.large2x,mediaType:c.MediaPickerEnums.OmniaMediaTypes.Image,thumbnailUrl:e.src.medium}}))}};m([(0,s.Inject)(s.HttpClient,{configPromise:s.HttpClient.createOmniaServiceRequestConfig()})],f.prototype,"httpClient",2),m([(0,s.Inject)(s.HttpClient)],f.prototype,"commonHttpClient",2),f=m([(0,s.Injectable)({lifetime:c.InstanceLifetimes.Transient})],f);var h=r("97786ea9-4861-48bd-8a57-eae9bbdb4892"),u=r("./client/fx/ux/omniatheming.js"),g=r("1682f669-2a99-45e6-aa8b-7ed3d4e538d5"),v=Object.defineProperty,y=Object.getOwnPropertyDescriptor,x=(e,t,r,a)=>{for(var o,i=a>1?void 0:a?y(t,r):t,s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a?o(t,r,i):o(i))||i);return a&&i&&v(t,r,i),i};let P=class extends g.GridViewMediaProviderComponent{constructor(){super(),this.pexelProviderStyles=n.StyleFlow.use(n.MediaPickerProviderStyles),this.searchKeyword=null,this.hasSearchResult=!1,this.pexelImageService=h.ServiceContainer.createInstance(f),this.omniaTheming=h.ServiceContainer.createInstance(u.OmniaTheming),this.gridViewSlots={mediaSelectionTop:this.renderPexelLink,mediaGridItemHover:this.renderImageDetail}}beforeSaved(e){return new Promise((t=>{t(e)}))}getMediaItems(e){return this.searchKeyword=e,this.enableLoadMoreButton=!1,new Promise(((e,t)=>{this.searchKeyword?this.pexelImageService.search(this.searchKeyword,0,300).then((t=>{this.hasSearchResult=t&&t.length>0,this.enableLoadMoreButton=this.hasSearchResult,e(t)})).catch(t):e([])}))}getMoreMediaItems(e){return new Promise(((e,t)=>{e(null)}))}getMediaInfo(e){return new Promise(((t,r)=>{if(e.mediaType==c.MediaPickerEnums.OmniaMediaTypes.Image)this.toggleLoadingUI(!0,c.MediaPickerEnums.LoadingStyle.overlay),this.webImageService.download(e.imageUrl).then((r=>{const a=e.serverImage.src.original.lastIndexOf("."),o=(e.serverImage.src.original.substring(a).replace(".",""),{mediaType:c.MediaPickerEnums.OmniaMediaTypes.Image,sizeInBytes:r.length*(3/4),base64:r,sourceUrl:e.imageUrl,fileName:e.fileName,altText:""});t(o)})).catch((()=>{this.toggleLoadingUI(!1),r()}));else{const r={mediaType:c.MediaPickerEnums.OmniaMediaTypes.Video,videoUrl:e.videoUrl,thumbnailUrl:e.thumbnailUrl};t(r)}}))}created(){}mounted(){s.WebComponentBootstrapper.registerElementInstance(this,this.$el)}renderPexelLink(){return(0,o.h)("div",{class:[b.wrapper,"subheading py-1"],directives:[{name:"show",value:this.hasSearchResult}]},[this.pexelLoc.PhotosProviderBy," ",(0,o.h)("a",{attrs:{href:"http://www.pexels.com",target:"_blank"}},["Pexels"])])}renderImageDetail(e){return(0,o.h)("div",{class:"subtitle-1 font-weight-light px-5 py-1"},[(0,o.h)("v-icon",{attrs:{dark:!0,color:"#E0E0E0"},class:"mr-3"},["fal fa-camera"]),(0,o.h)("a",{attrs:{href:e.imageUrl,target:"_blank"},class:b.text},[this.pexelLoc.PhotoBy+" "+e.serverImage.photographer])])}render(){return this.renderGridViewProvider()}};x([(0,h.Inject)(f)],P.prototype,"pexelImageService",2),x([(0,h.Inject)(u.OmniaTheming)],P.prototype,"omniaTheming",2),x([(0,s.Localize)(a.namespace)],P.prototype,"pexelLoc",2),P=x([i.default],P),s.WebComponentBootstrapper.registerElement((e=>{(0,s.vueCustomElement)(e.elementName,P)}))},"./client/fx/ux/omniatheming.js":(e,t,r)=>{e.exports=r("dll-reference md66")("./client/fx/ux/omniatheming.js")},"./node_modules/@vue/composition-api/dist/vue-composition-api.mjs":(e,t,r)=>{e.exports=r("dll-reference md2")("./node_modules/@vue/composition-api/dist/vue-composition-api.mjs")},"./node_modules/typestyle/umd/typestyle.js":(e,t,r)=>{e.exports=r("dll-reference md2")("./node_modules/typestyle/umd/typestyle.js")},"./node_modules/vue-class-component/dist/vue-class-component.esm.js":(e,t,r)=>{e.exports=r("dll-reference md2")("./node_modules/vue-class-component/dist/vue-class-component.esm.js")},"14a8d443-2e58-450b-a462-258bdaf69b49":(e,t,r)=>{e.exports=r("dll-reference md10")("14a8d443-2e58-450b-a462-258bdaf69b49")},"1682f669-2a99-45e6-aa8b-7ed3d4e538d5":(e,t,r)=>{e.exports=r("dll-reference md66")("1682f669-2a99-45e6-aa8b-7ed3d4e538d5")},"97786ea9-4861-48bd-8a57-eae9bbdb4892":(e,t,r)=>{e.exports=r("dll-reference md9")("97786ea9-4861-48bd-8a57-eae9bbdb4892")},"d0a145a7-d1ef-4217-aa6f-85dd18c4231d":(e,t,r)=>{e.exports=r("dll-reference md9")("d0a145a7-d1ef-4217-aa6f-85dd18c4231d")},"d7327742-5647-4075-b7ab-4f9ca852addb":(e,t,r)=>{e.exports=r("dll-reference md66")("d7327742-5647-4075-b7ab-4f9ca852addb")},"dll-reference md2":e=>{"use strict";e.exports=omniaVendor},"dll-reference md9":e=>{"use strict";e.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["a2892051-fd9f-4056-ae8d-30d16d48417d"]},"dll-reference md10":e=>{"use strict";e.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["a5a89056-b5f5-475d-8518-a1f55090379d"]},"dll-reference md66":e=>{"use strict";e.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["dee030cc-4ab3-4158-bb06-8049f5c67542"]}};if("undefined"==typeof omniaWebpackJsonp&&(globalThis.omniaWebpackJsonp={}),globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]=globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]||{},globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["0c762bb5-c7e6-4ccd-8a89-907200dffca5"])throw new Error("Error, already loaded manifest 0c762bb5-c7e6-4ccd-8a89-907200dffca5 with service id bb000000-0000-bbbb-0000-0000000000bb");globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["0c762bb5-c7e6-4ccd-8a89-907200dffca5"]=r;var t={};function r(a){var o=t[a];if(void 0!==o)return o.exports;var i=t[a]={exports:{}};return e[a](i,i.exports,r),i.exports}r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};r("./client/fx/ux/mediapickerproviders/pexelsprovider/pexelprovider.tsx")})()};