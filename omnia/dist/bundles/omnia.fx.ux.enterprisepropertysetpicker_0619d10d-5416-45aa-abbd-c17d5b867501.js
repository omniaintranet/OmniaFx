if("undefined"==typeof omniaLoader&&(globalThis.omniaLoader={}),omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]=omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]||{},omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]["0619d10d-5416-45aa-abbd-c17d5b867501"])throw new Error("Error, already loaded manifest 0619d10d-5416-45aa-abbd-c17d5b867501 with service id bb000000-0000-bbbb-0000-0000000000bb");omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]["0619d10d-5416-45aa-abbd-c17d5b867501"]=function(){(()=>{var e={"./client/fx/ux/enterprisepropertysets/picker/enterprisepropertysetpicker.tsx":(e,t,i)=>{"use strict";i.r(t),i.d(t,{EnterprisePropertySetPicker:()=>I});var s=i("./node_modules/@vue/babel-helper-vue-jsx-merge-props/dist/helper.js"),o=i.n(s),r=i("./node_modules/@vue/composition-api/dist/vue-composition-api.mjs"),l=i("./node_modules/vue-class-component/dist/vue-class-component.esm.js"),n=i("./node_modules/vue-property-decorator/lib/vue-property-decorator.js"),d=i("14a8d443-2e58-450b-a462-258bdaf69b49").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","0619d10d-5416-45aa-abbd-c17d5b867501"),a=i("d0a145a7-d1ef-4217-aa6f-85dd18c4231d"),p=i("d7327742-5647-4075-b7ab-4f9ca852addb").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","0619d10d-5416-45aa-abbd-c17d5b867501"),c=i("./client/fx/ux/styleflow.js"),u=i("./client/fx/ux/models/index.js"),h=i("./node_modules/csx/lib.es2015/index.js");p.StyleFlow.define(u.EnterprisePropertySetPickerStyles,{expansionGroupHeader:{fontSize:(0,h.important)("1rem"),fontWeight:"bold",padding:(0,h.important)("0 16px")},selectionItemsWrapper:{maxHeight:"300px",backgroundColor:"#fff"}});var m=i("5e618f4d-d014-414e-a681-89e34cbeda0f"),b=i("./client/fx/ux/uxmodels.js"),S=Object.defineProperty,g=Object.getOwnPropertyDescriptor,y=(e,t,i,s)=>{for(var o,r=s>1?void 0:s?g(t,i):t,l=e.length-1;l>=0;l--)(o=e[l])&&(r=(s?o(t,i,r):o(r))||r);return s&&r&&S(t,i,r),r};let I=class extends p.VueComponentBase{constructor(){super(...arguments),this.pickerStyles=c.StyleFlow.use(u.EnterprisePropertySetPickerStyles),this.internalSelectedIds=[],this.sourcePropertySetGroupListing=[],this.textboxValue="",this.nonCategoryModeSelectedValue=null,this.uiSelectionItems=[],this.uiMultipleExpandedGroups=[],this.uiAccordionExpandedGroup=null,this.uiSelectedSetInGroupIndexs={},this.multipleExpansionPanel=!1,this.uiMultipleSelectedItems=[],this.uiSingleSelectedSetTitle="",this.isValid=!0,this.isValidateTrigged=!1,this.isLoading=!1,this.needToReinitSelectionUI=!1,this.filteringTimewatchKey="EnterprisePropertySetPickerFilter_"+a.Guid.newGuid(),this.filteringTimewatch=null,this.inFilteringMode=!1,this.inCategoryMode=!0}preSelectedEnterpriseProperyIdChanged(e){if(e||0!=this.internalSelectedIds.length){if(e)if(d.Utils.isArray(e)){if(JSON.stringify(e)==JSON.stringify(this.internalSelectedIds))return}else if(1==this.internalSelectedIds.length&&e==this.internalSelectedIds[0])return;this.setInternalSelectedValue(this.preSelectedPropertySetId),this.inCategoryMode?this.initCategoryModeItemSelection():this.initNonCategoryModeItemSelection()}}propertyItemsChanged(e){this.initSourceItems(),this.inCategoryMode?this.initCategoryModeItemSelection():this.initNonCategoryModeItemSelection()}created(){this.init(),this.requiredWithValidator&&this.requiredWithValidator.register(this)}mounted(){d.WebComponentBootstrapper.registerElementInstance(this,this.$el)}beforeDestroy(){this.filteringTimewatch&&d.Utils.clearTimewatch(this.filteringTimewatch)}validate(){return this.isValidateTrigged=!0,this.validateValue(),this.isValid}clearValidation(){this.isValidateTrigged=!1,this.isValid=!0}validateValue(){this.isValid=this.internalSelectedIds.length>0}init(){const e=[this.enterprisePropertySetStore.actions.ensureLoadAllSets.dispatch(),this.enterprisePropertyCategoryStore.actions.ensureLoadAllCategories.dispatch()];this.isLoading=!0,Promise.all(e).then((()=>{this.isLoading=!1,this.setInternalSelectedValue(this.preSelectedPropertySetId),this.initMode(),this.enterprisePropertySetStore.mutations.updateEnterprisePropertySets.onCommited((()=>{this.initMode()}))}))}initMode(){this.initSourceItems(),this.inCategoryMode?this.initCategoryModeItemSelection():this.initNonCategoryModeItemSelection()}initSourceItems(){const e=this.propertySetItems?this.propertySetItems.map((e=>e)):this.enterprisePropertySetStore.getters.enterprisePropertySets().map((e=>e));this.sourcePropertySetGroupListing=this.getPropertySetGroupListing(e),this.inCategoryMode=!0,1==this.sourcePropertySetGroupListing.length&&(this.inCategoryMode=!1)}setInternalSelectedValue(e){this.internalSelectedIds=[],e&&(d.Utils.isArray(e)?this.internalSelectedIds=e.filter((e=>e!=a.Guid.empty)):e!=a.Guid.empty&&this.internalSelectedIds.push(e))}cloneGroup(e){return{category:e.category,items:e.items.map((e=>e))}}initUISelectionItems(){this.multiple?this.uiSelectionItems=this.sourcePropertySetGroupListing.map((e=>this.cloneGroup(e))):this.uiSelectionItems=this.sourcePropertySetGroupListing}triggerOnChange(){this.onChange&&(this.multiple?this.onChange(this.internalSelectedIds.map((e=>e))):this.onChange(this.internalSelectedIds.length>0?this.internalSelectedIds[0]:""))}initCategoryModeItemSelection(){if(this.resetUIItemSelected(),this.initUISelectionItems(),this.needToReinitSelectionUI=!1,this.multiple){const e=this.eliminateMultipleSelectedValues(this.uiSelectionItems);this.uiMultipleSelectedItems=e.eliminatedItems,this.uiSelectionItems=e.outputSourceGroupListing}else this.inFilteringMode||this.restoreSingleSelectedValue(this.uiSelectionItems)}initNonCategoryModeItemSelection(){if(this.initUISelectionItems(),this.multiple){const e=this.eliminateMultipleSelectedValues(this.uiSelectionItems);this.uiMultipleSelectedItems=e.eliminatedItems,this.uiSelectionItems=e.outputSourceGroupListing}else this.nonCategoryModeSelectedValue=null,1==this.internalSelectedIds.length&&(this.nonCategoryModeSelectedValue=this.internalSelectedIds[0])}resetUIItemSelected(){this.uiAccordionExpandedGroup=null,this.uiMultipleExpandedGroups=[],this.resetSelectedItemIndexInGroup(),this.multipleExpansionPanel=!1}resetSelectedItemIndexInGroup(e=null){for(const t in this.uiSelectedSetInGroupIndexs)e&&t==e.toString()||(this.uiSelectedSetInGroupIndexs[t]=null)}restoreSingleSelectedValue(e){if(this.internalSelectedIds&&this.internalSelectedIds.length>0){const t=this.internalSelectedIds[0];for(let i=0;i<e.length;i++){const s=e[i].items.findIndex((e=>e.id==t));if(s>=0){this.uiSingleSelectedSetTitle=this.textboxValue=e[i].items[s].multilingualTitle,this.uiSelectedSetInGroupIndexs[e[i].category.id.toString()]=s,this.uiAccordionExpandedGroup=i;break}}}}eliminateMultipleSelectedValues(e){const t=[];return this.internalSelectedIds&&this.internalSelectedIds.length>0&&e.forEach((e=>{this.internalSelectedIds.forEach((i=>{const s=e.items.findIndex((e=>e.id==i));s>=0&&t.push(e.items.splice(s,1)[0])}))})),{outputSourceGroupListing:e.filter((e=>e.items.length>0)),eliminatedItems:t}}getPropertySetGroupListing(e){const t=this.groupSetsByCategory(e),i=[];return this.enterprisePropertyCategoryStore.getters.enterprisePropertyCategories().forEach((e=>{t[e.id.toString()]&&i.push({category:e,items:t[e.id.toString()].map((e=>e)).sort(((e,t)=>e.multilingualTitle>t.multilingualTitle?1:-1))})})),i}groupSetsByCategory(e){return e.reduce(((e,t)=>{const i=t.enterprisePropertyCategoryId?t.enterprisePropertyCategoryId.toString():a.Constants.enterprisepropertycategories.defaultCategoryId.toString();return e[i]=e[i]||[],e[i].push(t),e}),Object.create(null))}onFilterPropertySet(e){16!=e.keyCode&&37!=e.keyCode&&39!=e.keyCode&&(this.filteringTimewatch=d.Utils.timewatch(this.filteringTimewatchKey,(()=>{this.inFilteringMode=!0;const e=this.textboxValue.trim().toLowerCase();e.length>0?(this.needToReinitSelectionUI=!0,this.uiMultipleExpandedGroups=[],this.resetSelectedItemIndexInGroup(),this.uiSelectionItems=this.sourcePropertySetGroupListing.map((t=>{let i=null;const s=t.items.filter((t=>t.multilingualTitle.toLowerCase().indexOf(e)>=0));return s.length>0&&(i={category:t.category,items:s}),i})).filter((e=>null!=e)),this.multiple&&(this.uiSelectionItems=this.eliminateMultipleSelectedValues(this.uiSelectionItems).outputSourceGroupListing),this.uiSelectionItems.forEach(((e,t)=>{this.uiMultipleExpandedGroups.push(t)})),this.multipleExpansionPanel=!0):this.initCategoryModeItemSelection()}),1e3))}onClearTextboxValue(){this.internalSelectedIds=[],this.resetUIItemSelected(),this.triggerOnChange()}onSelectValueInCategoryMode(e,t){this.inFilteringMode&&(this.inFilteringMode=!1,this.uiMultipleExpandedGroups=[],this.multipleExpansionPanel=!1,this.initUISelectionItems()),this.multiple?(this.internalSelectedIds.push(e.id),this.uiMultipleSelectedItems.push(e),this.resetUIItemSelected(),this.uiSelectionItems=this.eliminateMultipleSelectedValues(this.uiSelectionItems).outputSourceGroupListing,this.textboxValue=""):(this.internalSelectedIds=[e.id],this.uiSingleSelectedSetTitle=this.textboxValue=e.multilingualTitle,this.resetSelectedItemIndexInGroup(t)),this.isValidateTrigged&&this.validateValue(),this.triggerOnChange()}onSelectValueInNonCategoryMode(){if(this.multiple){const e=this.uiSelectionItems[0].items.find((e=>e.id==this.nonCategoryModeSelectedValue));this.internalSelectedIds.push(e.id),this.uiMultipleSelectedItems.push(e),this.uiSelectionItems=this.eliminateMultipleSelectedValues(this.uiSelectionItems).outputSourceGroupListing}else this.internalSelectedIds=[this.nonCategoryModeSelectedValue];this.isValidateTrigged&&this.validateValue(),this.triggerOnChange()}onRemoveChip(e){const t=this.uiMultipleSelectedItems.splice(e,1)[0];this.internalSelectedIds=this.internalSelectedIds.filter((e=>e!=t.id)),this.inCategoryMode?this.needToReinitSelectionUI=!0:(this.initUISelectionItems(),this.uiSelectionItems=this.eliminateMultipleSelectedValues(this.uiSelectionItems).outputSourceGroupListing),this.triggerOnChange()}onMenuActivatorClick(e){this.needToReinitSelectionUI&&this.initCategoryModeItemSelection()}onToggleCategory(e){e.stopPropagation()}switchToValueMode(){this.inFilteringMode=!1,!this.multiple&&this.internalSelectedIds.length>0?this.textboxValue=this.uiSingleSelectedSetTitle:this.textboxValue=""}renderPropertySetSelections(){const e=[(0,p.ClickOutDirective)({onClickOut:()=>{this.inFilteringMode&&this.switchToValueMode()}})];return(0,r.h)("div",o()([{},{directives:e}]),[this.uiSelectionItems&&0!=this.uiSelectionItems.length?(0,r.h)("v-expansion-panels",{attrs:{value:this.multipleExpansionPanel?this.uiMultipleExpandedGroups:this.uiAccordionExpandedGroup,multiple:this.multipleExpansionPanel,accordion:!0}},[this.uiSelectionItems.map((e=>(0,r.h)("v-expansion-panel",[(0,r.h)("v-expansion-panel-header",{class:this.pickerStyles.expansionGroupHeader,on:{click:this.onToggleCategory}},[this.multilingualStore.getters.stringValue(e.category.title)]),(0,r.h)("v-expansion-panel-content",[(0,r.h)("v-list",[(0,r.h)("v-list-item-group",{on:{change:t=>{this.uiSelectedSetInGroupIndexs[e.category.id.toString()]=t}},model:{value:this.uiSelectedSetInGroupIndexs[e.category.id.toString()],callback:t=>{this.$set(this.uiSelectedSetInGroupIndexs,e.category.id.toString(),t)}}},[e.items.map(((t,i)=>(0,r.h)("v-list-item",{on:{click:()=>{this.onSelectValueInCategoryMode(t,e.category.id)}}},[(0,r.h)("v-list-item-content",[t.multilingualTitle])])))])])])])))]):(0,r.h)("div",{class:"v-application"},[(0,r.h)("span",{class:"py-4 px-2"},[this.uxLoc.Common.NoData])])])}renderInput(){let e=null;if(this.inCategoryMode){const t={on:{"click:clear":this.onClearTextboxValue}};e=(0,r.h)("v-menu",o()([{attrs:{"nudge-bottom":"56px","close-on-click":!0,"close-on-content-click":!0,"content-class":this.pickerStyles.selectionItemsWrapper}},this.transformVSlot({activator:e=>{const i={on:e.on};return[(0,r.h)("div",o()([{},i,{on:{click:e=>{this.onMenuActivatorClick(e)}}}]),[(0,r.h)("v-text-field",o()([{attrs:{filled:this.filled,disabled:this.disabled,label:this.label,hint:this.hint,"persistent-hint":this.persistentHint,dark:this.theming.body.bg.dark,appendIcon:"arrow_drop_down",clearable:!this.disabled&&!this.multiple,loading:this.isLoading},on:{keyup:e=>{this.onFilterPropertySet(e)}}},t,{attrs:{"hide-details":this.hideDetails&&this.isValid,"error-messages":this.isValid?null:this.uxLoc.Common.Message.Required},model:{value:this.textboxValue,callback:e=>{this.textboxValue=e}}}]))])]}})]),[this.renderPropertySetSelections()])}else{const t=this.uiSelectionItems&&this.uiSelectionItems.length>0?this.uiSelectionItems[0].items:[];e=(0,r.h)("v-autocomplete",{attrs:{label:this.label,hint:this.hint,"persistent-hint":this.persistentHint,filled:this.filled,disabled:this.disabled,dark:this.theming.body.bg.dark,loading:this.isLoading,items:t,"item-text":"multilingualTitle","item-value":"id",clearable:!this.multiple,"hide-details":this.hideDetails&&this.isValid,"error-messages":this.isValid?null:this.uxLoc.Common.Message.Required},on:{change:this.onSelectValueInNonCategoryMode},model:{value:this.nonCategoryModeSelectedValue,callback:e=>{this.nonCategoryModeSelectedValue=e}}})}return e}renderSingleMode(){return this.renderInput()}renderMultipleMode(){return(0,r.h)("div",[this.renderInput(),this.uiMultipleSelectedItems&&this.uiMultipleSelectedItems.length>0?this.uiMultipleSelectedItems.map(((e,t)=>{const i={on:{"click:close":()=>{this.onRemoveChip(t)}}};return(0,r.h)("v-chip",o()([{attrs:{close:!0}},i,{class:"mr-2 mb-2"}]),[e.multilingualTitle])})):null])}render(){return this.multiple?this.renderMultipleMode():this.renderSingleMode()}};y([(0,n.Prop)()],I.prototype,"preSelectedPropertySetId",2),y([(0,n.Prop)()],I.prototype,"propertySetItems",2),y([(0,n.Prop)()],I.prototype,"label",2),y([(0,n.Prop)()],I.prototype,"hint",2),y([(0,n.Prop)()],I.prototype,"persistentHint",2),y([(0,n.Prop)()],I.prototype,"disabled",2),y([(0,n.Prop)()],I.prototype,"multiple",2),y([(0,n.Prop)()],I.prototype,"onChange",2),y([(0,n.Prop)()],I.prototype,"filled",2),y([(0,n.Prop)({default:!1})],I.prototype,"hideDetails",2),y([(0,n.Prop)({default:null})],I.prototype,"requiredWithValidator",2),y([(0,d.Inject)(m.EnterprisePropertySetStore)],I.prototype,"enterprisePropertySetStore",2),y([(0,d.Inject)(m.EnterprisePropertyCategoryStore)],I.prototype,"enterprisePropertyCategoryStore",2),y([(0,d.Inject)(m.MultilingualStore)],I.prototype,"multilingualStore",2),y([(0,d.Localize)(b.OmniaUxLocalizationNamespace)],I.prototype,"uxLoc",2),y([(0,n.Watch)("preSelectedPropertySetId",{deep:!0})],I.prototype,"preSelectedEnterpriseProperyIdChanged",1),y([(0,n.Watch)("propertySetItems",{deep:!0})],I.prototype,"propertyItemsChanged",1),I=y([l.default],I),d.WebComponentBootstrapper.registerElement((e=>{(0,d.vueCustomElement)(e.elementName,I)}))},"./client/fx/ux/models/index.js":(e,t,i)=>{e.exports=i("dll-reference md66")("./client/fx/ux/models/index.js")},"./client/fx/ux/styleflow.js":(e,t,i)=>{e.exports=i("dll-reference md66")("./client/fx/ux/styleflow.js")},"./client/fx/ux/uxmodels.js":(e,t,i)=>{e.exports=i("dll-reference md66")("./client/fx/ux/uxmodels.js")},"./node_modules/@vue/babel-helper-vue-jsx-merge-props/dist/helper.js":(e,t,i)=>{e.exports=i("dll-reference md2")("./node_modules/@vue/babel-helper-vue-jsx-merge-props/dist/helper.js")},"./node_modules/@vue/composition-api/dist/vue-composition-api.mjs":(e,t,i)=>{e.exports=i("dll-reference md2")("./node_modules/@vue/composition-api/dist/vue-composition-api.mjs")},"./node_modules/csx/lib.es2015/index.js":(e,t,i)=>{e.exports=i("dll-reference md2")("./node_modules/csx/lib.es2015/index.js")},"./node_modules/vue-class-component/dist/vue-class-component.esm.js":(e,t,i)=>{e.exports=i("dll-reference md2")("./node_modules/vue-class-component/dist/vue-class-component.esm.js")},"./node_modules/vue-property-decorator/lib/vue-property-decorator.js":(e,t,i)=>{e.exports=i("dll-reference md2")("./node_modules/vue-property-decorator/lib/vue-property-decorator.js")},"14a8d443-2e58-450b-a462-258bdaf69b49":(e,t,i)=>{e.exports=i("dll-reference md10")("14a8d443-2e58-450b-a462-258bdaf69b49")},"5e618f4d-d014-414e-a681-89e34cbeda0f":(e,t,i)=>{e.exports=i("dll-reference md10")("5e618f4d-d014-414e-a681-89e34cbeda0f")},"d0a145a7-d1ef-4217-aa6f-85dd18c4231d":(e,t,i)=>{e.exports=i("dll-reference md9")("d0a145a7-d1ef-4217-aa6f-85dd18c4231d")},"d7327742-5647-4075-b7ab-4f9ca852addb":(e,t,i)=>{e.exports=i("dll-reference md66")("d7327742-5647-4075-b7ab-4f9ca852addb")},"dll-reference md2":e=>{"use strict";e.exports=omniaVendor},"dll-reference md9":e=>{"use strict";e.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["a2892051-fd9f-4056-ae8d-30d16d48417d"]},"dll-reference md10":e=>{"use strict";e.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["a5a89056-b5f5-475d-8518-a1f55090379d"]},"dll-reference md66":e=>{"use strict";e.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["dee030cc-4ab3-4158-bb06-8049f5c67542"]}};if("undefined"==typeof omniaWebpackJsonp&&(globalThis.omniaWebpackJsonp={}),globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]=globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]||{},globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["0619d10d-5416-45aa-abbd-c17d5b867501"])throw new Error("Error, already loaded manifest 0619d10d-5416-45aa-abbd-c17d5b867501 with service id bb000000-0000-bbbb-0000-0000000000bb");globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["0619d10d-5416-45aa-abbd-c17d5b867501"]=i;var t={};function i(s){var o=t[s];if(void 0!==o)return o.exports;var r=t[s]={exports:{}};return e[s](r,r.exports,i),r.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};i("./client/fx/ux/enterprisepropertysets/picker/enterprisepropertysetpicker.tsx")})()};