if("undefined"==typeof omniaLoader&&(globalThis.omniaLoader={}),omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]=omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]||{},omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]["b94ea090-8c7f-4610-85de-9d21a61e0826"])throw new Error("Error, already loaded manifest b94ea090-8c7f-4610-85de-9d21a61e0826 with service id bb000000-0000-bbbb-0000-0000000000bb");omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]["b94ea090-8c7f-4610-85de-9d21a61e0826"]=function(){(()=>{var e={"./client/fx/ux/enterpriseproperties/picker/enterprisepropertypicker.tsx":(e,t,i)=>{"use strict";i.r(t),i.d(t,{EnterprisePropertyPicker:()=>S});var r=i("./node_modules/@vue/babel-helper-vue-jsx-merge-props/dist/helper.js"),n=i.n(r),o=i("./node_modules/@vue/composition-api/dist/vue-composition-api.mjs"),s=i("./node_modules/vue-class-component/dist/vue-class-component.esm.js"),l=i("./node_modules/vue-property-decorator/lib/vue-property-decorator.js"),a=i("14a8d443-2e58-450b-a462-258bdaf69b49").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","b94ea090-8c7f-4610-85de-9d21a61e0826"),p=i("d0a145a7-d1ef-4217-aa6f-85dd18c4231d"),d=i("d7327742-5647-4075-b7ab-4f9ca852addb").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","b94ea090-8c7f-4610-85de-9d21a61e0826"),c=i("./client/fx/ux/styleflow.js"),u=i("./client/fx/ux/models/index.js"),h=i("./node_modules/csx/lib.es2015/index.js");d.StyleFlow.define(u.EnterprisePropertyPickerStyles,{expansionGroupContent:{padding:(0,h.important)("0px")},expansionGroupWrapper:{padding:(0,h.important)("0px")},expansionGroupHeader:{fontSize:(0,h.important)("1rem"),fontWeight:"bold",padding:(0,h.important)("0 16px")},selectionItemsWrapper:{maxHeight:"300px",backgroundColor:"#fff"}});var m=i("5e618f4d-d014-414e-a681-89e34cbeda0f"),b=i("./client/fx/ux/uxmodels.js"),y=Object.defineProperty,g=Object.getOwnPropertyDescriptor,x=(e,t,i,r)=>{for(var n,o=r>1?void 0:r?g(t,i):t,s=e.length-1;s>=0;s--)(n=e[s])&&(o=(r?n(t,i,o):n(o))||o);return r&&o&&y(t,i,o),o};let S=class extends d.VueComponentBase{constructor(){super(...arguments),this.pickerStyles=c.StyleFlow.use(u.EnterprisePropertyPickerStyles),this.uiSelectionItems=[],this.propertyFilterKeyword=null,this.internalSelectedPropertyNames=[],this.textboxValue="",this.uiSelectedItemIndex=null,this.uiMultipleExpandedGroups=[],this.uiAccordionExpandedGroup=null,this.uiSelectedPropertyInGroupIndexs={},this.multipleExpansionPanel=!1,this.uiMultipleSelectedItems=[],this.uiSingleSelectedPropertyTitle="",this.isValid=!0,this.isValidateTrigged=!1,this.isLoading=!1,this.filteringTimewatchKey="EnterprisePropertyPickerFilter_"+p.Guid.newGuid(),this.filteringTimewatch=null,this.inFilteringMode=!1,this.needToReinitSelectionUI=!1,this.openMenu=!1,this.innerHeight=window.innerHeight,this.vListKey=null}preSelectedEnterpriseProperyIdChanged(e){if(e||0!=this.internalSelectedPropertyNames.length){if(e)if(a.Utils.isArray(e)){if(JSON.stringify(e)==JSON.stringify(this.internalSelectedPropertyNames))return}else if(1==this.internalSelectedPropertyNames.length&&e==this.internalSelectedPropertyNames[0])return;this.setInternalSelectedValue(this.preSelectedPropertyInternalName),this.initUISelectionItems()}}propertyItemsChanged(e){this.setInternalSelectedValue(this.preSelectedPropertyInternalName),this.initUISelectionItems()}externalPropertyItemsChanged(e){this.setInternalSelectedValue(this.preSelectedPropertyInternalName),this.initUISelectionItems()}created(){this.init(),this.requiredWithValidator&&this.requiredWithValidator.register(this)}mounted(){a.WebComponentBootstrapper.registerElementInstance(this,this.$el)}beforeDestroy(){this.filteringTimewatch&&a.Utils.clearTimewatch(this.filteringTimewatch)}validate(){return this.isValidateTrigged=!0,this.validateValue(),this.isValid}clearValidation(){this.isValidateTrigged=!1,this.isValid=!0}validateValue(){this.isValid=this.internalSelectedPropertyNames.length>0}init(){const e=[this.enterprisePropertyStore.actions.ensureLoadData.dispatch(),this.enterprisePropertyCategoryStore.actions.ensureLoadAllCategories.dispatch()];this.isLoading=!0,Promise.all(e).then((()=>{this.isLoading=!1,this.setInternalSelectedValue(this.preSelectedPropertyInternalName),this.initUISelectionItems()}))}setInternalSelectedValue(e){this.internalSelectedPropertyNames=[],this.textboxValue=this.uiSingleSelectedPropertyTitle="",e&&e.length>0&&(a.Utils.isArray(e)?this.internalSelectedPropertyNames=e.map((e=>e)):this.internalSelectedPropertyNames.push(e))}triggerOnChange(){this.onChange&&(this.multiple?this.onChange(this.internalSelectedPropertyNames.map((e=>e))):this.onChange(this.internalSelectedPropertyNames.length>0?this.internalSelectedPropertyNames[0]:""))}initUISelectionItems(){this.uiSelectionItems=[],this.resetUIItemSelected(),this.vListKey=p.Guid.newGuid();let e=this.externalPropertyItems?this.externalPropertyItems.map((e=>e)):[],t=this.propertyItems?this.propertyItems.map((e=>e)):this.enterprisePropertyStore.getters.enterprisePropertyDefinitions().map((e=>e));this.multiple&&this.restoreAndEliminateMultipleSelectedValues(e,t);const i=this.propertyFilterKeyword?this.propertyFilterKeyword.trim().toLowerCase():"";i.length>0&&(this.uiMultipleExpandedGroups=[],this.resetSelectedItemIndexInGroup(),e=e.filter((e=>e.multilingualTitle.toLowerCase().indexOf(i)>=0)),t=t.filter((e=>e.multilingualTitle.toLowerCase().indexOf(i)>=0)));const r=[];e.length>0&&e.forEach((e=>{e.categoryId?r.push(e):this.uiSelectionItems.push({selectionType:1,externalPropertyItem:e})}));let n=[];t.length>0&&(n=this.getPropertyDefinitionGroupListing(t,r),this.uiSelectionItems.push({selectionType:0,propertyGroups:n}),i.length>0&&(n.forEach(((e,t)=>{this.uiMultipleExpandedGroups.push(t)})),this.multipleExpansionPanel=!0)),this.multiple||this.inFilteringMode||this.restoreSingleSelectedValue(e,n)}resetUIItemSelected(){this.uiSelectedItemIndex=null,this.uiAccordionExpandedGroup=null,this.uiMultipleExpandedGroups=[],this.resetSelectedItemIndexInGroup(),this.multipleExpansionPanel=!1}resetSelectedItemIndexInGroup(e=null){for(const t in this.uiSelectedPropertyInGroupIndexs)e&&t==e.toString()||(this.uiSelectedPropertyInGroupIndexs[t]=null)}restoreSingleSelectedValue(e,t){if(this.internalSelectedPropertyNames&&this.internalSelectedPropertyNames.length>0){const i=this.internalSelectedPropertyNames[0],r=e.findIndex((e=>e.internalName==i));if(-1==r)for(let e=0;e<t.length;e++){const r=t[e].items.findIndex((e=>e.internalName==i));if(r>=0){this.uiSingleSelectedPropertyTitle=this.textboxValue=t[e].items[r].multilingualTitle,this.uiSelectedPropertyInGroupIndexs[t[e].category.id.toString()]=r,this.uiAccordionExpandedGroup=e,this.uiSelectedItemIndex=this.uiSelectionItems.length-1;break}}else this.uiSingleSelectedPropertyTitle=this.textboxValue=e[r].multilingualTitle,this.uiSelectedItemIndex=r}}restoreAndEliminateMultipleSelectedValues(e,t){this.uiMultipleSelectedItems=[],this.internalSelectedPropertyNames&&this.internalSelectedPropertyNames.length>0&&this.internalSelectedPropertyNames.forEach((i=>{let r=e.findIndex((e=>e.internalName==i));r>=0?this.uiMultipleSelectedItems.push(e.splice(r,1)[0]):(r=t.findIndex((e=>e.internalName==i)),r>=0&&this.uiMultipleSelectedItems.push(t.splice(r,1)[0]))}))}getPropertyDefinitionGroupListing(e,t){const i=this.groupPropertiesByCategory(e),r=[],n=t.map((e=>({id:a.Utils.generateGuid(),builtIn:!0,internalName:e.internalName,multilingualTitle:"["+e.multilingualTitle+"]",enterprisePropertyCategoryId:e.categoryId})));return this.enterprisePropertyCategoryStore.getters.enterprisePropertyCategories().forEach((e=>{let t=null;i[e.id.toString()]&&(t={category:e,items:i[e.id.toString()].map((e=>e)).sort(((e,t)=>e.builtIn&&!t.builtIn?-1:t.builtIn&&!e.builtIn||e.multilingualTitle>t.multilingualTitle?1:-1))});const o=n.filter((t=>t.enterprisePropertyCategoryId===e.id.toString()));o.length&&(t||(t={category:e,items:[]}),t.items=o.concat(t.items)),t&&r.push(t)})),r}groupPropertiesByCategory(e){return e.reduce(((e,t)=>{const i=t.enterprisePropertyCategoryId?t.enterprisePropertyCategoryId.toString():p.Constants.enterprisepropertycategories.defaultCategoryId.toString();return e[i]=e[i]||[],e[i].push(t),e}),Object.create(null))}onFilterProperty(e){16!=e.keyCode&&37!=e.keyCode&&39!=e.keyCode&&(this.filteringTimewatch=a.Utils.timewatch(this.filteringTimewatchKey,(()=>{this.inFilteringMode=!0,this.needToReinitSelectionUI=!0,this.propertyFilterKeyword=this.textboxValue,this.initUISelectionItems(),this.$nextTick().then((()=>{setTimeout(this.repositionPopupList,400)}))}),1e3))}onSelectExternalProperty(e,t){this.onPickedProperty(t),this.triggerOnChange()}onSelectPropertyDefinition(e,t,i){this.onPickedProperty(t,i),this.triggerOnChange()}onPickedProperty(e,t){this.multiple?(this.internalSelectedPropertyNames.push(e.internalName),this.uiMultipleSelectedItems.push(e),this.textboxValue="",this.needToReinitSelectionUI=!0):(this.internalSelectedPropertyNames=[e.internalName],this.uiSingleSelectedPropertyTitle=this.textboxValue=e.multilingualTitle,this.resetSelectedItemIndexInGroup(t)),this.inFilteringMode&&(this.inFilteringMode=!1,this.propertyFilterKeyword=""),this.isValidateTrigged&&this.validateValue()}onRemoveChip(e){const t=this.uiMultipleSelectedItems.splice(e,1)[0];this.internalSelectedPropertyNames=this.internalSelectedPropertyNames.filter((e=>e!=t.internalName)),this.needToReinitSelectionUI=!0,this.triggerOnChange()}onMenuActivatorClick(e){this.needToReinitSelectionUI&&(this.needToReinitSelectionUI=!1,this.initUISelectionItems())}repositionPopupList(){this.$refs.vList.$parent.$el.getBoundingClientRect().bottom>this.innerHeight&&(this.openMenu=!1,setTimeout((()=>this.openMenu=!0),50))}onToggleCategory(e,t){e.stopPropagation(),setTimeout(this.repositionPopupList,100)}switchToValueMode(){this.inFilteringMode=!1,this.propertyFilterKeyword="",!this.multiple&&this.internalSelectedPropertyNames.length>0?this.textboxValue=this.uiSingleSelectedPropertyTitle:this.textboxValue=""}renderPropertySelections(){const e=[(0,d.ClickOutDirective)({onClickOut:()=>{this.inFilteringMode&&this.switchToValueMode()}})];return(0,o.h)("div",n()([{},{directives:e}]),[this.uiSelectionItems&&0!=this.uiSelectionItems.length?(0,o.h)("v-list",{key:"vlist_"+this.vListKey,ref:"vList"},[(0,o.h)("v-list-item-group",{model:{value:this.uiSelectedItemIndex,callback:e=>{this.uiSelectedItemIndex=e}}},[this.uiSelectionItems.map((e=>{let t=null;return t=1==e.selectionType?(0,o.h)("v-list-item",{on:{click:t=>{this.onSelectExternalProperty(t,e.externalPropertyItem)}}},[(0,o.h)("v-list-item-content",["[",e.externalPropertyItem.multilingualTitle,"]"])]):(0,o.h)("v-list-item",{on:{click:()=>{}},class:this.pickerStyles.expansionGroupWrapper},[(0,o.h)("v-list-item-content",{class:this.pickerStyles.expansionGroupContent},[(0,o.h)("v-expansion-panels",{attrs:{value:this.multipleExpansionPanel?this.uiMultipleExpandedGroups:this.uiAccordionExpandedGroup,multiple:this.multipleExpansionPanel,accordion:!0}},[e.propertyGroups.map(((e,t)=>(0,o.h)("v-expansion-panel",[(0,o.h)("v-expansion-panel-header",{class:this.pickerStyles.expansionGroupHeader,on:{click:e=>{this.onToggleCategory(e,t)}}},[this.multilingualStore.getters.stringValue(e.category.title)]),(0,o.h)("v-expansion-panel-content",[(0,o.h)("v-list",[(0,o.h)("v-list-item-group",{on:{change:t=>{this.uiSelectedPropertyInGroupIndexs[e.category.id.toString()]=t}},model:{value:this.uiSelectedPropertyInGroupIndexs[e.category.id.toString()],callback:t=>{this.$set(this.uiSelectedPropertyInGroupIndexs,e.category.id.toString(),t)}}},[e.items.map(((t,i)=>(0,o.h)("v-list-item",{on:{click:i=>{this.onSelectPropertyDefinition(i,t,e.category.id)}}},[(0,o.h)("v-list-item-content",[t.multilingualTitle])])))])])])])))])])]),t}))])]):(0,o.h)("span",{class:"py-4 px-2"},[this.uxLoc.Common.NoData])])}onClearTextboxValue(){this.internalSelectedPropertyNames=[],this.resetUIItemSelected(),this.triggerOnChange()}renderPropertyInput(){const e={on:{"click:clear":this.onClearTextboxValue}};return(0,o.h)("v-menu",n()([{attrs:{"nudge-bottom":"56px","close-on-click":!0,"close-on-content-click":!0,"content-class":this.pickerStyles.selectionItemsWrapper,disabled:this.disabled}},this.transformVSlot({activator:t=>{const i={on:t.on};return[(0,o.h)("div",n()([{},i,{on:{click:e=>{this.onMenuActivatorClick(e)}}}]),[(0,o.h)("v-text-field",n()([{attrs:{filled:this.filled,disabled:this.disabled,label:this.label,dark:this.theming.body.bg.dark,appendIcon:"arrow_drop_down",clearable:!this.disabled&&!this.multiple,loading:this.isLoading},on:{keyup:e=>{this.onFilterProperty(e)}}},e,{attrs:{"hide-details":this.hideDetails&&this.isValid,"error-messages":this.isValid?null:this.uxLoc.Common.Message.Required},model:{value:this.textboxValue,callback:e=>{this.textboxValue=e}}}]))])]}}),{model:{value:this.openMenu,callback:e=>{this.openMenu=e}}}]),[this.renderPropertySelections()])}renderSingleMode(){return this.renderPropertyInput()}renderMultipleMode(){return(0,o.h)("div",[this.renderPropertyInput(),this.uiMultipleSelectedItems&&this.uiMultipleSelectedItems.length>0?this.uiMultipleSelectedItems.map(((e,t)=>{const i={on:{"click:close":()=>{this.onRemoveChip(t)}}};return(0,o.h)("v-chip",n()([{attrs:{close:!0}},i,{class:"mr-2 mb-2"}]),[e.multilingualTitle])})):null])}render(){return this.multiple?this.renderMultipleMode():this.renderSingleMode()}};x([(0,l.Prop)()],S.prototype,"preSelectedPropertyInternalName",2),x([(0,l.Prop)()],S.prototype,"propertyItems",2),x([(0,l.Prop)()],S.prototype,"externalPropertyItems",2),x([(0,l.Prop)()],S.prototype,"label",2),x([(0,l.Prop)()],S.prototype,"disabled",2),x([(0,l.Prop)()],S.prototype,"multiple",2),x([(0,l.Prop)()],S.prototype,"onChange",2),x([(0,l.Prop)()],S.prototype,"filled",2),x([(0,l.Prop)({default:!1})],S.prototype,"hideDetails",2),x([(0,l.Prop)({default:null})],S.prototype,"requiredWithValidator",2),x([(0,a.Inject)(m.EnterprisePropertyStore)],S.prototype,"enterprisePropertyStore",2),x([(0,a.Inject)(m.EnterprisePropertyCategoryStore)],S.prototype,"enterprisePropertyCategoryStore",2),x([(0,a.Inject)(m.MultilingualStore)],S.prototype,"multilingualStore",2),x([(0,a.Localize)(b.OmniaUxLocalizationNamespace)],S.prototype,"uxLoc",2),x([(0,l.Watch)("preSelectedPropertyInternalName",{deep:!0})],S.prototype,"preSelectedEnterpriseProperyIdChanged",1),x([(0,l.Watch)("propertyItems",{deep:!0})],S.prototype,"propertyItemsChanged",1),x([(0,l.Watch)("externalPropertyItems",{deep:!0})],S.prototype,"externalPropertyItemsChanged",1),S=x([s.default],S),a.WebComponentBootstrapper.registerElement((e=>{(0,a.vueCustomElement)(e.elementName,S)}))},"./client/fx/ux/models/index.js":(e,t,i)=>{e.exports=i("dll-reference md66")("./client/fx/ux/models/index.js")},"./client/fx/ux/styleflow.js":(e,t,i)=>{e.exports=i("dll-reference md66")("./client/fx/ux/styleflow.js")},"./client/fx/ux/uxmodels.js":(e,t,i)=>{e.exports=i("dll-reference md66")("./client/fx/ux/uxmodels.js")},"./node_modules/@vue/babel-helper-vue-jsx-merge-props/dist/helper.js":(e,t,i)=>{e.exports=i("dll-reference md2")("./node_modules/@vue/babel-helper-vue-jsx-merge-props/dist/helper.js")},"./node_modules/@vue/composition-api/dist/vue-composition-api.mjs":(e,t,i)=>{e.exports=i("dll-reference md2")("./node_modules/@vue/composition-api/dist/vue-composition-api.mjs")},"./node_modules/csx/lib.es2015/index.js":(e,t,i)=>{e.exports=i("dll-reference md2")("./node_modules/csx/lib.es2015/index.js")},"./node_modules/vue-class-component/dist/vue-class-component.esm.js":(e,t,i)=>{e.exports=i("dll-reference md2")("./node_modules/vue-class-component/dist/vue-class-component.esm.js")},"./node_modules/vue-property-decorator/lib/vue-property-decorator.js":(e,t,i)=>{e.exports=i("dll-reference md2")("./node_modules/vue-property-decorator/lib/vue-property-decorator.js")},"14a8d443-2e58-450b-a462-258bdaf69b49":(e,t,i)=>{e.exports=i("dll-reference md10")("14a8d443-2e58-450b-a462-258bdaf69b49")},"5e618f4d-d014-414e-a681-89e34cbeda0f":(e,t,i)=>{e.exports=i("dll-reference md10")("5e618f4d-d014-414e-a681-89e34cbeda0f")},"d0a145a7-d1ef-4217-aa6f-85dd18c4231d":(e,t,i)=>{e.exports=i("dll-reference md9")("d0a145a7-d1ef-4217-aa6f-85dd18c4231d")},"d7327742-5647-4075-b7ab-4f9ca852addb":(e,t,i)=>{e.exports=i("dll-reference md66")("d7327742-5647-4075-b7ab-4f9ca852addb")},"dll-reference md2":e=>{"use strict";e.exports=omniaVendor},"dll-reference md9":e=>{"use strict";e.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["a2892051-fd9f-4056-ae8d-30d16d48417d"]},"dll-reference md10":e=>{"use strict";e.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["a5a89056-b5f5-475d-8518-a1f55090379d"]},"dll-reference md66":e=>{"use strict";e.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["dee030cc-4ab3-4158-bb06-8049f5c67542"]}};if("undefined"==typeof omniaWebpackJsonp&&(globalThis.omniaWebpackJsonp={}),globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]=globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]||{},globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["b94ea090-8c7f-4610-85de-9d21a61e0826"])throw new Error("Error, already loaded manifest b94ea090-8c7f-4610-85de-9d21a61e0826 with service id bb000000-0000-bbbb-0000-0000000000bb");globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["b94ea090-8c7f-4610-85de-9d21a61e0826"]=i;var t={};function i(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,i),o.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};i("./client/fx/ux/enterpriseproperties/picker/enterprisepropertypicker.tsx")})()};