if("undefined"==typeof omniaLoader&&(globalThis.omniaLoader={}),omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]=omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]||{},omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]["e6ce8067-4959-4b1d-a7e0-ae5f60cef41c"])throw new Error("Error, already loaded manifest e6ce8067-4959-4b1d-a7e0-ae5f60cef41c with service id bb000000-0000-bbbb-0000-0000000000bb");omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]["e6ce8067-4959-4b1d-a7e0-ae5f60cef41c"]=function(){(()=>{var e={"./client/fx/ux/texttranslator/texttranslator.tsx":(e,t,a)=>{"use strict";a.r(t),a.d(t,{TextTranslator:()=>y});var s,o=a("./node_modules/@vue/babel-helper-vue-jsx-merge-props/dist/helper.js"),n=a.n(o),r=a("./node_modules/@vue/composition-api/dist/vue-composition-api.mjs"),i=a("./node_modules/vue-class-component/dist/vue-class-component.esm.js"),l=a("./node_modules/vue-property-decorator/lib/vue-property-decorator.js"),d=a("14a8d443-2e58-450b-a462-258bdaf69b49").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","e6ce8067-4959-4b1d-a7e0-ae5f60cef41c"),b=a("d0a145a7-d1ef-4217-aa6f-85dd18c4231d"),c=a("d7327742-5647-4075-b7ab-4f9ca852addb").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","e6ce8067-4959-4b1d-a7e0-ae5f60cef41c"),u=a("5e618f4d-d014-414e-a681-89e34cbeda0f"),p=a("c041fe9f-1e14-443d-9407-5aa8829fbc21");(s||(s={})).namespace="Omnia.Ux.TextTranslator";var h=a("e25b9dd8-6dd7-4437-8ddd-0b9fadba73ac"),m=a("./client/fx/ux/models/index.js"),f=a("./client/fx/ux/styleflow.js");f.StyleFlow.define(m.TextTranslatorStyles,{languagesMenu:{overflowY:"auto",maxHeight:"350px"}});var g=Object.defineProperty,v=Object.getOwnPropertyDescriptor,x=(e,t,a,s)=>{for(var o,n=s>1?void 0:s?v(t,a):t,r=e.length-1;r>=0;r--)(o=e[r])&&(n=(s?o(t,a,n):o(n))||n);return s&&n&&g(t,a,n),n};let y=class extends c.VueComponentBase{constructor(){super(...arguments),this.styles=f.StyleFlow.use(m.TextTranslatorStyles),this.languages=[],this.showAllLanguages=!1,this.loadedAllLanguages=!1,this.unselectedLanguages=[],this.showTranslationMenu=!1,this.isTranslating=!1}mounted(){d.WebComponentBootstrapper.registerElementInstance(this,this.$el)}created(){this.init(),this.subscriptionHandler.add(this.multilingualStringStore.getters.onLanguageSettingUpdated()((()=>{this.init()})))}init(){const e=this.multilingualStringStore.getters.languageSetting(this.forceTenantLanguages?b.MultilingualScopes.Tenant:b.MultilingualScopes.BusinessProfile);this.languages=e?e.availableLanguages:[]}onTranslate(e){if(this.showTranslationMenu=!1,d.Utils.isNullOrEmpty(this.text))return;this.isTranslating=!0;const t=[],a=[],s=5e3,o=Math.ceil(this.text.length/s);for(let e=0;e<o;e++)a.push(this.text.substr(e*s,(e+1)*s));a.forEach((a=>{const s={to:[e.name],textType:"html",source:[{text:a}]};t.push(this.translationService.translate(s))})),Promise.all(t).then((e=>{let t=this.text,s="";e.forEach(((e,t)=>{e&&e.length>0?s+=e[0].translations[0].text:s+=a[t]})),""!=s&&(t=s),this.onTranslateCompleted&&this.onTranslateCompleted(t),this.isTranslating=!1}))}loadAllLanguages(){this.showAllLanguages=!0,this.loadedAllLanguages||this.localizationService.allLanguages.then((e=>{const t=e.filter((e=>!this.languages.find((t=>t.lcid===e.lcid))));this.unselectedLanguages=t,this.loadedAllLanguages=!0}))}hideNonSystemLanguages(){this.showAllLanguages=!1}renderIcon(){if(!this.icon)return"translate";switch(this.icon.iconType){case b.IconTypes.FontAwesome:return this.icon.faClass;case b.IconTypes.Fabric:return this.icon.fabClass;case b.IconTypes.Flag:return this.icon.flagClass}}renderLanguage(e){return e.name&&(0,r.h)("v-list-item",{attrs:{dark:this.omniaTheming.promoted.body.dark},on:{click:t=>this.onTranslate(e)}},[(0,r.h)("v-list-item-avatar",[(0,r.h)("v-avatar",[(0,r.h)("i",{class:["ma-0","omux-flag",`flag-${e.name.split("-")[1]}`]})])]),(0,r.h)("v-list-item-content",{class:"mr-2"},[(0,r.h)("v-list-item-title",[e.displayName])])])}render(){return null==this.languages||0==this.languages.length?null:(0,r.h)("v-menu",n()([{attrs:{"min-width":"280",bottom:!0,right:!0,"close-on-content-click":!1}},this.transformVSlot({activator:e=>{const t={on:e.on};return[(0,r.h)("div",n()([{},t]),[(0,r.h)("v-tooltip",n()([{attrs:{bottom:!0}},this.transformVSlot({activator:e=>{const t={on:e.on};return[(0,r.h)("v-btn",n()([{attrs:{dark:this.dark}},t,{attrs:{icon:!this.fabButton,small:this.fabButton,depressed:!0,fab:this.fabButton,loading:this.isTranslating}}]),[(0,r.h)("v-icon",{attrs:{dark:this.dark}},[this.renderIcon()])])]}})]),[(0,r.h)("span",[this.loc.translate])])])]}}),{model:{value:this.showTranslationMenu,callback:e=>{this.showTranslationMenu=e}}}]),[(0,r.h)("v-list",{class:this.styles.languagesMenu},[this.languages.map(this.renderLanguage),this.showAllLanguages&&this.unselectedLanguages.map(this.renderLanguage),!this.showAllLanguages&&(0,r.h)("v-list-item",{on:{click:()=>this.loadAllLanguages()}},[(0,r.h)("v-list-item-avatar",[(0,r.h)("v-avatar",[(0,r.h)("i",{class:"fa fa-ellipsis-h",attrs:{"aria-hidden":"true"},style:{fontSize:"26px"}})])]),(0,r.h)("v-list-item-content",{class:"mr-2"},[(0,r.h)("v-list-item-title",[this.loc.allLanguages])])]),this.showAllLanguages&&this.unselectedLanguages.length>0&&(0,r.h)("v-list-item",{attrs:{link:!0},on:{click:this.hideNonSystemLanguages}},[(0,r.h)("v-list-item-avatar",[(0,r.h)("v-avatar",[(0,r.h)("i",{class:"fa fa-eject",attrs:{"aria-hidden":"true"},style:{fontSize:"26px"}})])]),(0,r.h)("v-list-item-content",[(0,r.h)("v-list-item-title",[" ",this.loc.showDefaultLanguages])])])])])}};x([(0,l.Prop)()],y.prototype,"text",2),x([(0,l.Prop)()],y.prototype,"onTranslateCompleted",2),x([(0,l.Prop)({default:!1})],y.prototype,"forceTenantLanguages",2),x([(0,l.Prop)()],y.prototype,"fabButton",2),x([(0,l.Prop)()],y.prototype,"icon",2),x([(0,l.Prop)()],y.prototype,"dark",2),x([(0,d.Inject)(c.OmniaTheming)],y.prototype,"omniaTheming",2),x([(0,d.Inject)(u.MultilingualStore)],y.prototype,"multilingualStringStore",2),x([(0,d.Inject)(d.SubscriptionHandler)],y.prototype,"subscriptionHandler",2),x([(0,d.Inject)(h.TranslationService)],y.prototype,"translationService",2),x([(0,d.Inject)(h.LocalizationService)],y.prototype,"localizationService",2),x([(0,p.Localize)(s.namespace)],y.prototype,"loc",2),y=x([i.default],y),d.WebComponentBootstrapper.registerElement((e=>{(0,d.vueCustomElement)(e.elementName,y)}))},"./client/fx/ux/models/index.js":(e,t,a)=>{e.exports=a("dll-reference md66")("./client/fx/ux/models/index.js")},"./client/fx/ux/styleflow.js":(e,t,a)=>{e.exports=a("dll-reference md66")("./client/fx/ux/styleflow.js")},"./node_modules/@vue/babel-helper-vue-jsx-merge-props/dist/helper.js":(e,t,a)=>{e.exports=a("dll-reference md2")("./node_modules/@vue/babel-helper-vue-jsx-merge-props/dist/helper.js")},"./node_modules/@vue/composition-api/dist/vue-composition-api.mjs":(e,t,a)=>{e.exports=a("dll-reference md2")("./node_modules/@vue/composition-api/dist/vue-composition-api.mjs")},"./node_modules/vue-class-component/dist/vue-class-component.esm.js":(e,t,a)=>{e.exports=a("dll-reference md2")("./node_modules/vue-class-component/dist/vue-class-component.esm.js")},"./node_modules/vue-property-decorator/lib/vue-property-decorator.js":(e,t,a)=>{e.exports=a("dll-reference md2")("./node_modules/vue-property-decorator/lib/vue-property-decorator.js")},"14a8d443-2e58-450b-a462-258bdaf69b49":(e,t,a)=>{e.exports=a("dll-reference md10")("14a8d443-2e58-450b-a462-258bdaf69b49")},"5e618f4d-d014-414e-a681-89e34cbeda0f":(e,t,a)=>{e.exports=a("dll-reference md10")("5e618f4d-d014-414e-a681-89e34cbeda0f")},"c041fe9f-1e14-443d-9407-5aa8829fbc21":(e,t,a)=>{e.exports=a("dll-reference md10")("c041fe9f-1e14-443d-9407-5aa8829fbc21")},"d0a145a7-d1ef-4217-aa6f-85dd18c4231d":(e,t,a)=>{e.exports=a("dll-reference md9")("d0a145a7-d1ef-4217-aa6f-85dd18c4231d")},"d7327742-5647-4075-b7ab-4f9ca852addb":(e,t,a)=>{e.exports=a("dll-reference md66")("d7327742-5647-4075-b7ab-4f9ca852addb")},"e25b9dd8-6dd7-4437-8ddd-0b9fadba73ac":(e,t,a)=>{e.exports=a("dll-reference md10")("e25b9dd8-6dd7-4437-8ddd-0b9fadba73ac")},"dll-reference md2":e=>{"use strict";e.exports=omniaVendor},"dll-reference md9":e=>{"use strict";e.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["a2892051-fd9f-4056-ae8d-30d16d48417d"]},"dll-reference md10":e=>{"use strict";e.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["a5a89056-b5f5-475d-8518-a1f55090379d"]},"dll-reference md66":e=>{"use strict";e.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["dee030cc-4ab3-4158-bb06-8049f5c67542"]}};if("undefined"==typeof omniaWebpackJsonp&&(globalThis.omniaWebpackJsonp={}),globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]=globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]||{},globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["e6ce8067-4959-4b1d-a7e0-ae5f60cef41c"])throw new Error("Error, already loaded manifest e6ce8067-4959-4b1d-a7e0-ae5f60cef41c with service id bb000000-0000-bbbb-0000-0000000000bb");globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["e6ce8067-4959-4b1d-a7e0-ae5f60cef41c"]=a;var t={};function a(s){var o=t[s];if(void 0!==o)return o.exports;var n=t[s]={exports:{}};return e[s](n,n.exports,a),n.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};a("./client/fx/ux/texttranslator/texttranslator.tsx")})()};