if("undefined"==typeof omniaLoader&&(globalThis.omniaLoader={}),omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]=omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]||{},omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]["1fab0218-538f-431c-91ec-e4e10cbd468c"])throw new Error("Error, already loaded manifest 1fab0218-538f-431c-91ec-e4e10cbd468c with service id bb000000-0000-bbbb-0000-0000000000bb");omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]["1fab0218-538f-431c-91ec-e4e10cbd468c"]=function(){(()=>{var e={"./client/fx/ux/fileuploader/fileuploader.tsx":(e,t,i)=>{"use strict";i.r(t),i.d(t,{FileUploader:()=>x});var s=i("./node_modules/@vue/composition-api/dist/vue-composition-api.mjs"),o=i("./node_modules/vue-class-component/dist/vue-class-component.esm.js"),l=i("./node_modules/vue-property-decorator/lib/vue-property-decorator.js"),a=i("14a8d443-2e58-450b-a462-258bdaf69b49").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","1fab0218-538f-431c-91ec-e4e10cbd468c"),r=i("97786ea9-4861-48bd-8a57-eae9bbdb4892"),n=i("./client/fx/ux/styleflow.js"),d=i("./client/fx/ux/models/index.js"),c=i("d7327742-5647-4075-b7ab-4f9ca852addb").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","1fab0218-538f-431c-91ec-e4e10cbd468c");const b=c.Styles.darkColors,m=c.Styles.lightColors;c.StyleFlow.define(d.FileUploaderStyles,{wrapper:{position:"relative",minHeight:"100px",padding:"20px",border:"2px dashed rgba(0,0,0,0)",transition:"all 0.25s"},browseLabel:{cursor:"pointer",textDecoration:"underline"},dragOver:{$nest:{"&.theme--dark":{background:b.activeBgColor,color:b.activeTextColor,borderColor:"white !important"},"&.theme--light":{background:m.activeBgColor,color:m.activeTextColor,borderColor:"#757575 !important"}}},table:{$nest:{".v-datatable":{tableLayout:"fixed"}}},iconColumn:{width:"30px"},fileTitle:{fontSize:"14px",fontWeight:500},fileSize:{fontSize:"12px"},mainLabel:{fontSize:"14px",fontWeight:500},subLabel:{fontSize:"12px"},labelColumnError:{color:"red !important"},overlay:{position:"absolute",top:0,bottom:0,left:0,right:0,cursor:"not-allowed",zIndex:1,$nest:{"&.theme--dark":{background:b.activeBgColor},"&.theme--light":{background:m.activeBgColor}}},hintForEditFileName:{fontStyle:"italic",fontSize:"13px"},fixButton:{minWidth:"auto !important"},cursor:{cursor:"pointer"},instructionText:e=>({lineHeight:"36px",color:e.body.bg.dark?"#ffffff":"#757575","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",zIndex:2}),instructionIcon:{position:"absolute",pointerEvents:"none",$nest:{i:{fontSize:"10rem !important",fontWeight:"500",color:"#75757536 !important",pointerEvents:"none"}}},errorMessage:{color:"#ff5252"}});var p,h=i("./client/fx/ux/omniatheming.js");(p||(p={})).namespace="Omnia.FileUploader";var u=i("d0a145a7-d1ef-4217-aa6f-85dd18c4231d"),f=i("./client/fx/ux/uxmodels.js"),g=Object.defineProperty,y=Object.getOwnPropertyDescriptor,F=(e,t,i,s)=>{for(var o,l=s>1?void 0:s?y(t,i):t,a=e.length-1;a>=0;a--)(o=e[a])&&(l=(s?o(t,i,l):o(l))||l);return s&&l&&g(t,i,l),l};let x=class extends c.VueComponentBase{constructor(){super(...arguments),this.styles=n.StyleFlow.use(d.FileUploaderStyles),this.customFileName="",this.selectingFileId="",this.selectingFileExtension="",this.uniqueId=r.Utils.generateGuid(),this.addedFiles=[],this.dragOver=!1,this.fileInputKey=r.Utils.generateGuid(),this.rejectFileSize=!1}beforeDestroy(){document.removeEventListener("paste",this.handlePaste)}created(){}mounted(){a.WebComponentBootstrapper.registerElementInstance(this,this.$el),this.initDropArea()}initDropArea(){const e=document.getElementById(this.uniqueId);["dragenter","dragover","dragleave","drop"].forEach((t=>{e.addEventListener(t,(e=>{e.preventDefault(),e.stopPropagation()}),!1)})),["dragenter","dragover"].forEach((t=>{e.addEventListener(t,(e=>{this.dragOver=!0}),!1)})),["dragleave","drop"].forEach((t=>{e.addEventListener(t,(e=>{this.dragOver=!1}),!1)})),e.addEventListener("drop",this.handleDrop,!1),this.enablePasteClipboardData&&document.addEventListener("paste",this.handlePaste,!1)}getValidFile(e){const t=[];for(const i of e){let e=!1,s=!1;this.rejectFileSize=s;const o=i.type.toLowerCase();if(this.limitedFileTypes&&this.limitedFileTypes.length>0){for(let t of this.limitedFileTypes)if(t=t.toLowerCase(),e=t.endsWith("*")?-1!=o.indexOf(t.replace("*","")):o==t,e)break}else e=!0;!r.Utils.isNullOrEmpty(this.limitedFileSize)&&i.size>1024*this.limitedFileSize*1024&&(s=!0,this.rejectFileSize=s),e&&!s?t.push(i):console.log(`Discard a file due to its invalid type: ${o}`)}return t}handlePaste(e){if(!this.disabled){const t=[];for(let i=0;i<e.clipboardData.items.length;i++){const s=e.clipboardData.items[i].getAsFile();s&&t.push(s)}this.addFiles(t)}}handleDrop(e){if(!this.disabled){const t=e.dataTransfer,i=Array.from(t.files);this.addFiles(i)}}addFiles(e){const t=this.getValidFile(e);if(t.length>0){if(this.multiple)for(const e of t)this.addedFiles.push({id:r.Utils.generateGuid(),file:e,status:u.FileUploaderItemStatus.Pending,label:{main:"",sub:""},customFileName:"",progressPercent:0,fileSizeLabel:this.formatBytes(e.size)});else{const e=t[0];this.addedFiles.length=0,this.addedFiles.push({id:r.Utils.generateGuid(),file:e,status:u.FileUploaderItemStatus.Pending,label:{main:"",sub:""},customFileName:"",progressPercent:0,fileSizeLabel:this.formatBytes(e.size)})}this.addedFilesChanged()}}removeFile(e,t=!0){this.addedFiles=this.addedFiles.filter((t=>t!=e)),t&&this.addedFilesChanged()}addedFilesChanged(){const e=[];for(const t of this.addedFiles){const i={getFile:()=>({file:t.file,customFileName:t.customFileName}),setLabel:(e,i)=>{t.label.main=e||"",t.label.sub=i||""},setStatus:e=>{t.status=e},updateProgress:e=>{t.progressPercent=e},getStatus:()=>t.status,removeFile:(e=!0)=>{this.removeFile(t,e)}};(r.Utils.isNullOrEmpty(this.limitedFileSize)||i.getFile().file.size<=1024*this.limitedFileSize*1024)&&e.push(i)}this.onFileChanged(e)}formatBytes(e,t=2){if(0===e)return"0 Bytes";const i=t<0?0:t,s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(i))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][s]}onFileInputChanged(e){const t=e.target.files;this.addFiles(t),this.fileInputKey=r.Utils.generateGuid()}selectFileToEdit(e){if(this.selectingFileId!=e.id){this.selectingFileId=e.id,this.customFileName=e.customFileName.split(".").slice(0,-1).join(".");const t=e.file.name.split(".");this.selectingFileExtension="."+t[t.length-1]}}onEditFileNameAction(e,t,i){if(e.stopPropagation(),t){const e=this.customFileName.trim();e&&(i.customFileName=e+this.selectingFileExtension),this.addedFilesChanged()}this.selectingFileId=""}render(){const e=this.dark?"theme--dark":"theme--light",t=!this.disabled&&this.dragOver?this.styles.dragOver:"",i=this.limitedFileTypes?this.limitedFileTypes.join(","):"",o=this.limitedFileSize?this.loc.LimitFileSize.replace("[FILESIZE]",`${this.limitedFileSize.toString()}mb`):"";return(0,s.h)("div",{attrs:{id:this.uniqueId},class:[this.styles.wrapper,e,t]},[this.disabled&&(0,s.h)("div",{class:[e,this.styles.overlay]}),(0,s.h)("input",{attrs:{accept:i,type:"file",multiple:this.multiple},key:this.fileInputKey,style:"display:none",ref:"inputUpload",on:{change:e=>{this.onFileInputChanged(e)}}}),(0,s.h)("h1",{class:[this.styles.instructionText(this.theming),"text-center","font-weight-light"]},[this.enablePasteClipboardData?`${this.loc.Label0}, `:"",this.loc.Label1," ",(0,s.h)("span",{on:{click:()=>{this.$refs.inputUpload.click()}},class:this.styles.browseLabel},[this.loc.Label2])]),!r.Utils.isNullOrEmpty(this.limitedFileSize)&&this.rejectFileSize&&(0,s.h)("div",{class:[this.styles.instructionText(this.theming),this.styles.errorMessage,"text-center","font-weight-light"]},[o]),!this.hideOverlayIcon&&(0,s.h)("div",{class:this.styles.instructionIcon},[" ",(0,s.h)("omfx-icon",{domProps:{valueBind:new u.FontAwesomeIcon("fas fa-cloud-upload-alt")}})]),this.addedFiles.length>0&&[(0,s.h)("v-data-table",{class:this.styles.table,attrs:{dark:this.dark,"hide-default-header":!0,"hide-default-footer":!0,"items-per-page":Number.MAX_SAFE_INTEGER,items:this.addedFiles},scopedSlots:{item:e=>{const t=e.item.status==u.FileUploaderItemStatus.Success,i=this.selectingFileId==e.item.id&&!t&&!this.disabled;return(0,s.h)("tr",{class:t?"":this.styles.cursor,on:{click:()=>{!this.disabled&&this.selectFileToEdit(e.item)}}},[(0,s.h)("td",{class:["pa-0",this.styles.iconColumn]},[(0,s.h)("omfx-button",{attrs:{small:!0,dark:this.omniaTheming.promoted.header.dark},domProps:{onClick:()=>{this.removeFile(e.item)},preset:c.ButtonPresets.icons.close}})]),(0,s.h)("td",{attrs:{colspan:i?2:1}},[i?(0,s.h)("v-layout",{attrs:{"align-center":!0},class:"my-2"},[(0,s.h)("v-text-field",{class:"mr-2",attrs:{hint:e.item.file.name,"persistent-hint":!0},model:{value:this.customFileName,callback:e=>{this.customFileName=e}}},[(0,s.h)("span",{slot:"append"},[this.selectingFileExtension])]),(0,s.h)("omfx-button",{attrs:{contentClass:["ma-0",this.styles.fixButton].join(" "),small:!0},domProps:{onClick:t=>{this.onEditFileNameAction(t,!0,e.item)},mode:u.ButtonModes.icon,icon:{iconType:new u.FontAwesomeIcon("fas fa-save")}}}),(0,s.h)("omfx-button",{attrs:{contentClass:["ma-0",this.styles.fixButton].join(" "),small:!0},domProps:{onClick:t=>{this.onEditFileNameAction(t,!1,e.item)},mode:u.ButtonModes.icon,icon:{iconType:new u.FontAwesomeIcon("far fa-ban")}}})]):[(0,s.h)("div",{class:this.styles.fileTitle},[e.item.customFileName||e.item.file.name]),(0,s.h)("div",{class:this.styles.fileSize},[e.item.fileSizeLabel])]]),!i&&(0,s.h)("td",{class:[e.item.status==u.FileUploaderItemStatus.Error?this.styles.labelColumnError:"","text-right"]},[(0,s.h)("div",{class:this.styles.mainLabel},[e.item.label.main]),(0,s.h)("div",{class:this.styles.subLabel},[e.item.label.sub])]),(0,s.h)("td",{class:["pa-0",this.styles.iconColumn]},[t?(0,s.h)("v-icon",{attrs:{small:!0,color:this.omniaTheming.themes.primary.base}},["fas fa-check-circle"]):e.item.status==u.FileUploaderItemStatus.Error?(0,s.h)("v-icon",{attrs:{small:!0,color:"red"}},["fa fa-info-circle"]):e.item.status==u.FileUploaderItemStatus.Processing?(0,s.h)("v-progress-circular",{attrs:{value:e.item.progressPercent,size:"16",width:"2",color:this.omniaTheming.promoted.body.primary.base}}):null])])}}}),!this.disabled&&(0,s.h)("div",{class:["pt-2 text-left",this.styles.hintForEditFileName]},[this.loc.HintForEditFileName])]])}};F([(0,l.Prop)()],x.prototype,"dark",2),F([(0,l.Prop)()],x.prototype,"disabled",2),F([(0,l.Prop)()],x.prototype,"onFileChanged",2),F([(0,l.Prop)()],x.prototype,"enablePasteClipboardData",2),F([(0,l.Prop)()],x.prototype,"multiple",2),F([(0,l.Prop)()],x.prototype,"limitedFileTypes",2),F([(0,l.Prop)()],x.prototype,"limitedFileSize",2),F([(0,l.Prop)()],x.prototype,"hideOverlayIcon",2),F([(0,a.Inject)(h.OmniaTheming)],x.prototype,"omniaTheming",2),F([(0,a.Localize)(p.namespace)],x.prototype,"loc",2),F([(0,a.Localize)(f.OmniaUxLocalizationNamespace)],x.prototype,"omniaUxLoc",2),x=F([o.default],x),a.WebComponentBootstrapper.registerElement((e=>{(0,a.vueCustomElement)(e.elementName,x,{destroyTimeout:1e3})}))},"./client/fx/ux/models/index.js":(e,t,i)=>{e.exports=i("dll-reference md66")("./client/fx/ux/models/index.js")},"./client/fx/ux/omniatheming.js":(e,t,i)=>{e.exports=i("dll-reference md66")("./client/fx/ux/omniatheming.js")},"./client/fx/ux/styleflow.js":(e,t,i)=>{e.exports=i("dll-reference md66")("./client/fx/ux/styleflow.js")},"./client/fx/ux/uxmodels.js":(e,t,i)=>{e.exports=i("dll-reference md66")("./client/fx/ux/uxmodels.js")},"./node_modules/@vue/composition-api/dist/vue-composition-api.mjs":(e,t,i)=>{e.exports=i("dll-reference md2")("./node_modules/@vue/composition-api/dist/vue-composition-api.mjs")},"./node_modules/vue-class-component/dist/vue-class-component.esm.js":(e,t,i)=>{e.exports=i("dll-reference md2")("./node_modules/vue-class-component/dist/vue-class-component.esm.js")},"./node_modules/vue-property-decorator/lib/vue-property-decorator.js":(e,t,i)=>{e.exports=i("dll-reference md2")("./node_modules/vue-property-decorator/lib/vue-property-decorator.js")},"14a8d443-2e58-450b-a462-258bdaf69b49":(e,t,i)=>{e.exports=i("dll-reference md10")("14a8d443-2e58-450b-a462-258bdaf69b49")},"97786ea9-4861-48bd-8a57-eae9bbdb4892":(e,t,i)=>{e.exports=i("dll-reference md9")("97786ea9-4861-48bd-8a57-eae9bbdb4892")},"d0a145a7-d1ef-4217-aa6f-85dd18c4231d":(e,t,i)=>{e.exports=i("dll-reference md9")("d0a145a7-d1ef-4217-aa6f-85dd18c4231d")},"d7327742-5647-4075-b7ab-4f9ca852addb":(e,t,i)=>{e.exports=i("dll-reference md66")("d7327742-5647-4075-b7ab-4f9ca852addb")},"dll-reference md2":e=>{"use strict";e.exports=omniaVendor},"dll-reference md9":e=>{"use strict";e.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["a2892051-fd9f-4056-ae8d-30d16d48417d"]},"dll-reference md10":e=>{"use strict";e.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["a5a89056-b5f5-475d-8518-a1f55090379d"]},"dll-reference md66":e=>{"use strict";e.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["dee030cc-4ab3-4158-bb06-8049f5c67542"]}};if("undefined"==typeof omniaWebpackJsonp&&(globalThis.omniaWebpackJsonp={}),globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]=globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]||{},globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["1fab0218-538f-431c-91ec-e4e10cbd468c"])throw new Error("Error, already loaded manifest 1fab0218-538f-431c-91ec-e4e10cbd468c with service id bb000000-0000-bbbb-0000-0000000000bb");globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["1fab0218-538f-431c-91ec-e4e10cbd468c"]=i;var t={};function i(s){var o=t[s];if(void 0!==o)return o.exports;var l=t[s]={exports:{}};return e[s](l,l.exports,i),l.exports}i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};i("./client/fx/ux/fileuploader/fileuploader.tsx")})()};