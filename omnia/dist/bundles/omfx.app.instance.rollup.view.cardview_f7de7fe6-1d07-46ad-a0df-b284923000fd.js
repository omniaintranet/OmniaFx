if("undefined"==typeof omniaLoader&&(globalThis.omniaLoader={}),omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]=omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]||{},omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]["f7de7fe6-1d07-46ad-a0df-b284923000fd"])throw new Error("Error, already loaded manifest f7de7fe6-1d07-46ad-a0df-b284923000fd with service id bb000000-0000-bbbb-0000-0000000000bb");omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]["f7de7fe6-1d07-46ad-a0df-b284923000fd"]=function(){(()=>{var e={"./client/fx/ux/app/appinstance/view/card/cardview.tsx":(e,t,i)=>{"use strict";i.r(t),i.d(t,{AppInstanceRollupCardViewComponent:()=>y});var r=i("14a8d443-2e58-450b-a462-258bdaf69b49").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","f7de7fe6-1d07-46ad-a0df-b284923000fd"),a=i("d0a145a7-d1ef-4217-aa6f-85dd18c4231d"),s=i("./node_modules/@vue/composition-api/dist/vue-composition-api.mjs"),o=i("./node_modules/vue-class-component/dist/vue-class-component.esm.js"),n=i("d7327742-5647-4075-b7ab-4f9ca852addb").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","f7de7fe6-1d07-46ad-a0df-b284923000fd"),d=i("5e618f4d-d014-414e-a681-89e34cbeda0f"),l=i("./client/fx/ux/models/index.js"),p=i("./client/fx/ux/styleflow.js"),c=i("./client/fx/ux/app/appinstance/view/baseview.tsx"),b=i("./client/fx/ux/app/appinstance/view/mixmanager.js"),m=i("./node_modules/csx/lib.es2015/index.js"),g=i("./node_modules/typestyle/umd/typestyle.js");n.StyleFlow.define(n.AppInstanceRollupCardViewStyles,{headingWrapper:{width:"100%",wordBreak:"break-word"},getPadding:e=>{let t={};return e&&(t={paddingTop:(0,m.important)(`${e.top}px`),paddingRight:(0,m.important)(`${e.right}px`),paddingLeft:(0,m.important)(`${e.left}px`),paddingBottom:(0,m.important)(`${e.bottom}px`)}),t},componentWrapper:e=>{const t=e?e.bottom:12;return{margin:(0,m.important)(`-${t}px`)}},column:{overflow:"hidden"},cardWrapper:(e,t,i)=>{let r={};if(e&&e.borderSettings&&e.borderSettings.size>0){const t=e.borderSettings.color?e.borderSettings.color:"rgba(0,0,0,.12)";t.indexOf("rgba")>-1&&i===a.AppInstanceRollupCardViewTypes.BackgroundImage||(r.border=(0,m.important)(`${e.borderSettings.size}px solid ${t}`)),e.borderSettings.radius&&(r.borderRadius=(0,m.important)(e.borderSettings.radius+"px"))}if(i===a.AppInstanceRollupCardViewTypes.BackgroundImage){let s="",o="";if(e.overlayOpacity||0===e.overlayOpacity){let i="rgba(0,0,0,0.05)",r="rgba(0,0,0,0.5)",a=`rgba(0,0,0,0.${e.overlayOpacity})`;if(e.overlayColor&&""!==e.overlayColor){const t=n.ThemeManager.IsRGBColor(e.overlayColor)?n.ThemeManager.GetRGBValues(e.overlayColor):n.ThemeManager.GetRGBValuesFromHex(e.overlayColor);i=`rgba(${t[0]},${t[1]},${t[2]},0.05)`,r=`rgba(${t[0]},${t[1]},${t[2]},0.5)`,a=`rgba(${t[0]},${t[1]},${t[2]},0.${e.overlayOpacity})`}0===e.overlayOpacity&&(s=""),100===e.overlayOpacity?s=e.overlayColor:(s=`linear-gradient(to bottom, ${i} 0%,${a} 100%), url('${t}') center center/cover no-repeat!important`,o=`linear-gradient(to bottom, ${i} 0%,${r} 100%), url('${t}') center center/cover no-repeat!important`)}else s="linear-gradient(to bottom, rgba(0,0,0,0.05) 0%,rgba(0,0,0,0.95) 100%), url('"+t+"') center center/cover no-repeat!important",o="linear-gradient(to bottom, rgba(0,0,0,0.05) 0%,rgba(0,0,0,0.5) 100%), url('"+t+"') center center/cover no-repeat!important";r=Object.assign({},r,{backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",background:t?s:null,$nest:{"&:hover":{transition:"all .5s",opacity:i===a.AppInstanceRollupCardViewTypes.BackgroundImage?"":"0.95",background:t?o:null}}})}return Object.assign({overflow:"hidden"},r)},image:{width:"100%",marginBottom:"10px"},imageWrapper:e=>{let t={};if(e.borderSettings&&e.borderSettings.radius){let i=e.borderSettings.radius>2?e.borderSettings.radius/2:0;e.borderSettings.radius<16?i+=2:i+=3,t={borderTopLeftRadius:e.borderSettings.radius-i+"px!important",borderTopRightRadius:e.borderSettings.radius-i+"px!important"}}return t},titleWrapper:(e,t)=>{let i={flexWrap:(0,m.important)("nowrap"),wordBreak:(0,m.important)("break-word")},r=null;e.titleOnImageColor?r=(0,m.important)(e.titleOnImageColor):t===a.AppInstanceRollupCardViewTypes.BackgroundImage&&(r="white");let s=1.25,o=1.5;const n=.2,d=.2;let l=1.5;return 1===e.titleSize?(s=1,o=1.3,l=1.3):2===e.titleSize?(s=1.1,o=1.4):3===e.titleSize?(s=1.25,o=1.5):4===e.titleSize?(s=1.35,o=1.6,l=1.6):5===e.titleSize&&(s=1.45,o=1.7,l=1.6),i=e.staticTitleSize?Object.assign({},i,{color:r,fontSize:(0,m.important)(s+"rem"),lineHeight:(0,m.important)(l+"rem"),...(0,g.extend)((0,g.media)({maxWidth:1700},{fontSize:(0,m.important)(s+n+"vw"),lineHeight:(0,m.important)(s+d+n+"vw")}),(0,g.media)({maxWidth:1500},{fontSize:(0,m.important)(s+.4+"vw"),lineHeight:(0,m.important)(s+d+.4+"vw")}),(0,g.media)({maxWidth:1300},{fontSize:(0,m.important)(s+3*n+"vw"),lineHeight:(0,m.important)(s+d+3*n+"vw")}),(0,g.media)({maxWidth:1100},{fontSize:(0,m.important)(s+.8+"vw"),lineHeight:(0,m.important)(s+d+.8+"vw")}),(0,g.media)({maxWidth:900},{fontSize:(0,m.important)(s+1+"vw"),lineHeight:(0,m.important)(s+d+1+"vw")}),(0,g.media)({maxWidth:700},{fontSize:(0,m.important)(s+6*n+"vw"),lineHeight:(0,m.important)(s+d+6*n+"vw")}),(0,g.media)({maxWidth:600},{fontSize:(0,m.important)(o+.2+"rem"),lineHeight:(0,m.important)(s+.1+"rem")}))}):Object.assign({},i,{color:r,fontSize:(0,m.important)(s+"vw"),lineHeight:(0,m.important)(s+.2+"vw")}),i},bottomDrawerActionWrapper:{position:"absolute",bottom:0,width:"100%"},bottomDrawerActionSpacer:{height:"30px"},bottomDrawerSocialText:e=>({color:e?"rgba(255,255,255,0.65)":"",whiteSpace:"nowrap",overflow:"hidden",fontSize:".775rem"}),bottomDrawerDateWrapper:{width:"50px"},bottomDrawerBottomSpacing:e=>{let t={};if(e.borderSettings.radius>10){t={paddingBottom:(e.borderSettings.radius>20?10+e.borderSettings.radius-20:10)+"px!important"}}return t},noImage:{width:"100%",backgroundColor:"#ccc",height:"120px",marginBottom:"10px",display:"flex",alignItems:"center",justifyContent:"center"}});var h=Object.defineProperty,u=Object.getOwnPropertyDescriptor,f=(e,t,i,r)=>{for(var a,s=r>1?void 0:r?u(t,i):t,o=e.length-1;o>=0;o--)(a=e[o])&&(s=(r?a(t,i,s):a(s))||s);return r&&s&&h(t,i,s),s};const w=new a.LandscapeRatio;let y=class extends c.AppInstanceRollupViewBase{constructor(){super(...arguments),this.cardViewStyles=p.StyleFlow.use(l.AppInstanceRollupCardViewStyles),this.cardCols=12,this.sourceTermProperties={},this.customThemes=[],this.isReadyRenderImage=!1}get viewSettings(){return this.displaySettings.selectedDisplayView?.viewSettings}created(){if(this.viewSettings.mixCardType&&(this.cardMixingStrategy=b.MixManager.generateSelectionStrategy(!1)),this.viewSettings.cardsPerRow&&this.viewSettings.cardsPerRow>0&&(this.cardCols=12/this.viewSettings.cardsPerRow),this.viewSettings.termProperties&&this.viewSettings.termProperties.length>0){this.propertyStore.getters.enterprisePropertyDefinitionsByIndexedTypes([a.PropertyIndexedType.Taxonomy,a.PropertyIndexedType.EnterpriseKeywords,a.PropertyIndexedType.Tags]).forEach((e=>{this.$set(this.sourceTermProperties,e.internalName,e)}))}this.mediaPickerStore.actions.ensureImageRatios.dispatch().then((()=>{this.isReadyRenderImage=!0}))}mounted(){r.WebComponentBootstrapper.registerElementInstance(this,this.$el)}getColumnsOfGrid(e){if(this.$el&&this.$el.clientWidth){const e=this.$el.clientWidth;let t=isNaN(parseInt(this.viewSettings.cardsPerRow))?1:parseInt(this.viewSettings.cardsPerRow);e<=600&&t>=2?t=1:e<=960&&t>=4?t=2:e<=1264&&6===t&&(t=4),this.cardCols=12/t}}getCustomTheme(e){const t=this.customThemes.find((t=>t.index===e));if(!t){const t={index:e,theme:b.MixManager.createTheme()};this.customThemes.push(t)}return t.theme}getOverlayGradient(){if(this.viewSettings.overlayOpacity||0===this.viewSettings.overlayOpacity){let e="rgba(0,0,0,0.05)",t=`rgba(0,0,0,0.${this.viewSettings.overlayOpacity})`;if(this.viewSettings.overlayColor&&""!==this.viewSettings.overlayColor){const i=n.ThemeManager.IsRGBColor(this.viewSettings.overlayColor)?n.ThemeManager.GetRGBValues(this.viewSettings.overlayColor):n.ThemeManager.GetRGBValuesFromHex(this.viewSettings.overlayColor);e=`rgba(${i[0]},${i[1]},${i[2]},0.05)`,t=`rgba(${i[0]},${i[1]},${i[2]},0.${this.viewSettings.overlayOpacity})`}return 0===this.viewSettings.overlayOpacity?"":100===this.viewSettings.overlayOpacity?`to bottom, ${this.viewSettings.overlayColor} 0%,${this.viewSettings.overlayColor} 100%`:`to bottom, ${e} 0%,${t} 100%`}return"to bottom, rgba(0,0,0,0.05) 0%,rgba(0,0,0,0.65) 100%"}getTextColorClass(e,t){return e===a.AppInstanceRollupCardViewTypes.BackgroundImage?null:b.MixManager.isUsingDefaultBlockTheme(t)?"text--primary":t.body.text.css}renderImage(e,t,i){if(i===a.AppInstanceRollupCardViewTypes.Text||i===a.AppInstanceRollupCardViewTypes.BackgroundImage)return null;return(0,s.h)("v-img",{class:["white--text align-end",this.cardViewStyles.imageWrapper(this.viewSettings)],attrs:{"aspect-ratio":16/9,gradient:this.getOverlayGradient(),src:t}},[i===a.AppInstanceRollupCardViewTypes.TitleOnImage&&this.renderTitle(e,i,null)])}renderTitle(e,t,i){return(0,s.h)("v-card-title",{class:["d-flex justify-space-between align-start",this.cardViewStyles.headingWrapper,this.cardViewStyles.titleWrapper(this.viewSettings,t),i]},[(0,s.h)("div",{class:"d-flex"},[e.title]),this.displaySettings.showFollowStatus&&(0,s.h)("div",{class:"flex-shrink-0 flex-grow-0"},[this.renderFollowIcon(e,{textColor:"inherit"})])])}renderTermProperties(e){const t=[];this.viewSettings.termProperties&&this.viewSettings.termProperties.length>0&&this.viewSettings.termProperties.forEach(((i,r)=>{let a=null;const o=e.enterprisePropertyValues[i.internalName],n=this.sourceTermProperties[i.internalName];if(n&&o&&o.length>0){const e={valueBind:o,property:n},r={textOnly:!1,internalName:""};e.settings=r,i.showLabel&&t.push((0,s.h)("div",{class:"subtitle-2 mt-1"},[n.multilingualTitle])),a=(0,s.h)(n.enterprisePropertyDataType.uiOptions.displayModeElementName,{domProps:e}),t.push(a)}}));let i=null;return t.length>0&&(i=(0,s.h)("div",{class:"mx-3 mt-3"},[t])),i}renderBottomDrawer(e,t,i){let o=[];const n=t===a.AppInstanceRollupCardViewTypes.BackgroundImage;let d=null;const l=this.viewSettings.personProperty?e.enterprisePropertyValues[this.viewSettings.personProperty]:null;let p=0;l&&(p=r.Utils.isArray(l)?l.length:1,p>0&&(d=this.propertyStore.getters.enterprisePropertyDefinitions().find((e=>e.internalName==this.viewSettings.personProperty))));let c="";if(this.viewSettings.dateProperty){const t=e.enterprisePropertyValues[this.viewSettings.dateProperty];t&&(c=r.Utils.getSocialDate(t))}return(d||c)&&(o=[(0,s.h)("div",{class:[this.cardViewStyles.bottomDrawerActionSpacer,this.cardViewStyles.bottomDrawerBottomSpacing(this.viewSettings)],style:p>1?{height:18*p+10+"px"}:{}},[" "]),(0,s.h)("v-card-actions",{class:[this.cardViewStyles.bottomDrawerActionWrapper,this.cardViewStyles.bottomDrawerBottomSpacing(this.viewSettings),"px-4"]},[(0,s.h)("div",{class:"d-flex justify-space-between align-end flex-wrap",style:{width:"100%"}},[(0,s.h)("div",[d&&(0,s.h)("omfx-enterpriseproperties-personfield-display",{attrs:{valueBind:l,property:d,settings:{hideAvatar:!0,fontSize:".775rem",contentColor:n?"rgba(255,255,255,0.65)":"",itemClass:n?"":i.body.text.csslighter4}}})]),c&&(0,s.h)("div",[(0,s.h)("span",{class:[this.cardViewStyles.bottomDrawerSocialText(n),n?null:i.body.text.csslighter4]},[c])])])])]),o}renderCard(e,t){const i=e.image&&this.isReadyRenderImage?this.mediaPickerStore.getters.url(e.image,w.uniqueId):"";let r=this.viewSettings.cardType;i?(this.viewSettings.cardType===a.AppInstanceRollupCardViewTypes.Mixed||b.MixManager.isRandomSelectedLayout(this.cardMixingStrategy,t,6))&&(r=b.MixManager.getRandomLayout(this.viewSettings.cardType,this.viewSettings.colorFul)):r=a.AppInstanceRollupCardViewTypes.Text;let o=this.theming;this.viewSettings.colorFul&&r===a.AppInstanceRollupCardViewTypes.Text&&(o=this.getCustomTheme(t));const n=b.MixManager.isUsingDefaultBlockTheme(o);let d=n?null:o.body.fg.color.base;d=d||"rgba(0,0,0,0)";const l=this.viewSettings.descriptionProperty?this.viewSettings.descriptionProperty===a.AppInstanceRollupConstants.AppInstanceProperties.Description?e.description:e.enterprisePropertyValues[this.viewSettings.descriptionProperty]:null;return(0,s.h)("v-card",{class:["mx-auto",this.cardViewStyles.cardWrapper(this.viewSettings,i,r)],on:{click:t=>this.goToAppInstance(t,e,this.getAppInstanceUrl(e))},attrs:{dark:!n&&o.body.fg.dark||r===a.AppInstanceRollupCardViewTypes.BackgroundImage,color:d,hover:!0,height:"100%",elevation:null!=this.viewSettings.elevation?this.viewSettings.elevation:0,tile:!this.viewSettings.borderSettings||0===this.viewSettings.borderSettings.radius}},[this.renderImage(e,i,r),this.renderTermProperties(e),r!==a.AppInstanceRollupCardViewTypes.TitleOnImage&&this.renderTitle(e,r,this.getTextColorClass(r,o)),(0,s.h)("v-card-text",{class:this.getTextColorClass(r,o)},[l]),this.renderBottomDrawer(e,r,o)])}render(){return this.$nextTick((()=>{this.getColumnsOfGrid(1)})),(0,s.h)("div",{class:this.cardViewStyles.getPadding(this.displaySettings.spacing)},[(0,s.h)("v-row",{class:["pa-0",this.cardViewStyles.componentWrapper(this.viewSettings.cardSpacing)]},[this.items&&this.items.map(((e,t)=>(0,s.h)("v-col",{attrs:{cols:this.cardCols},class:[this.cardViewStyles.column,this.cardViewStyles.getPadding(this.viewSettings.cardSpacing)]},[this.renderCard(e,t)])))])])}};f([(0,r.Inject)(d.MediaPickerStore)],y.prototype,"mediaPickerStore",2),y=f([o.default],y),r.WebComponentBootstrapper.registerElement((e=>{(0,r.vueCustomElement)(e.elementName,y)}))},"./client/fx/ux/app/appinstance/view/baseview.tsx":(e,t,i)=>{e.exports=i("dll-reference md30")("./client/fx/ux/app/appinstance/view/baseview.tsx")},"./client/fx/ux/app/appinstance/view/mixmanager.js":(e,t,i)=>{e.exports=i("dll-reference md30")("./client/fx/ux/app/appinstance/view/mixmanager.js")},"./client/fx/ux/models/index.js":(e,t,i)=>{e.exports=i("dll-reference md66")("./client/fx/ux/models/index.js")},"./client/fx/ux/styleflow.js":(e,t,i)=>{e.exports=i("dll-reference md66")("./client/fx/ux/styleflow.js")},"./node_modules/@vue/composition-api/dist/vue-composition-api.mjs":(e,t,i)=>{e.exports=i("dll-reference md2")("./node_modules/@vue/composition-api/dist/vue-composition-api.mjs")},"./node_modules/csx/lib.es2015/index.js":(e,t,i)=>{e.exports=i("dll-reference md2")("./node_modules/csx/lib.es2015/index.js")},"./node_modules/typestyle/umd/typestyle.js":(e,t,i)=>{e.exports=i("dll-reference md2")("./node_modules/typestyle/umd/typestyle.js")},"./node_modules/vue-class-component/dist/vue-class-component.esm.js":(e,t,i)=>{e.exports=i("dll-reference md2")("./node_modules/vue-class-component/dist/vue-class-component.esm.js")},"14a8d443-2e58-450b-a462-258bdaf69b49":(e,t,i)=>{e.exports=i("dll-reference md10")("14a8d443-2e58-450b-a462-258bdaf69b49")},"5e618f4d-d014-414e-a681-89e34cbeda0f":(e,t,i)=>{e.exports=i("dll-reference md10")("5e618f4d-d014-414e-a681-89e34cbeda0f")},"d0a145a7-d1ef-4217-aa6f-85dd18c4231d":(e,t,i)=>{e.exports=i("dll-reference md9")("d0a145a7-d1ef-4217-aa6f-85dd18c4231d")},"d7327742-5647-4075-b7ab-4f9ca852addb":(e,t,i)=>{e.exports=i("dll-reference md66")("d7327742-5647-4075-b7ab-4f9ca852addb")},"dll-reference md2":e=>{"use strict";e.exports=omniaVendor},"dll-reference md9":e=>{"use strict";e.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["a2892051-fd9f-4056-ae8d-30d16d48417d"]},"dll-reference md10":e=>{"use strict";e.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["a5a89056-b5f5-475d-8518-a1f55090379d"]},"dll-reference md30":e=>{"use strict";e.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["cf32f641-6cf6-4644-bfe8-47f7f13de960"]},"dll-reference md66":e=>{"use strict";e.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["dee030cc-4ab3-4158-bb06-8049f5c67542"]}};if("undefined"==typeof omniaWebpackJsonp&&(globalThis.omniaWebpackJsonp={}),globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]=globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]||{},globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["f7de7fe6-1d07-46ad-a0df-b284923000fd"])throw new Error("Error, already loaded manifest f7de7fe6-1d07-46ad-a0df-b284923000fd with service id bb000000-0000-bbbb-0000-0000000000bb");globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["f7de7fe6-1d07-46ad-a0df-b284923000fd"]=i;var t={};function i(r){var a=t[r];if(void 0!==a)return a.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,i),s.exports}i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};i("./client/fx/ux/app/appinstance/view/card/cardview.tsx")})()};