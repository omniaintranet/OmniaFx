if("undefined"==typeof omniaLoader&&(globalThis.omniaLoader={}),omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]=omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]||{},omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]["8aca2b86-f3e7-41bc-8e8c-82dfad7d1a77"])throw new Error("Error, already loaded manifest 8aca2b86-f3e7-41bc-8e8c-82dfad7d1a77 with service id bb000000-0000-bbbb-0000-0000000000bb");omniaLoader["bb000000-0000-bbbb-0000-0000000000bb"]["8aca2b86-f3e7-41bc-8e8c-82dfad7d1a77"]=function(){(()=>{var e={"./client/fx/ux/richtexteditor/richtexteditorsettings.tsx":(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>f});var n=i("./node_modules/@vue/composition-api/dist/vue-composition-api.mjs"),s=i("./node_modules/vue-property-decorator/lib/vue-property-decorator.js"),o=i("d7327742-5647-4075-b7ab-4f9ca852addb").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","8aca2b86-f3e7-41bc-8e8c-82dfad7d1a77"),d=i("./node_modules/csx/lib.es2015/index.js");const r={};o.StyleFlow.define(r,{checkboxColumn:{$nest:{".v-input__slot":{margin:(0,d.important)("0px")}}},listTileActionColumn:{display:"inline-block !important",textAlign:"right",$nest:{".v-icon":{marginLeft:(0,d.important)("10px")}}}});var a=i("./node_modules/typestyle/umd/typestyle.js"),l=i("d0a145a7-d1ef-4217-aa6f-85dd18c4231d"),c=i("14a8d443-2e58-450b-a462-258bdaf69b49").setCurrentManifest("bb000000-0000-bbbb-0000-0000000000bb","8aca2b86-f3e7-41bc-8e8c-82dfad7d1a77"),b=i("e25b9dd8-6dd7-4437-8ddd-0b9fadba73ac"),h=i("./client/fx/ux/richtexteditor/extensions/index.js"),g=i("5e618f4d-d014-414e-a681-89e34cbeda0f"),m=Object.defineProperty,p=Object.getOwnPropertyDescriptor,u=(e,t,i,n)=>{for(var s,o=n>1?void 0:n?p(t,i):t,d=e.length-1;d>=0;d--)(s=e[d])&&(o=(n?s(t,i,o):s(o))||o);return n&&o&&m(t,i,o),o};let f=class extends o.VueComponentBase{constructor(){super(...arguments),this.guid="",this.richTextEditorExtensionSubscriptionHandler=null,this.isSaving=!1,this.readyToRender=!1,this.RTFContents={extensions:"Lorem ipsum dolor sit amet, porttitor commodo ipsum viverra tristique cursus.",limitedExtensions:"Lorem ipsum dolor sit amet, porttitor commodo ipsum viverra tristique cursus."},this.isRendering=!1,this.richTextEdiorSettingsStyles=o.StyleFlow.use(r),this.formValidator=null,this.textStylesSettingKey=l.Constants.ux.components.textStyles.settingsKey,this.headings=[]}created(){this.init()}init(){this.guid=c.Utils.generateGuid(),this.settingsService.getValue(this.textStylesSettingKey).then((e=>{this.headings=e?this.getHeadingSettings(this.migratenewHeading(e.headings)):this.getHeadingSettings(o.HeadingConfigurationFactory.create())})),omniaApi.fx.ux.richTextEditor.registration.then((e=>{const t=e.getAllExtensions();this.extensions=this.extensions.filter((e=>void 0!==t.find((t=>t.id==e.id)))),t.forEach((e=>{const t=this.extensions.find((t=>t.id.toString()==e.id.toString()));if(t)t.instance=e.instance,t.manifestId=e.manifestId,t.serviceId=e.serviceId,t.title=e.title;else{const t={id:e.id,instance:e.instance,manifestId:e.manifestId,serviceId:e.serviceId,title:e.title};this.extensions.push(t)}})),this.readyToRender=!0}))}mounted(){c.WebComponentBootstrapper.registerElementInstance(this,this.$el),this.formValidator=new o.FormValidator(this)}beforeDestroy(){this.richTextEditorExtensionSubscriptionHandler&&this.richTextEditorExtensionSubscriptionHandler.unsubscribe()}migratenewHeading(e){const t=o.HeadingConfigurationFactory.create();return e.map((e=>{if(c.Utils.isNullOrEmpty(e.isHiddenStyle)){const i=t.find((t=>t.id.toString()==e.id.toString()||""));e.isHiddenStyle=!!i&&i.isHiddenStyle}return e}))}getHeadingSettings(e){return e.filter((e=>e.enabled&&!e.isHiddenStyle)).map((e=>({...e,multilingualTitleDisplay:this.multilingualStore.getters.stringValue(e.title)})))}onExtensionCheckedChanged(e,t){e.isChecked=!e.isChecked,0==e.isChecked&&(e.isSettingsShowed=!1),e.id.toString()!=h.HeadingEditorExtension.id.toString()||e.settings||(e.settings={headings:o.HeadingConfigurationFactory.create().map((e=>e.id))}),this.onExtensionChange(this.extensions),this.forceRendering()}onHeadingSettingsChanged(e,t){e.settings.headings=t,this.onExtensionChange(this.extensions),this.forceRendering()}forceRendering(){this.isRendering=!0,setTimeout((()=>{this.isRendering=!1}),100)}saveSettings(){}onExtensionOrderChanged(e){1==e.moved.element.isChecked&&(this.onExtensionChange(this.extensions),this.forceRendering())}toggleExtensionSettings(e){e.isSettingsShowed=!e.isSettingsShowed,this.$forceUpdate()}isNotEmpty(e){return!c.Utils.isArrayNullOrEmpty(e)}updateExtension(e){const t=this.extensions.find((t=>t.id==e.id));t&&(t.settings=e.settings),this.onExtensionChange(this.extensions)}render(){return this.readyToRender?(0,n.h)("div",[this.renderPreviewEditor(),this.renderExtensions()]):null}renderPreviewEditor(){return this.showEditorPreview?(0,n.h)("div",{style:"min-height: 180px"},[this.isRendering?(0,n.h)("v-layout",{attrs:{"justify-center":!0,"align-center":!0}},[(0,n.h)("v-progress-circular",{attrs:{indeterminate:!0}},[" "])]):(0,n.h)("omfx-rich-text-editor",{domProps:{onContentChange:e=>{this.RTFContents.extensions=e}},attrs:{initialContent:this.RTFContents.extensions},on:{configureExtensions:e=>this.extensions.filter((e=>1==e.isChecked)).map((e=>c.Utils.isNullOrEmpty(e.settings)?e.instance:e.instance(e.settings)))}})]):null}renderExtensions(){return(0,n.h)("v-list",[(0,n.h)("draggable",{attrs:{element:"div",options:{handle:".drag-handle"+this.guid,animation:"200"}},on:{change:this.onExtensionOrderChanged},model:{value:this.extensions,callback:e=>{this.extensions=e}}},[this.extensions.filter((e=>e.instance)).map((e=>[(0,n.h)("v-list-item",{directives:[{name:"drag-and-drop",value:!0}]},[this.renderListTileContent(e,this.extensions)]),this.renderHeadingSettings(e)]))])])}renderListTileContent(e,t){return[(0,n.h)("v-list-item-action",[(0,n.h)("v-checkbox",{class:(0,a.classes)(this.richTextEdiorSettingsStyles.checkboxColumn),attrs:{"input-value":e.isChecked},on:{change:()=>{this.onExtensionCheckedChanged(e,t)}}})]),(0,n.h)("v-list-item-content",[(0,n.h)("v-list-item-title",[this.localizationService.transform(e.title)])]),(0,n.h)("v-list-item-action",{class:(0,a.classes)(this.richTextEdiorSettingsStyles.listTileActionColumn)},[e.id.toString()!=h.HeadingEditorExtension.id.toString()?null:(0,n.h)("v-icon",{attrs:{disabled:1!=e.isChecked},on:{click:()=>{this.toggleExtensionSettings(e)}}},["fas fa-cog"]),(0,n.h)("v-icon",{class:"drag-handle"+this.guid,on:{click:()=>{e.isSettingsShowed=!1}}},["fas fa-grip-lines"])])]}renderHeadingSettings(e){return e.id.toString()===h.HeadingEditorExtension.id.toString()&&e.isSettingsShowed?(0,n.h)("div",{class:"mb-2 px-4"},[(0,n.h)("v-select",{attrs:{items:this.headings,"item-text":"multilingualTitleDisplay","item-value":"id",label:this.loc.ExtensionSettings.Heading,multiple:!0},on:{change:t=>{this.onHeadingSettingsChanged(e,t)}},model:{value:e.settings.headings,callback:t=>{this.$set(e.settings,"headings",t)}}}),(0,n.h)("omfx-field-validation",{domProps:{useValidator:this.formValidator,checkValue:e.settings.headings,rules:(new o.FieldValueValidation).CustomFunction(this.isNotEmpty,this.loc.Messages.HeadingRequired).getRules()}})]):null}};u([(0,s.Prop)({default:!1})],f.prototype,"showEditorPreview",2),u([(0,s.Prop)()],f.prototype,"extensions",2),u([(0,s.Prop)()],f.prototype,"onExtensionChange",2),u([(0,c.Inject)(o.OmniaTheming)],f.prototype,"omniaTheming",2),u([(0,c.Localize)("Omnia.Ux")],f.prototype,"omniaUxLoc",2),u([(0,c.Localize)(h.RichTextEditorExtensionLocalization.namespace)],f.prototype,"loc",2),u([(0,c.Inject)(c.OmniaContext)],f.prototype,"omniaCtx",2),u([(0,c.Inject)(b.LocalizationService)],f.prototype,"localizationService",2),u([(0,c.Inject)(b.SettingsService,{securityRoleId:b.SecurityRoles.Tenant.Admin})],f.prototype,"settingsService",2),u([(0,c.Inject)(g.MultilingualStore)],f.prototype,"multilingualStore",2),f=u([s.Component],f),c.WebComponentBootstrapper.registerElement((e=>{(0,c.vueCustomElement)(e.elementName,f)}))},"./client/fx/ux/richtexteditor/extensions/index.js":(e,t,i)=>{e.exports=i("dll-reference md60")("./client/fx/ux/richtexteditor/extensions/index.js")},"./node_modules/@vue/composition-api/dist/vue-composition-api.mjs":(e,t,i)=>{e.exports=i("dll-reference md2")("./node_modules/@vue/composition-api/dist/vue-composition-api.mjs")},"./node_modules/csx/lib.es2015/index.js":(e,t,i)=>{e.exports=i("dll-reference md2")("./node_modules/csx/lib.es2015/index.js")},"./node_modules/typestyle/umd/typestyle.js":(e,t,i)=>{e.exports=i("dll-reference md2")("./node_modules/typestyle/umd/typestyle.js")},"./node_modules/vue-property-decorator/lib/vue-property-decorator.js":(e,t,i)=>{e.exports=i("dll-reference md2")("./node_modules/vue-property-decorator/lib/vue-property-decorator.js")},"14a8d443-2e58-450b-a462-258bdaf69b49":(e,t,i)=>{e.exports=i("dll-reference md10")("14a8d443-2e58-450b-a462-258bdaf69b49")},"5e618f4d-d014-414e-a681-89e34cbeda0f":(e,t,i)=>{e.exports=i("dll-reference md10")("5e618f4d-d014-414e-a681-89e34cbeda0f")},"d0a145a7-d1ef-4217-aa6f-85dd18c4231d":(e,t,i)=>{e.exports=i("dll-reference md9")("d0a145a7-d1ef-4217-aa6f-85dd18c4231d")},"d7327742-5647-4075-b7ab-4f9ca852addb":(e,t,i)=>{e.exports=i("dll-reference md66")("d7327742-5647-4075-b7ab-4f9ca852addb")},"e25b9dd8-6dd7-4437-8ddd-0b9fadba73ac":(e,t,i)=>{e.exports=i("dll-reference md10")("e25b9dd8-6dd7-4437-8ddd-0b9fadba73ac")},"dll-reference md2":e=>{"use strict";e.exports=omniaVendor},"dll-reference md9":e=>{"use strict";e.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["a2892051-fd9f-4056-ae8d-30d16d48417d"]},"dll-reference md10":e=>{"use strict";e.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["a5a89056-b5f5-475d-8518-a1f55090379d"]},"dll-reference md60":e=>{"use strict";e.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["b46f7161-e941-4240-b573-a9cd83e9d132"]},"dll-reference md66":e=>{"use strict";e.exports=omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["dee030cc-4ab3-4158-bb06-8049f5c67542"]}};if("undefined"==typeof omniaWebpackJsonp&&(globalThis.omniaWebpackJsonp={}),globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]=globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]||{},globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["8aca2b86-f3e7-41bc-8e8c-82dfad7d1a77"])throw new Error("Error, already loaded manifest 8aca2b86-f3e7-41bc-8e8c-82dfad7d1a77 with service id bb000000-0000-bbbb-0000-0000000000bb");globalThis.omniaWebpackJsonp["bb000000-0000-bbbb-0000-0000000000bb"]["8aca2b86-f3e7-41bc-8e8c-82dfad7d1a77"]=i;var t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,i),o.exports}i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};i("./client/fx/ux/richtexteditor/richtexteditorsettings.tsx")})()};